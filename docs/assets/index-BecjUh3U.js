(function(){const C=document.createElement("link").relList;if(C&&C.supports&&C.supports("modulepreload"))return;for(const i1 of document.querySelectorAll('link[rel="modulepreload"]'))$(i1);new MutationObserver(i1=>{for(const G of i1)if(G.type==="childList")for(const W of G.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&$(W)}).observe(document,{childList:!0,subtree:!0});function D(i1){const G={};return i1.integrity&&(G.integrity=i1.integrity),i1.referrerPolicy&&(G.referrerPolicy=i1.referrerPolicy),i1.crossOrigin==="use-credentials"?G.credentials="include":i1.crossOrigin==="anonymous"?G.credentials="omit":G.credentials="same-origin",G}function $(i1){if(i1.ep)return;i1.ep=!0;const G=D(i1);fetch(i1.href,G)}})();function Y0(B){return new Int8Array(B)}function C0(B){return new Int16Array(B)}function d0(B){return new Int32Array(B)}function v0(B){return new Float32Array(B)}function j0(B){return new Float64Array(B)}function g0(B){if(B.length==1)return v0(B[0]);var C=B[0];B=B.slice(1);for(var D=[],$=0;$<C;$++)D.push(g0(B));return D}function M0(B){if(B.length==1)return d0(B[0]);var C=B[0];B=B.slice(1);for(var D=[],$=0;$<C;$++)D.push(M0(B));return D}function S0(B){if(B.length==1)return C0(B[0]);var C=B[0];B=B.slice(1);for(var D=[],$=0;$<C;$++)D.push(S0(B));return D}function w0(B){if(B.length==1)return new Array(B[0]);var C=B[0];B=B.slice(1);for(var D=[],$=0;$<C;$++)D.push(w0(B));return D}var R0={};R0.fill=function(B,C,D,$){if(arguments.length==2)for(var i1=0;i1<B.length;i1++)B[i1]=arguments[1];else for(var i1=C;i1<D;i1++)B[i1]=$};var We={};We.arraycopy=function(B,C,D,$,i1){for(var G=C+i1;C<G;)D[$++]=B[C++]};We.out={};We.out.println=function(B){console.log(B)};We.out.printf=function(){console.log.apply(console,arguments)};var ra={};ra.SQRT2=1.4142135623730951;ra.FAST_LOG10=function(B){return Math.log10(B)};ra.FAST_LOG10_X=function(B,C){return Math.log10(B)*C};function Ae(B){this.ordinal=B}Ae.short_block_allowed=new Ae(0);Ae.short_block_coupled=new Ae(1);Ae.short_block_dispensed=new Ae(2);Ae.short_block_forced=new Ae(3);var A0={};A0.MAX_VALUE=34028235e31;function ce(B){this.ordinal=B}ce.vbr_off=new ce(0);ce.vbr_mt=new ce(1);ce.vbr_rh=new ce(2);ce.vbr_abr=new ce(3);ce.vbr_mtrh=new ce(4);ce.vbr_default=ce.vbr_mtrh;var q0=function(B){},Q1={System:We,VbrMode:ce,Float:A0,ShortBlock:Ae,Util:ra,Arrays:R0,new_array_n:w0,new_byte:Y0,new_double:j0,new_float:v0,new_float_n:g0,new_int:d0,new_int_n:M0,new_short_n:S0,assert:q0},ma,Za;function F0(){if(Za)return ma;Za=1;var B=Q1,C=B.System,D=B.Util,$=B.Arrays,i1=B.new_float,G=te();function W(){var Y=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*D.SQRT2*.5/2384e-9,.017876148*D.SQRT2*.5/2384e-9,.003134727*D.SQRT2*.5/2384e-9,.002457142*D.SQRT2*.5/2384e-9,971317e-9*D.SQRT2*.5/2384e-9,218868e-9*D.SQRT2*.5/2384e-9,101566e-9*D.SQRT2*.5/2384e-9,13828e-9*D.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],K=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],h1=K[G.SHORT_TYPE],p=K[G.SHORT_TYPE],h=K[G.SHORT_TYPE],J=K[G.SHORT_TYPE],U=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function j(n,r,e){for(var m=10,x=r+238-14-286,b=-15;b<0;b++){var S,d,F;S=Y[m+-10],d=n[x+-224]*S,F=n[r+224]*S,S=Y[m+-9],d+=n[x+-160]*S,F+=n[r+160]*S,S=Y[m+-8],d+=n[x+-96]*S,F+=n[r+96]*S,S=Y[m+-7],d+=n[x+-32]*S,F+=n[r+32]*S,S=Y[m+-6],d+=n[x+32]*S,F+=n[r+-32]*S,S=Y[m+-5],d+=n[x+96]*S,F+=n[r+-96]*S,S=Y[m+-4],d+=n[x+160]*S,F+=n[r+-160]*S,S=Y[m+-3],d+=n[x+224]*S,F+=n[r+-224]*S,S=Y[m+-2],d+=n[r+-256]*S,F-=n[x+256]*S,S=Y[m+-1],d+=n[r+-192]*S,F-=n[x+192]*S,S=Y[m+0],d+=n[r+-128]*S,F-=n[x+128]*S,S=Y[m+1],d+=n[r+-64]*S,F-=n[x+64]*S,S=Y[m+2],d+=n[r+0]*S,F-=n[x+0]*S,S=Y[m+3],d+=n[r+64]*S,F-=n[x+-64]*S,S=Y[m+4],d+=n[r+128]*S,F-=n[x+-128]*S,S=Y[m+5],d+=n[r+192]*S,F-=n[x+-192]*S,d*=Y[m+6],S=F-d,e[30+b*2]=F+d,e[31+b*2]=Y[m+7]*S,m+=18,r--,x++}{var d,F,L,y;F=n[r+-16]*Y[m+-10],d=n[r+-32]*Y[m+-2],F+=(n[r+-48]-n[r+16])*Y[m+-9],d+=n[r+-96]*Y[m+-1],F+=(n[r+-80]+n[r+48])*Y[m+-8],d+=n[r+-160]*Y[m+0],F+=(n[r+-112]-n[r+80])*Y[m+-7],d+=n[r+-224]*Y[m+1],F+=(n[r+-144]+n[r+112])*Y[m+-6],d-=n[r+32]*Y[m+2],F+=(n[r+-176]-n[r+144])*Y[m+-5],d-=n[r+96]*Y[m+3],F+=(n[r+-208]+n[r+176])*Y[m+-4],d-=n[r+160]*Y[m+4],F+=(n[r+-240]-n[r+208])*Y[m+-3],d-=n[r+224],L=d-F,y=d+F,F=e[14],d=e[15]-F,e[31]=y+F,e[30]=L+d,e[15]=L-d,e[14]=y-F}{var c;c=e[28]-e[0],e[0]+=e[28],e[28]=c*Y[m+-36+7],c=e[29]-e[1],e[1]+=e[29],e[29]=c*Y[m+-36+7],c=e[26]-e[2],e[2]+=e[26],e[26]=c*Y[m+-72+7],c=e[27]-e[3],e[3]+=e[27],e[27]=c*Y[m+-72+7],c=e[24]-e[4],e[4]+=e[24],e[24]=c*Y[m+-108+7],c=e[25]-e[5],e[5]+=e[25],e[25]=c*Y[m+-108+7],c=e[22]-e[6],e[6]+=e[22],e[22]=c*D.SQRT2,c=e[23]-e[7],e[7]+=e[23],e[23]=c*D.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],c=e[6],e[6]=e[31]-c,e[31]=e[31]+c,c=e[7],e[7]=e[30]-c,e[30]=e[30]+c,c=e[22],e[22]=e[15]-c,e[15]=e[15]+c,c=e[23],e[23]=e[14]-c,e[14]=e[14]+c,c=e[20]-e[8],e[8]+=e[20],e[20]=c*Y[m+-180+7],c=e[21]-e[9],e[9]+=e[21],e[21]=c*Y[m+-180+7],c=e[18]-e[10],e[10]+=e[18],e[18]=c*Y[m+-216+7],c=e[19]-e[11],e[11]+=e[19],e[19]=c*Y[m+-216+7],c=e[16]-e[12],e[12]+=e[16],e[16]=c*Y[m+-252+7],c=e[17]-e[13],e[13]+=e[17],e[17]=c*Y[m+-252+7],c=-e[20]+e[24],e[20]+=e[24],e[24]=c*Y[m+-216+7],c=-e[21]+e[25],e[21]+=e[25],e[25]=c*Y[m+-216+7],c=e[4]-e[8],e[4]+=e[8],e[8]=c*Y[m+-216+7],c=e[5]-e[9],e[5]+=e[9],e[9]=c*Y[m+-216+7],c=e[0]-e[12],e[0]+=e[12],e[12]=c*Y[m+-72+7],c=e[1]-e[13],e[1]+=e[13],e[13]=c*Y[m+-72+7],c=e[16]-e[28],e[16]+=e[28],e[28]=c*Y[m+-72+7],c=-e[17]+e[29],e[17]+=e[29],e[29]=c*Y[m+-72+7],c=D.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=c,c=D.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=c,c=D.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=c-e[18],c=D.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=c-e[19],c=e[2],e[19]-=e[3],e[3]-=c,e[2]=e[31]-c,e[31]+=c,c=e[3],e[11]-=e[19],e[18]-=c,e[3]=e[30]-c,e[30]+=c,c=e[18],e[27]-=e[11],e[19]-=c,e[18]=e[15]-c,e[15]+=c,c=e[19],e[10]-=c,e[19]=e[14]-c,e[14]+=c,c=e[10],e[11]-=c,e[10]=e[23]-c,e[23]+=c,c=e[11],e[26]-=c,e[11]=e[22]-c,e[22]+=c,c=e[26],e[27]-=c,e[26]=e[7]-c,e[7]+=c,c=e[27],e[27]=e[6]-c,e[6]+=c,c=D.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=c,c=D.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=c,c=D.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=c,c=D.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=c,c=-D.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=c-e[8],c=-D.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=c-e[9],c=-D.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=c-e[25],c=-D.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=c-e[24],c=e[24]-e[16],e[24]=c,c=e[20]-c,e[20]=c,c=e[28]-c,e[28]=c,c=e[25]-e[17],e[25]=c,c=e[21]-c,e[21]=c,c=e[29]-c,e[29]=c,c=e[17]-e[1],e[17]=c,c=e[9]-c,e[9]=c,c=e[25]-c,e[25]=c,c=e[5]-c,e[5]=c,c=e[21]-c,e[21]=c,c=e[13]-c,e[13]=c,c=e[29]-c,e[29]=c,c=e[1]-e[0],e[1]=c,c=e[16]-c,e[16]=c,c=e[17]-c,e[17]=c,c=e[8]-c,e[8]=c,c=e[9]-c,e[9]=c,c=e[24]-c,e[24]=c,c=e[25]-c,e[25]=c,c=e[4]-c,e[4]=c,c=e[5]-c,e[5]=c,c=e[20]-c,e[20]=c,c=e[21]-c,e[21]=c,c=e[12]-c,e[12]=c,c=e[13]-c,e[13]=c,c=e[28]-c,e[28]=c,c=e[29]-c,e[29]=c,c=e[0],e[0]+=e[31],e[31]-=c,c=e[1],e[1]+=e[30],e[30]-=c,c=e[16],e[16]+=e[15],e[15]-=c,c=e[17],e[17]+=e[14],e[14]-=c,c=e[8],e[8]+=e[23],e[23]-=c,c=e[9],e[9]+=e[22],e[22]-=c,c=e[24],e[24]+=e[7],e[7]-=c,c=e[25],e[25]+=e[6],e[6]-=c,c=e[4],e[4]+=e[27],e[27]-=c,c=e[5],e[5]+=e[26],e[26]-=c,c=e[20],e[20]+=e[11],e[11]-=c,c=e[21],e[21]+=e[10],e[10]-=c,c=e[12],e[12]+=e[19],e[19]-=c,c=e[13],e[13]+=e[18],e[18]-=c,c=e[28],e[28]+=e[3],e[3]-=c,c=e[29],e[29]+=e[2],e[2]-=c}}function n1(n,r){for(var e=0;e<3;e++){var m,x,b,S,d,F;S=n[r+6]*K[G.SHORT_TYPE][0]-n[r+15],m=n[r+0]*K[G.SHORT_TYPE][2]-n[r+9],x=S+m,b=S-m,S=n[r+15]*K[G.SHORT_TYPE][0]+n[r+6],m=n[r+9]*K[G.SHORT_TYPE][2]+n[r+0],d=S+m,F=-S+m,m=(n[r+3]*K[G.SHORT_TYPE][1]-n[r+12])*2069978111953089e-26,S=(n[r+12]*K[G.SHORT_TYPE][1]+n[r+3])*2069978111953089e-26,n[r+0]=x*190752519173728e-25+m,n[r+15]=-d*190752519173728e-25+S,b=b*.8660254037844387*1907525191737281e-26,d=d*.5*1907525191737281e-26+S,n[r+3]=b-d,n[r+6]=b+d,x=x*.5*1907525191737281e-26-m,F=F*.8660254037844387*1907525191737281e-26,n[r+9]=x+F,n[r+12]=x-F,r++}}function Z(n,r,e){var m,x;{var b,S,d,F,L,y,c,w;b=e[17]-e[9],d=e[15]-e[11],F=e[14]-e[12],L=e[0]+e[8],y=e[1]+e[7],c=e[2]+e[6],w=e[3]+e[5],n[r+17]=L+c-w-(y-e[4]),x=(L+c-w)*p[19]+(y-e[4]),m=(b-d-F)*p[18],n[r+5]=m+x,n[r+6]=m-x,S=(e[16]-e[10])*p[18],y=y*p[19]+e[4],m=b*p[12]+S+d*p[13]+F*p[14],x=-L*p[16]+y-c*p[17]+w*p[15],n[r+1]=m+x,n[r+2]=m-x,m=b*p[13]-S-d*p[14]+F*p[12],x=-L*p[17]+y-c*p[15]+w*p[16],n[r+9]=m+x,n[r+10]=m-x,m=b*p[14]-S+d*p[12]-F*p[13],x=L*p[15]-y+c*p[16]-w*p[17],n[r+13]=m+x,n[r+14]=m-x}{var g,M,X,P,E,z,A,_;g=e[8]-e[0],X=e[6]-e[2],P=e[5]-e[3],E=e[17]+e[9],z=e[16]+e[10],A=e[15]+e[11],_=e[14]+e[12],n[r+0]=E+A+_+(z+e[13]),m=(E+A+_)*p[19]-(z+e[13]),x=(g-X+P)*p[18],n[r+11]=m+x,n[r+12]=m-x,M=(e[7]-e[1])*p[18],z=e[13]-z*p[19],m=E*p[15]-z+A*p[16]+_*p[17],x=g*p[14]+M+X*p[12]+P*p[13],n[r+3]=m+x,n[r+4]=m-x,m=-E*p[17]+z-A*p[15]-_*p[16],x=g*p[13]+M-X*p[14]-P*p[12],n[r+7]=m+x,n[r+8]=m-x,m=-E*p[16]+z-A*p[17]-_*p[15],x=g*p[12]-M+X*p[13]-P*p[14],n[r+15]=m+x,n[r+16]=m-x}}this.mdct_sub48=function(n,r,e){for(var m=r,x=286,b=0;b<n.channels_out;b++){for(var S=0;S<n.mode_gr;S++){for(var d,F=n.l3_side.tt[S][b],L=F.xr,y=0,c=n.sb_sample[b][1-S],w=0,g=0;g<18/2;g++)for(j(m,x,c[w]),j(m,x+32,c[w+1]),w+=2,x+=64,d=1;d<32;d+=2)c[w-1][d]*=-1;for(d=0;d<32;d++,y+=18){var M=F.block_type,X=n.sb_sample[b][S],P=n.sb_sample[b][1-S];if(F.mixed_block_flag!=0&&d<2&&(M=0),n.amp_filter[d]<1e-12)$.fill(L,y+0,y+18,0);else{if(n.amp_filter[d]<1)for(var g=0;g<18;g++)P[g][U[d]]*=n.amp_filter[d];if(M==G.SHORT_TYPE){for(var g=-12/4;g<0;g++){var E=K[G.SHORT_TYPE][g+3];L[y+g*3+9]=X[9+g][U[d]]*E-X[8-g][U[d]],L[y+g*3+18]=X[14-g][U[d]]*E+X[15+g][U[d]],L[y+g*3+10]=X[15+g][U[d]]*E-X[14-g][U[d]],L[y+g*3+19]=P[2-g][U[d]]*E+P[3+g][U[d]],L[y+g*3+11]=P[3+g][U[d]]*E-P[2-g][U[d]],L[y+g*3+20]=P[8-g][U[d]]*E+P[9+g][U[d]]}n1(L,y)}else{for(var z=i1(18),g=-36/4;g<0;g++){var A,_;A=K[M][g+27]*P[g+9][U[d]]+K[M][g+36]*P[8-g][U[d]],_=K[M][g+9]*X[g+9][U[d]]-K[M][g+18]*X[8-g][U[d]],z[g+9]=A-_*h1[3+g+9],z[g+18]=A*h1[3+g+9]+_}Z(L,y,z)}}if(M!=G.SHORT_TYPE&&d!=0)for(var g=7;g>=0;--g){var s,a;s=L[y+g]*h[20+g]+L[y+-1-g]*J[28+g],a=L[y+g]*J[28+g]-L[y+-1-g]*h[20+g],L[y+-1-g]=s,L[y+g]=a}}}if(m=e,x=286,n.mode_gr==1)for(var i=0;i<18;i++)C.arraycopy(n.sb_sample[b][1][i],0,n.sb_sample[b][0][i],0,32)}}}return ma=W,ma}var da,Ga;function B0(){if(Ga)return da;Ga=1;var B=te(),C=Q1,D=C.System,$=C.new_float,i1=C.new_float_n;function G(){this.l=$(B.SBMAX_l),this.s=i1([B.SBMAX_s,3]);var W=this;this.assign=function(Y){D.arraycopy(Y.l,0,W.l,0,B.SBMAX_l);for(var K=0;K<B.SBMAX_s;K++)for(var h1=0;h1<3;h1++)W.s[K][h1]=Y.s[K][h1]}}return da=G,da}var va,Qa;function Z0(){if(Qa)return va;Qa=1;var B=B0();function C(){this.thm=new B,this.en=new B}return va=C,va}function ve(B){var C=B;this.ordinal=function(){return C}}ve.STEREO=new ve(0);ve.JOINT_STEREO=new ve(1);ve.DUAL_CHANNEL=new ve(2);ve.MONO=new ve(3);ve.NOT_SET=new ve(4);var Ke=ve,ga,za;function te(){if(za)return ga;za=1;var B=Q1,C=B.System,D=B.VbrMode,$=B.new_array_n,i1=B.new_float,G=B.new_float_n,W=B.new_int,Y=B.assert;K.ENCDELAY=576,K.POSTDELAY=1152,K.MDCTDELAY=48,K.FFTOFFSET=224+K.MDCTDELAY,K.DECDELAY=528,K.SBLIMIT=32,K.CBANDS=64,K.SBPSY_l=21,K.SBPSY_s=12,K.SBMAX_l=22,K.SBMAX_s=13,K.PSFB21=6,K.PSFB12=6,K.BLKSIZE=1024,K.HBLKSIZE=K.BLKSIZE/2+1,K.BLKSIZE_s=256,K.HBLKSIZE_s=K.BLKSIZE_s/2+1,K.NORM_TYPE=0,K.START_TYPE=1,K.SHORT_TYPE=2,K.STOP_TYPE=3,K.MPG_MD_LR_LR=0,K.MPG_MD_LR_I=1,K.MPG_MD_MS_LR=2,K.MPG_MD_MS_I=3,K.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function K(){var h1=F0(),p=Z0(),h=Ke,J=K.FFTOFFSET,U=K.MPG_MD_MS_LR,j=null;this.psy=null;var n1=null,Z=null,n=null;this.setModules=function(b,S,d,F){j=b,this.psy=S,n1=S,Z=F,n=d};var r=new h1;function e(b){var S,d;if(b.ATH.useAdjust==0){b.ATH.adjust=1;return}if(d=b.loudness_sq[0][0],S=b.loudness_sq[1][0],b.channels_out==2?(d+=b.loudness_sq[0][1],S+=b.loudness_sq[1][1]):(d+=d,S+=S),b.mode_gr==2&&(d=Math.max(d,S)),d*=.5,d*=b.ATH.aaSensitivityP,d>.03125)b.ATH.adjust>=1?b.ATH.adjust=1:b.ATH.adjust<b.ATH.adjustLimit&&(b.ATH.adjust=b.ATH.adjustLimit),b.ATH.adjustLimit=1;else{var F=31.98*d+625e-6;b.ATH.adjust>=F?(b.ATH.adjust*=F*.075+.925,b.ATH.adjust<F&&(b.ATH.adjust=F)):b.ATH.adjustLimit>=F?b.ATH.adjust=F:b.ATH.adjust<b.ATH.adjustLimit&&(b.ATH.adjust=b.ATH.adjustLimit),b.ATH.adjustLimit=F}}function m(b){var S,d;for(Y(0<=b.bitrate_index&&b.bitrate_index<16),Y(0<=b.mode_ext&&b.mode_ext<4),b.bitrate_stereoMode_Hist[b.bitrate_index][4]++,b.bitrate_stereoMode_Hist[15][4]++,b.channels_out==2&&(b.bitrate_stereoMode_Hist[b.bitrate_index][b.mode_ext]++,b.bitrate_stereoMode_Hist[15][b.mode_ext]++),S=0;S<b.mode_gr;++S)for(d=0;d<b.channels_out;++d){var F=b.l3_side.tt[S][d].block_type|0;b.l3_side.tt[S][d].mixed_block_flag!=0&&(F=4),b.bitrate_blockType_Hist[b.bitrate_index][F]++,b.bitrate_blockType_Hist[b.bitrate_index][5]++,b.bitrate_blockType_Hist[15][F]++,b.bitrate_blockType_Hist[15][5]++}}function x(b,S){var d=b.internal_flags,F,L;if(d.lame_encode_frame_init==0){var y,c,w=i1(2014),g=i1(2014);for(d.lame_encode_frame_init=1,y=0,c=0;y<286+576*(1+d.mode_gr);++y)y<576*d.mode_gr?(w[y]=0,d.channels_out==2&&(g[y]=0)):(w[y]=S[0][c],d.channels_out==2&&(g[y]=S[1][c]),++c);for(L=0;L<d.mode_gr;L++)for(F=0;F<d.channels_out;F++)d.l3_side.tt[L][F].block_type=K.SHORT_TYPE;r.mdct_sub48(d,w,g),Y(576>=K.FFTOFFSET),Y(d.mf_size>=K.BLKSIZE+b.framesize-K.FFTOFFSET),Y(d.mf_size>=512+b.framesize-32)}}this.lame_encode_mp3_frame=function(b,S,d,F,L,y){var c,w=$([2,2]);w[0][0]=new p,w[0][1]=new p,w[1][0]=new p,w[1][1]=new p;var g=$([2,2]);g[0][0]=new p,g[0][1]=new p,g[1][0]=new p,g[1][1]=new p;var M,X=[null,null],P=b.internal_flags,E=G([2,4]),z=[.5,.5],A=[[0,0],[0,0]],_=[[0,0],[0,0]],s,a,i;if(X[0]=S,X[1]=d,P.lame_encode_frame_init==0&&x(b,X),P.padding=0,(P.slot_lag-=P.frac_SpF)<0&&(P.slot_lag+=b.out_samplerate,P.padding=1),P.psymodel!=0){var u,O=[null,null],a1=0,T=W(2);for(i=0;i<P.mode_gr;i++){for(a=0;a<P.channels_out;a++)O[a]=X[a],a1=576+i*576-K.FFTOFFSET;if(b.VBR==D.vbr_mtrh||b.VBR==D.vbr_mt?u=n1.L3psycho_anal_vbr(b,O,a1,i,w,g,A[i],_[i],E[i],T):u=n1.L3psycho_anal_ns(b,O,a1,i,w,g,A[i],_[i],E[i],T),u!=0)return-4;for(b.mode==h.JOINT_STEREO&&(z[i]=E[i][2]+E[i][3],z[i]>0&&(z[i]=E[i][3]/z[i])),a=0;a<P.channels_out;a++){var H=P.l3_side.tt[i][a];H.block_type=T[a],H.mixed_block_flag=0}}}else for(i=0;i<P.mode_gr;i++)for(a=0;a<P.channels_out;a++)P.l3_side.tt[i][a].block_type=K.NORM_TYPE,P.l3_side.tt[i][a].mixed_block_flag=0,_[i][a]=A[i][a]=700;if(e(P),r.mdct_sub48(P,X[0],X[1]),P.mode_ext=K.MPG_MD_LR_LR,b.force_ms)P.mode_ext=K.MPG_MD_MS_LR;else if(b.mode==h.JOINT_STEREO){var _1=0,u1=0;for(i=0;i<P.mode_gr;i++)for(a=0;a<P.channels_out;a++)_1+=_[i][a],u1+=A[i][a];if(_1<=1*u1){var v1=P.l3_side.tt[0],w1=P.l3_side.tt[P.mode_gr-1];v1[0].block_type==v1[1].block_type&&w1[0].block_type==w1[1].block_type&&(P.mode_ext=K.MPG_MD_MS_LR)}}if(P.mode_ext==U?(M=g,s=_):(M=w,s=A),b.analysis&&P.pinfo!=null)for(i=0;i<P.mode_gr;i++)for(a=0;a<P.channels_out;a++)P.pinfo.ms_ratio[i]=P.ms_ratio[i],P.pinfo.ms_ener_ratio[i]=z[i],P.pinfo.blocktype[i][a]=P.l3_side.tt[i][a].block_type,P.pinfo.pe[i][a]=s[i][a],C.arraycopy(P.l3_side.tt[i][a].xr,0,P.pinfo.xr[i][a],0,576),P.mode_ext==U&&(P.pinfo.ers[i][a]=P.pinfo.ers[i][a+2],C.arraycopy(P.pinfo.energy[i][a+2],0,P.pinfo.energy[i][a],0,P.pinfo.energy[i][a].length));if(b.VBR==D.vbr_off||b.VBR==D.vbr_abr){var g1,M1;for(g1=0;g1<18;g1++)P.nsPsy.pefirbuf[g1]=P.nsPsy.pefirbuf[g1+1];for(M1=0,i=0;i<P.mode_gr;i++)for(a=0;a<P.channels_out;a++)M1+=s[i][a];for(P.nsPsy.pefirbuf[18]=M1,M1=P.nsPsy.pefirbuf[9],g1=0;g1<9;g1++)M1+=(P.nsPsy.pefirbuf[g1]+P.nsPsy.pefirbuf[18-g1])*K.fircoef[g1];for(M1=670*5*P.mode_gr*P.channels_out/M1,i=0;i<P.mode_gr;i++)for(a=0;a<P.channels_out;a++)s[i][a]*=M1}if(P.iteration_loop.iteration_loop(b,s,z,M),j.format_bitstream(b),c=j.copy_buffer(P,F,L,y,1),b.bWriteVbrTag&&Z.addVbrFrame(b),b.analysis&&P.pinfo!=null){for(a=0;a<P.channels_out;a++){var T1;for(T1=0;T1<J;T1++)P.pinfo.pcmdata[a][T1]=P.pinfo.pcmdata[a][T1+b.framesize];for(T1=J;T1<1600;T1++)P.pinfo.pcmdata[a][T1]=X[a][T1-J]}n.set_frame_pinfo(b,M)}return m(P),c}}return ga=K,ga}var T0=Q1,Wa=T0.Util,Ka=T0.new_float,U1=te();function G0(){var B=Ka(U1.BLKSIZE),C=Ka(U1.BLKSIZE_s/2),D=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function $(G,W,Y){var K=0,h1,p,h;Y<<=1;var J=W+Y;h1=4;do{var U,j,n1,Z,n,r,e;e=h1>>1,Z=h1,n=h1<<1,r=n+Z,h1=n<<1,p=W,h=p+e;do{var m,x,b,S;x=G[p+0]-G[p+Z],m=G[p+0]+G[p+Z],S=G[p+n]-G[p+r],b=G[p+n]+G[p+r],G[p+n]=m-b,G[p+0]=m+b,G[p+r]=x-S,G[p+Z]=x+S,x=G[h+0]-G[h+Z],m=G[h+0]+G[h+Z],S=Wa.SQRT2*G[h+r],b=Wa.SQRT2*G[h+n],G[h+n]=m-b,G[h+0]=m+b,G[h+r]=x-S,G[h+Z]=x+S,h+=h1,p+=h1}while(p<J);for(j=D[K+0],U=D[K+1],n1=1;n1<e;n1++){var d,F;d=1-2*U*U,F=2*U*j,p=W+n1,h=W+Z-n1;do{var L,y,c,m,x,w,b,g,S,M;y=F*G[p+Z]-d*G[h+Z],L=d*G[p+Z]+F*G[h+Z],x=G[p+0]-L,m=G[p+0]+L,w=G[h+0]-y,c=G[h+0]+y,y=F*G[p+r]-d*G[h+r],L=d*G[p+r]+F*G[h+r],S=G[p+n]-L,b=G[p+n]+L,M=G[h+n]-y,g=G[h+n]+y,y=U*b-j*M,L=j*b+U*M,G[p+n]=m-L,G[p+0]=m+L,G[h+r]=w-y,G[h+Z]=w+y,y=j*g-U*S,L=U*g+j*S,G[h+n]=c-L,G[h+0]=c+L,G[p+r]=x-y,G[p+Z]=x+y,h+=h1,p+=h1}while(p<J);d=j,j=d*D[K+0]-U*D[K+1],U=d*D[K+1]+U*D[K+0]}K+=2}while(h1<Y)}var i1=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(G,W,Y,K,h1){for(var p=0;p<3;p++){var h=U1.BLKSIZE_s/2,J=65535&576/3*(p+1),U=U1.BLKSIZE_s/8-1;do{var j,n1,Z,n,r,e=i1[U<<2]&255;j=C[e]*K[Y][h1+e+J],r=C[127-e]*K[Y][h1+e+J+128],n1=j-r,j=j+r,Z=C[e+64]*K[Y][h1+e+J+64],r=C[63-e]*K[Y][h1+e+J+192],n=Z-r,Z=Z+r,h-=4,W[p][h+0]=j+Z,W[p][h+2]=j-Z,W[p][h+1]=n1+n,W[p][h+3]=n1-n,j=C[e+1]*K[Y][h1+e+J+1],r=C[126-e]*K[Y][h1+e+J+129],n1=j-r,j=j+r,Z=C[e+65]*K[Y][h1+e+J+65],r=C[62-e]*K[Y][h1+e+J+193],n=Z-r,Z=Z+r,W[p][h+U1.BLKSIZE_s/2+0]=j+Z,W[p][h+U1.BLKSIZE_s/2+2]=j-Z,W[p][h+U1.BLKSIZE_s/2+1]=n1+n,W[p][h+U1.BLKSIZE_s/2+3]=n1-n}while(--U>=0);$(W[p],h,U1.BLKSIZE_s/2)}},this.fft_long=function(G,W,Y,K,h1){var p=U1.BLKSIZE/8-1,h=U1.BLKSIZE/2;do{var J,U,j,n1,Z,n=i1[p]&255;J=B[n]*K[Y][h1+n],Z=B[n+512]*K[Y][h1+n+512],U=J-Z,J=J+Z,j=B[n+256]*K[Y][h1+n+256],Z=B[n+768]*K[Y][h1+n+768],n1=j-Z,j=j+Z,h-=4,W[h+0]=J+j,W[h+2]=J-j,W[h+1]=U+n1,W[h+3]=U-n1,J=B[n+1]*K[Y][h1+n+1],Z=B[n+513]*K[Y][h1+n+513],U=J-Z,J=J+Z,j=B[n+257]*K[Y][h1+n+257],Z=B[n+769]*K[Y][h1+n+769],n1=j-Z,j=j+Z,W[h+U1.BLKSIZE/2+0]=J+j,W[h+U1.BLKSIZE/2+2]=J-j,W[h+U1.BLKSIZE/2+1]=U+n1,W[h+U1.BLKSIZE/2+3]=U-n1}while(--p>=0);$(W,h,U1.BLKSIZE/2)},this.init_fft=function(G){for(var W=0;W<U1.BLKSIZE;W++)B[W]=.42-.5*Math.cos(2*Math.PI*(W+.5)/U1.BLKSIZE)+.08*Math.cos(4*Math.PI*(W+.5)/U1.BLKSIZE);for(var W=0;W<U1.BLKSIZE_s/2;W++)C[W]=.5*(1-Math.cos(2*Math.PI*(W+.5)/U1.BLKSIZE_s))}}var Q0=G0,Be=Q1,De=Be.VbrMode,Ja=Be.Float,Ne=Be.ShortBlock,ne=Be.Util,z0=Be.Arrays,$1=Be.new_float,he=Be.new_float_n,ye=Be.new_int,N1=Be.assert,W0=Q0,r1=te();function K0(){var B=Ke,C=new W0,D=2.302585092994046,$=2,i1=16,G=2,W=16,Y=.34,K=1/(14752*14752)/(r1.BLKSIZE/2),h1=.01,p=.8,h=.6,J=.3,U=3.5,j=21,n1=.2302585093;function Z(l,f){for(var R=0,k=0;k<r1.BLKSIZE/2;++k)R+=l[k]*f.ATH.eql_w[k];return R*=K,R}function n(l,f,R,k,V,v,N,q,I,s1,Q){var t1=l.internal_flags;if(I<2)C.fft_long(t1,k[V],I,s1,Q),C.fft_short(t1,v[N],I,s1,Q);else if(I==2){for(var p1=r1.BLKSIZE-1;p1>=0;--p1){var x1=k[V+0][p1],o1=k[V+1][p1];k[V+0][p1]=(x1+o1)*ne.SQRT2*.5,k[V+1][p1]=(x1-o1)*ne.SQRT2*.5}for(var y1=2;y1>=0;--y1)for(var p1=r1.BLKSIZE_s-1;p1>=0;--p1){var x1=v[N+0][y1][p1],o1=v[N+1][y1][p1];v[N+0][y1][p1]=(x1+o1)*ne.SQRT2*.5,v[N+1][y1][p1]=(x1-o1)*ne.SQRT2*.5}}f[0]=k[V+0][0],f[0]*=f[0];for(var p1=r1.BLKSIZE/2-1;p1>=0;--p1){var e1=k[V+0][r1.BLKSIZE/2-p1],S1=k[V+0][r1.BLKSIZE/2+p1];f[r1.BLKSIZE/2-p1]=(e1*e1+S1*S1)*.5}for(var y1=2;y1>=0;--y1){R[y1][0]=v[N+0][y1][0],R[y1][0]*=R[y1][0];for(var p1=r1.BLKSIZE_s/2-1;p1>=0;--p1){var e1=v[N+0][y1][r1.BLKSIZE_s/2-p1],S1=v[N+0][y1][r1.BLKSIZE_s/2+p1];R[y1][r1.BLKSIZE_s/2-p1]=(e1*e1+S1*S1)*.5}}{for(var X1=0,p1=11;p1<r1.HBLKSIZE;p1++)X1+=f[p1];t1.tot_ener[I]=X1}if(l.analysis){for(var p1=0;p1<r1.HBLKSIZE;p1++)t1.pinfo.energy[q][I][p1]=t1.pinfo.energy_save[I][p1],t1.pinfo.energy_save[I][p1]=f[p1];t1.pinfo.pe[q][I]=t1.pe[I]}l.athaa_loudapprox==2&&I<2&&(t1.loudness_sq[q][I]=t1.loudness_sq_save[I],t1.loudness_sq_save[I]=Z(f,t1))}var r=8,e=23,m=15,x,b,S,d=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function F(){x=Math.pow(10,(r+1)/16),b=Math.pow(10,(e+1)/16),S=Math.pow(10,m/10)}var L=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],y=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],c=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function w(l,f,R,k,V,v){var N;if(f>l)if(f<l*b)N=f/l;else return l+f;else{if(l>=f*b)return l+f;N=l/f}if(l+=f,k+3<=6){if(N>=x)return l;var q=0|ne.FAST_LOG10_X(N,16);return l*y[q]}var q=0|ne.FAST_LOG10_X(N,16);if(f=V.ATH.cb_l[R]*V.ATH.adjust,l<S*f){if(l>f){var I,s1;return I=1,q<=13&&(I=c[q]),s1=ne.FAST_LOG10_X(l/f,10/15),l*((L[q]-I)*s1+I)}return q>13?l:l*c[q]}return l*L[q]}var g=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function M(l,f,R){var k;if(l<0&&(l=0),f<0&&(f=0),l<=0)return f;if(f<=0)return l;if(f>l?k=f/l:k=l/f,-2<=R&&R<=2){if(k>=x)return l+f;var V=0|ne.FAST_LOG10_X(k,16);return(l+f)*g[V]}return k<b?l+f:(l<f&&(l=f),l)}function X(l,f){var R=l.internal_flags;if(R.channels_out>1){for(var k=0;k<r1.SBMAX_l;k++){var V=R.thm[0].l[k],v=R.thm[1].l[k];R.thm[0].l[k]+=v*f,R.thm[1].l[k]+=V*f}for(var k=0;k<r1.SBMAX_s;k++)for(var N=0;N<3;N++){var V=R.thm[0].s[k][N],v=R.thm[1].s[k][N];R.thm[0].s[k][N]+=v*f,R.thm[1].s[k][N]+=V*f}}}function P(l){for(var f=0;f<r1.SBMAX_l;f++)if(!(l.thm[0].l[f]>1.58*l.thm[1].l[f]||l.thm[1].l[f]>1.58*l.thm[0].l[f])){var R=l.mld_l[f]*l.en[3].l[f],k=Math.max(l.thm[2].l[f],Math.min(l.thm[3].l[f],R));R=l.mld_l[f]*l.en[2].l[f];var V=Math.max(l.thm[3].l[f],Math.min(l.thm[2].l[f],R));l.thm[2].l[f]=k,l.thm[3].l[f]=V}for(var f=0;f<r1.SBMAX_s;f++)for(var v=0;v<3;v++)if(!(l.thm[0].s[f][v]>1.58*l.thm[1].s[f][v]||l.thm[1].s[f][v]>1.58*l.thm[0].s[f][v])){var R=l.mld_s[f]*l.en[3].s[f][v],k=Math.max(l.thm[2].s[f][v],Math.min(l.thm[3].s[f][v],R));R=l.mld_s[f]*l.en[2].s[f][v];var V=Math.max(l.thm[3].s[f][v],Math.min(l.thm[2].s[f][v],R));l.thm[2].s[f][v]=k,l.thm[3].s[f][v]=V}}function E(l,f,R){var k=f,V=Math.pow(10,R);f*=2,k*=2;for(var v=0;v<r1.SBMAX_l;v++){var N,q,I,s1;if(s1=l.ATH.cb_l[l.bm_l[v]]*V,N=Math.min(Math.max(l.thm[0].l[v],s1),Math.max(l.thm[1].l[v],s1)),q=Math.max(l.thm[2].l[v],s1),I=Math.max(l.thm[3].l[v],s1),N*f<q+I){var Q=N*k/(q+I);q*=Q,I*=Q}l.thm[2].l[v]=Math.min(q,l.thm[2].l[v]),l.thm[3].l[v]=Math.min(I,l.thm[3].l[v])}V*=r1.BLKSIZE_s/r1.BLKSIZE;for(var v=0;v<r1.SBMAX_s;v++)for(var t1=0;t1<3;t1++){var N,q,I,s1;if(s1=l.ATH.cb_s[l.bm_s[v]]*V,N=Math.min(Math.max(l.thm[0].s[v][t1],s1),Math.max(l.thm[1].s[v][t1],s1)),q=Math.max(l.thm[2].s[v][t1],s1),I=Math.max(l.thm[3].s[v][t1],s1),N*f<q+I){var Q=N*f/(q+I);q*=Q,I*=Q}l.thm[2].s[v][t1]=Math.min(l.thm[2].s[v][t1],q),l.thm[3].s[v][t1]=Math.min(l.thm[3].s[v][t1],I)}}function z(l,f,R,k,V){var v,N,q=0,I=0;for(v=N=0;v<r1.SBMAX_s;++N,++v){for(var s1=l.bo_s[v],Q=l.npart_s,t1=s1<Q?s1:Q;N<t1;)N1(f[N]>=0),N1(R[N]>=0),q+=f[N],I+=R[N],N++;if(l.en[k].s[v][V]=q,l.thm[k].s[v][V]=I,N>=Q){++v;break}N1(f[N]>=0),N1(R[N]>=0);{var p1=l.PSY.bo_s_weight[v],x1=1-p1;q=p1*f[N],I=p1*R[N],l.en[k].s[v][V]+=q,l.thm[k].s[v][V]+=I,q=x1*f[N],I=x1*R[N]}}for(;v<r1.SBMAX_s;++v)l.en[k].s[v][V]=0,l.thm[k].s[v][V]=0}function A(l,f,R,k){var V,v,N=0,q=0;for(V=v=0;V<r1.SBMAX_l;++v,++V){for(var I=l.bo_l[V],s1=l.npart_l,Q=I<s1?I:s1;v<Q;)N1(f[v]>=0),N1(R[v]>=0),N+=f[v],q+=R[v],v++;if(l.en[k].l[V]=N,l.thm[k].l[V]=q,v>=s1){++V;break}N1(f[v]>=0),N1(R[v]>=0);{var t1=l.PSY.bo_l_weight[V],p1=1-t1;N=t1*f[v],q=t1*R[v],l.en[k].l[V]+=N,l.thm[k].l[V]+=q,N=p1*f[v],q=p1*R[v]}}for(;V<r1.SBMAX_l;++V)l.en[k].l[V]=0,l.thm[k].l[V]=0}function _(l,f,R,k,V,v){var N=l.internal_flags,q,I;for(I=q=0;I<N.npart_s;++I){for(var s1=0,Q=N.numlines_s[I],t1=0;t1<Q;++t1,++q){var p1=f[v][q];s1+=p1}R[I]=s1}for(N1(I==N.npart_s),q=I=0;I<N.npart_s;I++){var x1=N.s3ind_s[I][0],o1=N.s3_ss[q++]*R[x1];for(++x1;x1<=N.s3ind_s[I][1];)o1+=N.s3_ss[q]*R[x1],++q,++x1;{var y1=G*N.nb_s1[V][I];k[I]=Math.min(o1,y1)}if(N.blocktype_old[V&1]==r1.SHORT_TYPE){var y1=W*N.nb_s2[V][I],e1=k[I];k[I]=Math.min(y1,e1)}N.nb_s2[V][I]=N.nb_s1[V][I],N.nb_s1[V][I]=o1,N1(k[I]>=0)}for(;I<=r1.CBANDS;++I)R[I]=0,k[I]=0}function s(l,f,R,k){var V=l.internal_flags;l.short_blocks==Ne.short_block_coupled&&!(f[0]!=0&&f[1]!=0)&&(f[0]=f[1]=0);for(var v=0;v<V.channels_out;v++)k[v]=r1.NORM_TYPE,l.short_blocks==Ne.short_block_dispensed&&(f[v]=1),l.short_blocks==Ne.short_block_forced&&(f[v]=0),f[v]!=0?(N1(V.blocktype_old[v]!=r1.START_TYPE),V.blocktype_old[v]==r1.SHORT_TYPE&&(k[v]=r1.STOP_TYPE)):(k[v]=r1.SHORT_TYPE,V.blocktype_old[v]==r1.NORM_TYPE&&(V.blocktype_old[v]=r1.START_TYPE),V.blocktype_old[v]==r1.STOP_TYPE&&(V.blocktype_old[v]=r1.SHORT_TYPE)),R[v]=V.blocktype_old[v],V.blocktype_old[v]=k[v]}function a(l,f,R){return R>=1?l:R<=0?f:f>0?Math.pow(l/f,R)*f:0}var i=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function u(l,f){for(var R=309.07,k=0;k<r1.SBMAX_s-1;k++)for(var V=0;V<3;V++){var v=l.thm.s[k][V];if(v>0){var N=v*f,q=l.en.s[k][V];q>N&&(q>N*1e10?R+=i[k]*(10*D):R+=i[k]*ne.FAST_LOG10(q/N))}}return R}var O=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function a1(l,f){for(var R=281.0575,k=0;k<r1.SBMAX_l-1;k++){var V=l.thm.l[k];if(V>0){var v=V*f,N=l.en.l[k];N>v&&(N>v*1e10?R+=O[k]*(10*D):R+=O[k]*ne.FAST_LOG10(N/v))}}return R}function T(l,f,R,k,V){var v,N;for(v=N=0;v<l.npart_l;++v){var q=0,I=0,s1;for(s1=0;s1<l.numlines_l[v];++s1,++N){var Q=f[N];q+=Q,I<Q&&(I=Q)}R[v]=q,k[v]=I,V[v]=q*l.rnumlines_l[v],N1(l.rnumlines_l[v]>=0),N1(R[v]>=0),N1(k[v]>=0),N1(V[v]>=0)}}function H(l,f,R,k){var V=d.length-1,v=0,N=R[v]+R[v+1];if(N>0){var q=f[v];q<f[v+1]&&(q=f[v+1]),N1(l.numlines_l[v]+l.numlines_l[v+1]-1>0),N=20*(q*2-N)/(N*(l.numlines_l[v]+l.numlines_l[v+1]-1));var I=0|N;I>V&&(I=V),k[v]=I}else k[v]=0;for(v=1;v<l.npart_l-1;v++)if(N=R[v-1]+R[v]+R[v+1],N>0){var q=f[v-1];q<f[v]&&(q=f[v]),q<f[v+1]&&(q=f[v+1]),N1(l.numlines_l[v-1]+l.numlines_l[v]+l.numlines_l[v+1]-1>0),N=20*(q*3-N)/(N*(l.numlines_l[v-1]+l.numlines_l[v]+l.numlines_l[v+1]-1));var I=0|N;I>V&&(I=V),k[v]=I}else k[v]=0;if(N1(v==l.npart_l-1),N=R[v-1]+R[v],N>0){var q=f[v-1];q<f[v]&&(q=f[v]),N1(l.numlines_l[v-1]+l.numlines_l[v]-1>0),N=20*(q*2-N)/(N*(l.numlines_l[v-1]+l.numlines_l[v]-1));var I=0|N;I>V&&(I=V),k[v]=I}else k[v]=0;N1(v==l.npart_l-1)}var _1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(l,f,R,k,V,v,N,q,I,s1){var Q=l.internal_flags,t1=he([2,r1.BLKSIZE]),p1=he([2,3,r1.BLKSIZE_s]),x1=$1(r1.CBANDS+1),o1=$1(r1.CBANDS+1),y1=$1(r1.CBANDS+2),e1=ye(2),S1=ye(2),X1,l1,A1,f1,I1,q1,m1,D1,O1=he([2,576]),F1,oe=ye(r1.CBANDS+2),J1=ye(r1.CBANDS+2);for(z0.fill(J1,0),X1=Q.channels_out,l.mode==B.JOINT_STEREO&&(X1=4),l.VBR==De.vbr_off?F1=Q.ResvMax==0?0:Q.ResvSize/Q.ResvMax*.5:l.VBR==De.vbr_rh||l.VBR==De.vbr_mtrh||l.VBR==De.vbr_mt?F1=.6:F1=1,l1=0;l1<Q.channels_out;l1++){var Z1=f[l1],se=R+576-350-j+192;for(f1=0;f1<576;f1++){var le,fe;for(le=Z1[se+f1+10],fe=0,I1=0;I1<(j-1)/2-1;I1+=2)le+=_1[I1]*(Z1[se+f1+I1]+Z1[se+f1+j-I1]),fe+=_1[I1+1]*(Z1[se+f1+I1+1]+Z1[se+f1+j-I1-1]);O1[l1][f1]=le+fe}V[k][l1].en.assign(Q.en[l1]),V[k][l1].thm.assign(Q.thm[l1]),X1>2&&(v[k][l1].en.assign(Q.en[l1+2]),v[k][l1].thm.assign(Q.thm[l1+2]))}for(l1=0;l1<X1;l1++){var be,me,ae=$1(12),ge=[0,0,0,0],Le=$1(12),oa=1,Ha,Ya=$1(r1.CBANDS),Ca=$1(r1.CBANDS),G1=[0,0,0,0],ja=$1(r1.HBLKSIZE),qa=he([3,r1.HBLKSIZE_s]);for(N1(Q.npart_s<=r1.CBANDS),N1(Q.npart_l<=r1.CBANDS),f1=0;f1<3;f1++)ae[f1]=Q.nsPsy.last_en_subshort[l1][f1+6],N1(Q.nsPsy.last_en_subshort[l1][f1+4]>0),Le[f1]=ae[f1]/Q.nsPsy.last_en_subshort[l1][f1+4],ge[0]+=ae[f1];if(l1==2)for(f1=0;f1<576;f1++){var la,fa;la=O1[0][f1],fa=O1[1][f1],O1[0][f1]=la+fa,O1[1][f1]=la-fa}{var Fa=O1[l1&1],je=0;for(f1=0;f1<9;f1++){for(var H0=je+64,ee=1;je<H0;je++)ee<Math.abs(Fa[je])&&(ee=Math.abs(Fa[je]));Q.nsPsy.last_en_subshort[l1][f1]=ae[f1+3]=ee,ge[1+f1/3]+=ee,ee>ae[f1+3-2]?(N1(ae[f1+3-2]>0),ee=ee/ae[f1+3-2]):ae[f1+3-2]>ee*10?ee=ae[f1+3-2]/(ee*10):ee=0,Le[f1+3]=ee}}if(l.analysis){var ca=Le[0];for(f1=1;f1<12;f1++)ca<Le[f1]&&(ca=Le[f1]);Q.pinfo.ers[k][l1]=Q.pinfo.ers_save[l1],Q.pinfo.ers_save[l1]=ca}for(Ha=l1==3?Q.nsPsy.attackthre_s:Q.nsPsy.attackthre,f1=0;f1<12;f1++)G1[f1/3]==0&&Le[f1]>Ha&&(G1[f1/3]=f1%3+1);for(f1=1;f1<4;f1++){var ua;ge[f1-1]>ge[f1]?(N1(ge[f1]>0),ua=ge[f1-1]/ge[f1]):(N1(ge[f1-1]>0),ua=ge[f1]/ge[f1-1]),ua<1.7&&(G1[f1]=0,f1==1&&(G1[0]=0))}for(G1[0]!=0&&Q.nsPsy.lastAttacks[l1]!=0&&(G1[0]=0),(Q.nsPsy.lastAttacks[l1]==3||G1[0]+G1[1]+G1[2]+G1[3]!=0)&&(oa=0,G1[1]!=0&&G1[0]!=0&&(G1[1]=0),G1[2]!=0&&G1[1]!=0&&(G1[2]=0),G1[3]!=0&&G1[2]!=0&&(G1[3]=0)),l1<2?S1[l1]=oa:oa==0&&(S1[0]=S1[1]=0),I[l1]=Q.tot_ener[l1],me=p1,be=t1,n(l,ja,qa,be,l1&1,me,l1&1,k,l1,f,R),T(Q,ja,x1,Ya,Ca),H(Q,Ya,Ca,oe),D1=0;D1<3;D1++){var ha,re;for(_(l,qa,o1,y1,l1,D1),z(Q,o1,y1,l1,D1),m1=0;m1<r1.SBMAX_s;m1++){if(re=Q.thm[l1].s[m1][D1],re*=p,G1[D1]>=2||G1[D1+1]==1){var qe=D1!=0?D1-1:2,ee=a(Q.thm[l1].s[m1][qe],re,h*F1);re=Math.min(re,ee)}if(G1[D1]==1){var qe=D1!=0?D1-1:2,ee=a(Q.thm[l1].s[m1][qe],re,J*F1);re=Math.min(re,ee)}else if(D1!=0&&G1[D1-1]==3||D1==0&&Q.nsPsy.lastAttacks[l1]==3){var qe=D1!=2?D1+1:0,ee=a(Q.thm[l1].s[m1][qe],re,J*F1);re=Math.min(re,ee)}ha=ae[D1*3+3]+ae[D1*3+4]+ae[D1*3+5],ae[D1*3+5]*6<ha&&(re*=.5,ae[D1*3+4]*6<ha&&(re*=.5)),Q.thm[l1].s[m1][D1]=re}}for(Q.nsPsy.lastAttacks[l1]=G1[2],q1=0,A1=0;A1<Q.npart_l;A1++){for(var ke=Q.s3ind[A1][0],pa=x1[ke]*d[oe[ke]],Ee=Q.s3_ll[q1++]*pa;++ke<=Q.s3ind[A1][1];)pa=x1[ke]*d[oe[ke]],Ee=w(Ee,Q.s3_ll[q1++]*pa,ke,ke-A1,Q);Ee*=.158489319246111,Q.blocktype_old[l1&1]==r1.SHORT_TYPE?y1[A1]=Ee:y1[A1]=a(Math.min(Ee,Math.min($*Q.nb_1[l1][A1],i1*Q.nb_2[l1][A1])),Ee,F1),Q.nb_2[l1][A1]=Q.nb_1[l1][A1],Q.nb_1[l1][A1]=Ee}for(;A1<=r1.CBANDS;++A1)x1[A1]=0,y1[A1]=0;A(Q,x1,y1,l1)}if((l.mode==B.STEREO||l.mode==B.JOINT_STEREO)&&l.interChRatio>0&&X(l,l.interChRatio),l.mode==B.JOINT_STEREO){var ba;P(Q),ba=l.msfix,Math.abs(ba)>0&&E(Q,ba,l.ATHlower*Q.ATH.adjust)}for(s(l,S1,s1,e1),l1=0;l1<X1;l1++){var Fe,Ze=0,Je,Ue;l1>1?(Fe=q,Ze=-2,Je=r1.NORM_TYPE,(s1[0]==r1.SHORT_TYPE||s1[1]==r1.SHORT_TYPE)&&(Je=r1.SHORT_TYPE),Ue=v[k][l1-2]):(Fe=N,Ze=0,Je=s1[l1],Ue=V[k][l1]),Je==r1.SHORT_TYPE?Fe[Ze+l1]=u(Ue,Q.masking_lower):Fe[Ze+l1]=a1(Ue,Q.masking_lower),l.analysis&&(Q.pinfo.pe[k][l1]=Fe[Ze+l1])}return 0};function u1(l,f,R,k,V,v,N,q){var I=l.internal_flags;if(k<2)C.fft_long(I,N[q],k,f,R);else if(k==2)for(var s1=r1.BLKSIZE-1;s1>=0;--s1){var Q=N[q+0][s1],t1=N[q+1][s1];N[q+0][s1]=(Q+t1)*ne.SQRT2*.5,N[q+1][s1]=(Q-t1)*ne.SQRT2*.5}v[0]=N[q+0][0],v[0]*=v[0];for(var s1=r1.BLKSIZE/2-1;s1>=0;--s1){var p1=N[q+0][r1.BLKSIZE/2-s1],x1=N[q+0][r1.BLKSIZE/2+s1];v[r1.BLKSIZE/2-s1]=(p1*p1+x1*x1)*.5}{for(var o1=0,s1=11;s1<r1.HBLKSIZE;s1++)o1+=v[s1];I.tot_ener[k]=o1}if(l.analysis){for(var s1=0;s1<r1.HBLKSIZE;s1++)I.pinfo.energy[V][k][s1]=I.pinfo.energy_save[k][s1],I.pinfo.energy_save[k][s1]=v[s1];I.pinfo.pe[V][k]=I.pe[k]}}function v1(l,f,R,k,V,v,N,q){var I=l.internal_flags;if(V==0&&k<2&&C.fft_short(I,N[q],k,f,R),k==2)for(var s1=r1.BLKSIZE_s-1;s1>=0;--s1){var Q=N[q+0][V][s1],t1=N[q+1][V][s1];N[q+0][V][s1]=(Q+t1)*ne.SQRT2*.5,N[q+1][V][s1]=(Q-t1)*ne.SQRT2*.5}v[V][0]=N[q+0][V][0],v[V][0]*=v[V][0];for(var s1=r1.BLKSIZE_s/2-1;s1>=0;--s1){var p1=N[q+0][V][r1.BLKSIZE_s/2-s1],x1=N[q+0][V][r1.BLKSIZE_s/2+s1];v[V][r1.BLKSIZE_s/2-s1]=(p1*p1+x1*x1)*.5}}function w1(l,f,R,k){var V=l.internal_flags;l.athaa_loudapprox==2&&R<2&&(V.loudness_sq[f][R]=V.loudness_sq_save[R],V.loudness_sq_save[R]=Z(k,V))}var g1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function M1(l,f,R,k,V,v,N,q,I,s1){for(var Q=he([2,576]),t1=l.internal_flags,p1=t1.channels_out,x1=l.mode==B.JOINT_STEREO?4:p1,o1=0;o1<p1;o1++){firbuf=f[o1];for(var y1=R+576-350-j+192,e1=0;e1<576;e1++){var S1,X1;S1=firbuf[y1+e1+10],X1=0;for(var l1=0;l1<(j-1)/2-1;l1+=2)S1+=g1[l1]*(firbuf[y1+e1+l1]+firbuf[y1+e1+j-l1]),X1+=g1[l1+1]*(firbuf[y1+e1+l1+1]+firbuf[y1+e1+j-l1-1]);Q[o1][e1]=S1+X1}V[k][o1].en.assign(t1.en[o1]),V[k][o1].thm.assign(t1.thm[o1]),x1>2&&(v[k][o1].en.assign(t1.en[o1+2]),v[k][o1].thm.assign(t1.thm[o1+2]))}for(var o1=0;o1<x1;o1++){var A1=$1(12),f1=$1(12),I1=[0,0,0,0],q1=Q[o1&1],m1=0,D1=o1==3?t1.nsPsy.attackthre_s:t1.nsPsy.attackthre,O1=1;if(o1==2)for(var e1=0,l1=576;l1>0;++e1,--l1){var F1=Q[0][e1],oe=Q[1][e1];Q[0][e1]=F1+oe,Q[1][e1]=F1-oe}for(var e1=0;e1<3;e1++)f1[e1]=t1.nsPsy.last_en_subshort[o1][e1+6],N1(t1.nsPsy.last_en_subshort[o1][e1+4]>0),A1[e1]=f1[e1]/t1.nsPsy.last_en_subshort[o1][e1+4],I1[0]+=f1[e1];for(var e1=0;e1<9;e1++){for(var J1=m1+64,Z1=1;m1<J1;m1++)Z1<Math.abs(q1[m1])&&(Z1=Math.abs(q1[m1]));t1.nsPsy.last_en_subshort[o1][e1]=f1[e1+3]=Z1,I1[1+e1/3]+=Z1,Z1>f1[e1+3-2]?(N1(f1[e1+3-2]>0),Z1=Z1/f1[e1+3-2]):f1[e1+3-2]>Z1*10?Z1=f1[e1+3-2]/(Z1*10):Z1=0,A1[e1+3]=Z1}for(var e1=0;e1<3;++e1){var se=f1[e1*3+3]+f1[e1*3+4]+f1[e1*3+5],le=1;f1[e1*3+5]*6<se&&(le*=.5,f1[e1*3+4]*6<se&&(le*=.5)),q[o1][e1]=le}if(l.analysis){for(var fe=A1[0],e1=1;e1<12;e1++)fe<A1[e1]&&(fe=A1[e1]);t1.pinfo.ers[k][o1]=t1.pinfo.ers_save[o1],t1.pinfo.ers_save[o1]=fe}for(var e1=0;e1<12;e1++)I[o1][e1/3]==0&&A1[e1]>D1&&(I[o1][e1/3]=e1%3+1);for(var e1=1;e1<4;e1++){var be=I1[e1-1],me=I1[e1],ae=Math.max(be,me);ae<4e4&&be<1.7*me&&me<1.7*be&&(e1==1&&I[o1][0]<=I[o1][e1]&&(I[o1][0]=0),I[o1][e1]=0)}I[o1][0]<=t1.nsPsy.lastAttacks[o1]&&(I[o1][0]=0),(t1.nsPsy.lastAttacks[o1]==3||I[o1][0]+I[o1][1]+I[o1][2]+I[o1][3]!=0)&&(O1=0,I[o1][1]!=0&&I[o1][0]!=0&&(I[o1][1]=0),I[o1][2]!=0&&I[o1][1]!=0&&(I[o1][2]=0),I[o1][3]!=0&&I[o1][2]!=0&&(I[o1][3]=0)),o1<2?s1[o1]=O1:O1==0&&(s1[0]=s1[1]=0),N[o1]=t1.tot_ener[o1]}}function T1(l,f,R){if(R==0)for(var k=0;k<l.npart_s;k++)l.nb_s2[f][k]=l.nb_s1[f][k],l.nb_s1[f][k]=0}function j1(l,f){for(var R=0;R<l.npart_l;R++)l.nb_2[f][R]=l.nb_1[f][R],l.nb_1[f][R]=0}function ue(l,f,R,k){var V=d.length-1,v=0,N=R[v]+R[v+1];if(N>0){var q=f[v];q<f[v+1]&&(q=f[v+1]),N1(l.numlines_s[v]+l.numlines_s[v+1]-1>0),N=20*(q*2-N)/(N*(l.numlines_s[v]+l.numlines_s[v+1]-1));var I=0|N;I>V&&(I=V),k[v]=I}else k[v]=0;for(v=1;v<l.npart_s-1;v++)if(N=R[v-1]+R[v]+R[v+1],N1(v+1<l.npart_s),N>0){var q=f[v-1];q<f[v]&&(q=f[v]),q<f[v+1]&&(q=f[v+1]),N1(l.numlines_s[v-1]+l.numlines_s[v]+l.numlines_s[v+1]-1>0),N=20*(q*3-N)/(N*(l.numlines_s[v-1]+l.numlines_s[v]+l.numlines_s[v+1]-1));var I=0|N;I>V&&(I=V),k[v]=I}else k[v]=0;if(N1(v==l.npart_s-1),N=R[v-1]+R[v],N>0){var q=f[v-1];q<f[v]&&(q=f[v]),N1(l.numlines_s[v-1]+l.numlines_s[v]-1>0),N=20*(q*2-N)/(N*(l.numlines_s[v-1]+l.numlines_s[v]-1));var I=0|N;I>V&&(I=V),k[v]=I}else k[v]=0;N1(v==l.npart_s-1)}function t(l,f,R,k,V,v){var N=l.internal_flags,q=new float[r1.CBANDS],I=$1(r1.CBANDS),s1,Q,t1,p1=new int[r1.CBANDS];for(t1=Q=0;t1<N.npart_s;++t1){var x1=0,o1=0,y1=N.numlines_s[t1];for(s1=0;s1<y1;++s1,++Q){var e1=f[v][Q];x1+=e1,o1<e1&&(o1=e1)}R[t1]=x1,q[t1]=o1,I[t1]=x1/y1,N1(I[t1]>=0)}for(N1(t1==N.npart_s);t1<r1.CBANDS;++t1)q[t1]=0,I[t1]=0;for(ue(N,q,I,p1),Q=t1=0;t1<N.npart_s;t1++){var S1=N.s3ind_s[t1][0],X1=N.s3ind_s[t1][1],l1,A1,f1,I1,q1;for(l1=p1[S1],A1=1,I1=N.s3_ss[Q]*R[S1]*d[p1[S1]],++Q,++S1;S1<=X1;)l1+=p1[S1],A1+=1,f1=N.s3_ss[Q]*R[S1]*d[p1[S1]],I1=M(I1,f1,S1-t1),++Q,++S1;l1=(1+2*l1)/(2*A1),q1=d[l1]*.5,I1*=q1,k[t1]=I1,N.nb_s2[V][t1]=N.nb_s1[V][t1],N.nb_s1[V][t1]=I1,f1=q[t1],f1*=N.minval_s[t1],f1*=q1,k[t1]>f1&&(k[t1]=f1),N.masking_lower>1&&(k[t1]*=N.masking_lower),k[t1]>R[t1]&&(k[t1]=R[t1]),N.masking_lower<1&&(k[t1]*=N.masking_lower),N1(k[t1]>=0)}for(;t1<r1.CBANDS;++t1)R[t1]=0,k[t1]=0}function o(l,f,R,k,V){var v=$1(r1.CBANDS),N=$1(r1.CBANDS),q=ye(r1.CBANDS+2),I;T(l,f,R,v,N),H(l,v,N,q);var s1=0;for(I=0;I<l.npart_l;I++){var Q,t1,p1,x1,o1=l.s3ind[I][0],y1=l.s3ind[I][1],e1=0,S1=0;for(e1=q[o1],S1+=1,t1=l.s3_ll[s1]*R[o1]*d[q[o1]],++s1,++o1;o1<=y1;)e1+=q[o1],S1+=1,Q=l.s3_ll[s1]*R[o1]*d[q[o1]],x1=M(t1,Q,o1-I),t1=x1,++s1,++o1;if(e1=(1+2*e1)/(2*S1),p1=d[e1]*.5,t1*=p1,l.blocktype_old[V&1]==r1.SHORT_TYPE){var X1=$*l.nb_1[V][I];X1>0?k[I]=Math.min(t1,X1):k[I]=Math.min(t1,R[I]*J)}else{var l1=i1*l.nb_2[V][I],A1=$*l.nb_1[V][I],X1;l1<=0&&(l1=t1),A1<=0&&(A1=t1),l.blocktype_old[V&1]==r1.NORM_TYPE?X1=Math.min(A1,l1):X1=A1,k[I]=Math.min(t1,X1)}l.nb_2[V][I]=l.nb_1[V][I],l.nb_1[V][I]=t1,Q=v[I],Q*=l.minval_l[I],Q*=p1,k[I]>Q&&(k[I]=Q),l.masking_lower>1&&(k[I]*=l.masking_lower),k[I]>R[I]&&(k[I]=R[I]),l.masking_lower<1&&(k[I]*=l.masking_lower),N1(k[I]>=0)}for(;I<r1.CBANDS;++I)R[I]=0,k[I]=0}function d1(l,f){var R=l.internal_flags;l.short_blocks==Ne.short_block_coupled&&!(f[0]!=0&&f[1]!=0)&&(f[0]=f[1]=0);for(var k=0;k<R.channels_out;k++)l.short_blocks==Ne.short_block_dispensed&&(f[k]=1),l.short_blocks==Ne.short_block_forced&&(f[k]=0)}function R1(l,f,R){for(var k=l.internal_flags,V=0;V<k.channels_out;V++){var v=r1.NORM_TYPE;f[V]!=0?(N1(k.blocktype_old[V]!=r1.START_TYPE),k.blocktype_old[V]==r1.SHORT_TYPE&&(v=r1.STOP_TYPE)):(v=r1.SHORT_TYPE,k.blocktype_old[V]==r1.NORM_TYPE&&(k.blocktype_old[V]=r1.START_TYPE),k.blocktype_old[V]==r1.STOP_TYPE&&(k.blocktype_old[V]=r1.SHORT_TYPE)),R[V]=k.blocktype_old[V],k.blocktype_old[V]=v}}function V1(l,f,R,k,V,v,N){for(var q=v*2,I=v>0?Math.pow(10,V):1,s1,Q,t1=0;t1<N;++t1){var p1=l[2][t1],x1=l[3][t1],o1=f[0][t1],y1=f[1][t1],e1=f[2][t1],S1=f[3][t1];if(o1<=1.58*y1&&y1<=1.58*o1){var X1=R[t1]*x1,l1=R[t1]*p1;Q=Math.max(e1,Math.min(S1,X1)),s1=Math.max(S1,Math.min(e1,l1))}else Q=e1,s1=S1;if(v>0){var A1,f1,I1=k[t1]*I;if(A1=Math.min(Math.max(o1,I1),Math.max(y1,I1)),e1=Math.max(Q,I1),S1=Math.max(s1,I1),f1=e1+S1,f1>0&&A1*q<f1){var q1=A1*q/f1;e1*=q1,S1*=q1}Q=Math.min(e1,Q),s1=Math.min(S1,s1)}Q>p1&&(Q=p1),s1>x1&&(s1=x1),f[2][t1]=Q,f[3][t1]=s1}}this.L3psycho_anal_vbr=function(l,f,R,k,V,v,N,q,I,s1){var Q=l.internal_flags,t1,p1,x1=$1(r1.HBLKSIZE),o1=he([3,r1.HBLKSIZE_s]),y1=he([2,r1.BLKSIZE]),e1=he([2,3,r1.BLKSIZE_s]),S1=he([4,r1.CBANDS]),X1=he([4,r1.CBANDS]),l1=he([4,3]),A1=.6,f1=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],I1=ye(2),q1=l.mode==B.JOINT_STEREO?4:Q.channels_out;M1(l,f,R,k,V,v,I,l1,f1,I1),d1(l,I1);{for(var m1=0;m1<q1;m1++){var D1=m1&1;t1=y1,u1(l,f,R,m1,k,x1,t1,D1),w1(l,k,m1,x1),I1[D1]!=0?o(Q,x1,S1[m1],X1[m1],m1):j1(Q,m1)}I1[0]+I1[1]==2&&l.mode==B.JOINT_STEREO&&V1(S1,X1,Q.mld_cb_l,Q.ATH.cb_l,l.ATHlower*Q.ATH.adjust,l.msfix,Q.npart_l);for(var m1=0;m1<q1;m1++){var D1=m1&1;I1[D1]!=0&&A(Q,S1[m1],X1[m1],m1)}}{for(var O1=0;O1<3;O1++){for(var m1=0;m1<q1;++m1){var D1=m1&1;I1[D1]!=0?T1(Q,m1,O1):(p1=e1,v1(l,f,R,m1,O1,o1,p1,D1),t(l,o1,S1[m1],X1[m1],m1,O1))}I1[0]+I1[1]==0&&l.mode==B.JOINT_STEREO&&V1(S1,X1,Q.mld_cb_s,Q.ATH.cb_s,l.ATHlower*Q.ATH.adjust,l.msfix,Q.npart_s);for(var m1=0;m1<q1;++m1){var D1=m1&1;I1[D1]==0&&z(Q,S1[m1],X1[m1],m1,O1)}}for(var m1=0;m1<q1;m1++){var D1=m1&1;if(I1[D1]==0)for(var F1=0;F1<r1.SBMAX_s;F1++){for(var oe=$1(3),O1=0;O1<3;O1++){var J1=Q.thm[m1].s[F1][O1];if(J1*=p,f1[m1][O1]>=2||f1[m1][O1+1]==1){var Z1=O1!=0?O1-1:2,se=a(Q.thm[m1].s[F1][Z1],J1,h*A1);J1=Math.min(J1,se)}else if(f1[m1][O1]==1){var Z1=O1!=0?O1-1:2,se=a(Q.thm[m1].s[F1][Z1],J1,J*A1);J1=Math.min(J1,se)}else if(O1!=0&&f1[m1][O1-1]==3||O1==0&&Q.nsPsy.lastAttacks[m1]==3){var Z1=O1!=2?O1+1:0,se=a(Q.thm[m1].s[F1][Z1],J1,J*A1);J1=Math.min(J1,se)}J1*=l1[m1][O1],oe[O1]=J1}for(var O1=0;O1<3;O1++)Q.thm[m1].s[F1][O1]=oe[O1]}}}for(var m1=0;m1<q1;m1++)Q.nsPsy.lastAttacks[m1]=f1[m1][2];R1(l,I1,s1);for(var m1=0;m1<q1;m1++){var le,fe,be,me;m1>1?(le=q,fe=-2,be=r1.NORM_TYPE,(s1[0]==r1.SHORT_TYPE||s1[1]==r1.SHORT_TYPE)&&(be=r1.SHORT_TYPE),me=v[k][m1-2]):(le=N,fe=0,be=s1[m1],me=V[k][m1]),be==r1.SHORT_TYPE?le[fe+m1]=u(me,Q.masking_lower):le[fe+m1]=a1(me,Q.masking_lower),l.analysis&&(Q.pinfo.pe[k][m1]=le[fe+m1])}return 0};function E1(l,f){var R=l,k;return R>=0?k=-R*27:k=R*f,k<=-72?0:Math.exp(k*n1)}function k1(l){var f=0,R=0;{var k=0,V,v;for(k=0;E1(k,l)>1e-20;k-=1);for(V=k,v=0;Math.abs(v-V)>1e-12;)k=(v+V)/2,E1(k,l)>0?v=k:V=k;f=V}{var k=0,V,v;for(k=0;E1(k,l)>1e-20;k+=1);for(V=0,v=k;Math.abs(v-V)>1e-12;)k=(v+V)/2,E1(k,l)>0?V=k:v=k;R=v}{var N=0,q=1e3,I;for(I=0;I<=q;++I){var k=f+I*(R-f)/q,s1=E1(k,l);N+=s1}{var Q=(q+1)/(N*(R-f));return Q}}}function B1(l){var f,R,k,V;return f=l,f>=0?f*=3:f*=1.5,f>=.5&&f<=2.5?(V=f-.5,R=8*(V*V-2*V)):R=0,f+=.474,k=15.811389+7.5*f-17.5*Math.sqrt(1+f*f),k<=-60?0:(f=Math.exp((R+k)*n1),f/=.6609193,f)}function L1(l){return l<0&&(l=0),l=l*.001,13*Math.atan(.76*l)+3.5*Math.atan(l*l/(7.5*7.5))}function P1(l,f,R,k,V,v,N,q,I,s1,Q,t1){var p1=$1(r1.CBANDS+1),x1=q/(t1>15?2*576:384),o1=ye(r1.HBLKSIZE),y1;q/=I;var e1=0,S1=0;for(y1=0;y1<r1.CBANDS;y1++){var X1,l1;for(X1=L1(q*e1),p1[y1]=q*e1,l1=e1;L1(q*l1)-X1<Y&&l1<=I/2;l1++);for(l[y1]=l1-e1,S1=y1+1;e1<l1;)N1(e1<r1.HBLKSIZE),o1[e1++]=y1;if(e1>I/2){e1=I/2,++y1;break}}N1(y1<r1.CBANDS),p1[y1]=q*e1;for(var A1=0;A1<t1;A1++){var f1,I1,q1,m1,D1;q1=s1[A1],m1=s1[A1+1],f1=0|Math.floor(.5+Q*(q1-.5)),f1<0&&(f1=0),I1=0|Math.floor(.5+Q*(m1-.5)),I1>I/2&&(I1=I/2),R[A1]=(o1[f1]+o1[I1])/2,f[A1]=o1[I1];var O1=x1*m1;N[A1]=(O1-p1[f[A1]])/(p1[f[A1]+1]-p1[f[A1]]),N[A1]<0?N[A1]=0:N[A1]>1&&(N[A1]=1),D1=L1(q*s1[A1]*Q),D1=Math.min(D1,15.5)/15.5,v[A1]=Math.pow(10,1.25*(1-Math.cos(Math.PI*D1))-2.5)}e1=0;for(var F1=0;F1<S1;F1++){var oe=l[F1],X1,J1;X1=L1(q*e1),J1=L1(q*(e1+oe-1)),k[F1]=.5*(X1+J1),X1=L1(q*(e1-.5)),J1=L1(q*(e1+oe-.5)),V[F1]=J1-X1,e1+=oe}return S1}function b1(l,f,R,k,V,v){var N=he([r1.CBANDS,r1.CBANDS]),q,I=0;if(v)for(var s1=0;s1<f;s1++)for(q=0;q<f;q++){var Q=B1(R[s1]-R[q])*k[q];N[s1][q]=Q*V[s1]}else for(q=0;q<f;q++)for(var t1=15+Math.min(21/R[q],12),p1=k1(t1),s1=0;s1<f;s1++){var Q=p1*E1(R[s1]-R[q],t1)*k[q];N[s1][q]=Q*V[s1]}for(var s1=0;s1<f;s1++){for(q=0;q<f&&!(N[s1][q]>0);q++);for(l[s1][0]=q,q=f-1;q>0&&!(N[s1][q]>0);q--);l[s1][1]=q,I+=l[s1][1]-l[s1][0]+1}for(var x1=$1(I),o1=0,s1=0;s1<f;s1++)for(q=l[s1][0];q<=l[s1][1];q++)x1[o1++]=N[s1][q];return x1}function C1(l){var f=L1(l);return f=Math.min(f,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*f))-2.5)}this.psymodel_init=function(l){var f=l.internal_flags,R,k=!0,V=13,v=24,N=0,q=0,I=-8.25,s1=-4.5,Q=$1(r1.CBANDS),t1=$1(r1.CBANDS),p1=$1(r1.CBANDS),x1=l.out_samplerate;switch(l.experimentalZ){default:case 0:k=!0;break;case 1:k=!(l.VBR==De.vbr_mtrh||l.VBR==De.vbr_mt);break;case 2:k=!1;break;case 3:V=8,N=-1.75,q=-.0125,I=-8.25,s1=-2.25;break}for(f.ms_ener_ratio_old=.25,f.blocktype_old[0]=f.blocktype_old[1]=r1.NORM_TYPE,R=0;R<4;++R){for(var e1=0;e1<r1.CBANDS;++e1)f.nb_1[R][e1]=1e20,f.nb_2[R][e1]=1e20,f.nb_s1[R][e1]=f.nb_s2[R][e1]=1;for(var o1=0;o1<r1.SBMAX_l;o1++)f.en[R].l[o1]=1e20,f.thm[R].l[o1]=1e20;for(var e1=0;e1<3;++e1){for(var o1=0;o1<r1.SBMAX_s;o1++)f.en[R].s[o1][e1]=1e20,f.thm[R].s[o1][e1]=1e20;f.nsPsy.lastAttacks[R]=0}for(var e1=0;e1<9;e1++)f.nsPsy.last_en_subshort[R][e1]=10}for(f.loudness_sq_save[0]=f.loudness_sq_save[1]=0,f.npart_l=P1(f.numlines_l,f.bo_l,f.bm_l,Q,t1,f.mld_l,f.PSY.bo_l_weight,x1,r1.BLKSIZE,f.scalefac_band.l,r1.BLKSIZE/(2*576),r1.SBMAX_l),N1(f.npart_l<r1.CBANDS),R=0;R<f.npart_l;R++){var y1=N;Q[R]>=V&&(y1=q*(Q[R]-V)/(v-V)+N*(v-Q[R])/(v-V)),p1[R]=Math.pow(10,y1/10),f.numlines_l[R]>0?f.rnumlines_l[R]=1/f.numlines_l[R]:f.rnumlines_l[R]=0}f.s3_ll=b1(f.s3ind,f.npart_l,Q,t1,p1,k);var e1=0;for(R=0;R<f.npart_l;R++){var S1;S1=Ja.MAX_VALUE;for(var X1=0;X1<f.numlines_l[R];X1++,e1++){var l1=x1*e1/(1e3*r1.BLKSIZE),A1;A1=this.ATHformula(l1*1e3,l)-20,A1=Math.pow(10,.1*A1),A1*=f.numlines_l[R],S1>A1&&(S1=A1)}f.ATH.cb_l[R]=S1,S1=-20+Q[R]*20/10,S1>6&&(S1=100),S1<-15&&(S1=-15),S1-=8,f.minval_l[R]=Math.pow(10,S1/10)*f.numlines_l[R]}for(f.npart_s=P1(f.numlines_s,f.bo_s,f.bm_s,Q,t1,f.mld_s,f.PSY.bo_s_weight,x1,r1.BLKSIZE_s,f.scalefac_band.s,r1.BLKSIZE_s/384,r1.SBMAX_s),N1(f.npart_s<r1.CBANDS),e1=0,R=0;R<f.npart_s;R++){var S1,y1=I;Q[R]>=V&&(y1=s1*(Q[R]-V)/(v-V)+I*(v-Q[R])/(v-V)),p1[R]=Math.pow(10,y1/10),S1=Ja.MAX_VALUE;for(var X1=0;X1<f.numlines_s[R];X1++,e1++){var l1=x1*e1/(1e3*r1.BLKSIZE_s),A1;A1=this.ATHformula(l1*1e3,l)-20,A1=Math.pow(10,.1*A1),A1*=f.numlines_s[R],S1>A1&&(S1=A1)}f.ATH.cb_s[R]=S1,S1=-7+Q[R]*7/12,Q[R]>12&&(S1*=1+Math.log(1+S1)*3.1),Q[R]<12&&(S1*=1+Math.log(1-S1)*2.3),S1<-15&&(S1=-15),S1-=8,f.minval_s[R]=Math.pow(10,S1/10)*f.numlines_s[R]}f.s3_ss=b1(f.s3ind_s,f.npart_s,Q,t1,p1,k),F(),C.init_fft(f),f.decay=Math.exp(-1*D/(h1*x1/192));{var f1;f1=U,l.exp_nspsytune&2&&(f1=1),Math.abs(l.msfix)>0&&(f1=l.msfix),l.msfix=f1;for(var I1=0;I1<f.npart_l;I1++)f.s3ind[I1][1]>f.npart_l-1&&(f.s3ind[I1][1]=f.npart_l-1)}var q1=576*f.mode_gr/x1;if(f.ATH.decay=Math.pow(10,-12/10*q1),f.ATH.adjust=.01,f.ATH.adjustLimit=1,N1(f.bo_l[r1.SBMAX_l-1]<=f.npart_l),N1(f.bo_s[r1.SBMAX_s-1]<=f.npart_s),l.ATHtype!=-1){var l1,m1=l.out_samplerate/r1.BLKSIZE,D1=0;for(l1=0,R=0;R<r1.BLKSIZE/2;++R)l1+=m1,f.ATH.eql_w[R]=1/Math.pow(10,this.ATHformula(l1,l)/10),D1+=f.ATH.eql_w[R];for(D1=1/D1,R=r1.BLKSIZE/2;--R>=0;)f.ATH.eql_w[R]*=D1}{for(var I1=e1=0;I1<f.npart_s;++I1)for(R=0;R<f.numlines_s[I1];++R)++e1;for(var I1=e1=0;I1<f.npart_l;++I1)for(R=0;R<f.numlines_l[I1];++R)++e1}for(e1=0,R=0;R<f.npart_l;R++){var l1=x1*(e1+f.numlines_l[R]/2)/(1*r1.BLKSIZE);f.mld_cb_l[R]=C1(l1),e1+=f.numlines_l[R]}for(;R<r1.CBANDS;++R)f.mld_cb_l[R]=1;for(e1=0,R=0;R<f.npart_s;R++){var l1=x1*(e1+f.numlines_s[R]/2)/(1*r1.BLKSIZE_s);f.mld_cb_s[R]=C1(l1),e1+=f.numlines_s[R]}for(;R<r1.CBANDS;++R)f.mld_cb_s[R]=1;return 0};function z1(l,f){l<-.3&&(l=3410),l/=1e3,l=Math.max(.1,l);var R=3.64*Math.pow(l,-.8)-6.8*Math.exp(-.6*Math.pow(l-3.4,2))+6*Math.exp(-.15*Math.pow(l-8.7,2))+(.6+.04*f)*.001*Math.pow(l,4);return R}this.ATHformula=function(l,f){var R;switch(f.ATHtype){case 0:R=z1(l,9);break;case 1:R=z1(l,-1);break;case 2:R=z1(l,0);break;case 3:R=z1(l,1)+6;break;case 4:R=z1(l,f.ATHcurve);break;default:R=z1(l,0);break}return R}}var J0=K0,U0=Ke;function $0(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=U0.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var et=$0,at=te(),k0={};k0.SFBMAX=at.SBMAX_s*3;var na=k0,E0=Q1,tt=E0.new_float,xe=E0.new_int,Ma=na;function st(){this.xr=tt(576),this.l3_enc=xe(576),this.scalefac=xe(Ma.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=xe(3),this.subblock_gain=xe(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=xe(Ma.SFBMAX),this.window=xe(Ma.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=xe(4),this.max_nonzero_coeff=0;var B=this;function C($){return new Int32Array($)}function D($){return new Float32Array($)}this.assign=function($){B.xr=D($.xr),B.l3_enc=C($.l3_enc),B.scalefac=C($.scalefac),B.xrpow_max=$.xrpow_max,B.part2_3_length=$.part2_3_length,B.big_values=$.big_values,B.count1=$.count1,B.global_gain=$.global_gain,B.scalefac_compress=$.scalefac_compress,B.block_type=$.block_type,B.mixed_block_flag=$.mixed_block_flag,B.table_select=C($.table_select),B.subblock_gain=C($.subblock_gain),B.region0_count=$.region0_count,B.region1_count=$.region1_count,B.preflag=$.preflag,B.scalefac_scale=$.scalefac_scale,B.count1table_select=$.count1table_select,B.part2_length=$.part2_length,B.sfb_lmax=$.sfb_lmax,B.sfb_smin=$.sfb_smin,B.psy_lmax=$.psy_lmax,B.sfbmax=$.sfbmax,B.psymax=$.psymax,B.sfbdivide=$.sfbdivide,B.width=C($.width),B.window=C($.window),B.count1bits=$.count1bits,B.sfb_partition_table=$.sfb_partition_table.slice(0),B.slen=C($.slen),B.max_nonzero_coeff=$.max_nonzero_coeff}}var Va=st,rt=Q1,Ua=rt.new_int,nt=Va;function _t(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Ua(4),Ua(4)];for(var B=0;B<2;B++)for(var C=0;C<2;C++)this.tt[B][C]=new nt}var it=_t,y0=Q1,$e=y0.System,ea=y0.new_int,aa=te();function ot(B,C,D,$){this.l=ea(1+aa.SBMAX_l),this.s=ea(1+aa.SBMAX_s),this.psfb21=ea(1+aa.PSFB21),this.psfb12=ea(1+aa.PSFB12);var i1=this.l,G=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],$e.arraycopy(this.arrL,0,i1,0,Math.min(this.arrL.length,this.l.length)),$e.arraycopy(this.arrS,0,G,0,Math.min(this.arrS.length,this.s.length)),$e.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),$e.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var x0=ot,La=Q1,Sa=La.new_float,lt=La.new_float_n,ft=La.new_int,$a=te();function ct(){this.last_en_subshort=lt([4,9]),this.lastAttacks=ft(4),this.pefirbuf=Sa(19),this.longfact=Sa($a.SBMAX_l),this.shortfact=Sa($a.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var ut=ct;function ht(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var pt=ht,He=Q1,bt=He.new_byte,mt=He.new_double,pe=He.new_float,Pe=He.new_float_n,de=He.new_int,ta=He.new_int_n,dt=it,vt=x0,gt=ut,Mt=pt,e0=B0(),W1=te(),St=na;Re.MFSIZE=3*1152+W1.ENCDELAY-W1.MDCTDELAY;Re.MAX_HEADER_BUF=256;Re.MAX_BITS_PER_CHANNEL=4095;Re.MAX_BITS_PER_GRANULE=7680;Re.BPC=320;function Re(){var B=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Pe([2,Re.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new dt,this.ms_ratio=pe(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=de(2),this.CurrentStep=de(2),this.masking_lower=0,this.bv_scf=de(576),this.pseudohalf=de(St.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Re.BPC+1),this.itime=mt(2),this.sideinfo_len=0,this.sb_sample=Pe([2,2,18,W1.SBLIMIT]),this.amp_filter=pe(32);function C(){this.write_timing=0,this.ptr=0,this.buf=bt(B)}this.header=new Array(Re.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new vt,this.minval_l=pe(W1.CBANDS),this.minval_s=pe(W1.CBANDS),this.nb_1=Pe([4,W1.CBANDS]),this.nb_2=Pe([4,W1.CBANDS]),this.nb_s1=Pe([4,W1.CBANDS]),this.nb_s2=Pe([4,W1.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=pe(4),this.loudness_sq=Pe([2,2]),this.loudness_sq_save=pe(2),this.mld_l=pe(W1.SBMAX_l),this.mld_s=pe(W1.SBMAX_s),this.bm_l=de(W1.SBMAX_l),this.bo_l=de(W1.SBMAX_l),this.bm_s=de(W1.SBMAX_s),this.bo_s=de(W1.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ta([W1.CBANDS,2]),this.s3ind_s=ta([W1.CBANDS,2]),this.numlines_s=de(W1.CBANDS),this.numlines_l=de(W1.CBANDS),this.rnumlines_l=pe(W1.CBANDS),this.mld_cb_l=pe(W1.CBANDS),this.mld_cb_s=pe(W1.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=pe(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=de(2),this.nsPsy=new gt,this.VBR_seek_table=new Mt,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ta([16,5]),this.bitrate_blockType_Hist=ta([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var D=0;D<this.en.length;D++)this.en[D]=new e0;for(var D=0;D<this.thm.length;D++)this.thm[D]=new e0;for(var D=0;D<this.header.length;D++)this.header[D]=new C}var _a=Re,wt=Q1,Ie=wt.new_float,Ve=te();function Rt(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Ie(Ve.SBMAX_l),this.s=Ie(Ve.SBMAX_s),this.psfb21=Ie(Ve.PSFB21),this.psfb12=Ie(Ve.PSFB12),this.cb_l=Ie(Ve.CBANDS),this.cb_s=Ie(Ve.CBANDS),this.eql_w=Ie(Ve.BLKSIZE/2)}var At=Rt,P0=Q1,_e=P0.System,a0=P0.Arrays;K1.STEPS_per_dB=100;K1.MAX_dB=120;K1.GAIN_NOT_ENOUGH_SAMPLES=-24601;K1.GAIN_ANALYSIS_ERROR=0;K1.GAIN_ANALYSIS_OK=1;K1.INIT_GAIN_ANALYSIS_ERROR=0;K1.INIT_GAIN_ANALYSIS_OK=1;K1.YULE_ORDER=10;K1.MAX_ORDER=K1.YULE_ORDER;K1.MAX_SAMP_FREQ=48e3;K1.RMS_WINDOW_TIME_NUMERATOR=1;K1.RMS_WINDOW_TIME_DENOMINATOR=20;K1.MAX_SAMPLES_PER_WINDOW=K1.MAX_SAMP_FREQ*K1.RMS_WINDOW_TIME_NUMERATOR/K1.RMS_WINDOW_TIME_DENOMINATOR+1;function K1(){var B=64.82,C=.95,D=K1.RMS_WINDOW_TIME_NUMERATOR,$=K1.RMS_WINDOW_TIME_DENOMINATOR,i1=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],G=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function W(h,J,U,j,n1,Z){for(;n1--!=0;)U[j]=1e-10+h[J+0]*Z[0]-U[j-1]*Z[1]+h[J-1]*Z[2]-U[j-2]*Z[3]+h[J-2]*Z[4]-U[j-3]*Z[5]+h[J-3]*Z[6]-U[j-4]*Z[7]+h[J-4]*Z[8]-U[j-5]*Z[9]+h[J-5]*Z[10]-U[j-6]*Z[11]+h[J-6]*Z[12]-U[j-7]*Z[13]+h[J-7]*Z[14]-U[j-8]*Z[15]+h[J-8]*Z[16]-U[j-9]*Z[17]+h[J-9]*Z[18]-U[j-10]*Z[19]+h[J-10]*Z[20],++j,++J}function Y(h,J,U,j,n1,Z){for(;n1--!=0;)U[j]=h[J+0]*Z[0]-U[j-1]*Z[1]+h[J-1]*Z[2]-U[j-2]*Z[3]+h[J-2]*Z[4],++j,++J}function K(h,J){for(var U=0;U<MAX_ORDER;U++)h.linprebuf[U]=h.lstepbuf[U]=h.loutbuf[U]=h.rinprebuf[U]=h.rstepbuf[U]=h.routbuf[U]=0;switch(0|J){case 48e3:h.reqindex=0;break;case 44100:h.reqindex=1;break;case 32e3:h.reqindex=2;break;case 24e3:h.reqindex=3;break;case 22050:h.reqindex=4;break;case 16e3:h.reqindex=5;break;case 12e3:h.reqindex=6;break;case 11025:h.reqindex=7;break;case 8e3:h.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return h.sampleWindow=0|(J*D+$-1)/$,h.lsum=0,h.rsum=0,h.totsamp=0,a0.ill(h.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(h,J){return K(h,J)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(h.linpre=MAX_ORDER,h.rinpre=MAX_ORDER,h.lstep=MAX_ORDER,h.rstep=MAX_ORDER,h.lout=MAX_ORDER,h.rout=MAX_ORDER,a0.fill(h.B,0),INIT_GAIN_ANALYSIS_OK)};function h1(h){return h*h}this.AnalyzeSamples=function(h,J,U,j,n1,Z,n){var r,e,m,x,b,S,d;if(Z==0)return GAIN_ANALYSIS_OK;switch(d=0,b=Z,n){case 1:j=J,n1=U;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(Z<MAX_ORDER?(_e.arraycopy(J,U,h.linprebuf,MAX_ORDER,Z),_e.arraycopy(j,n1,h.rinprebuf,MAX_ORDER,Z)):(_e.arraycopy(J,U,h.linprebuf,MAX_ORDER,MAX_ORDER),_e.arraycopy(j,n1,h.rinprebuf,MAX_ORDER,MAX_ORDER));b>0;){S=b>h.sampleWindow-h.totsamp?h.sampleWindow-h.totsamp:b,d<MAX_ORDER?(r=h.linpre+d,e=h.linprebuf,m=h.rinpre+d,x=h.rinprebuf,S>MAX_ORDER-d&&(S=MAX_ORDER-d)):(r=U+d,e=J,m=n1+d,x=j),W(e,r,h.lstepbuf,h.lstep+h.totsamp,S,i1[h.reqindex]),W(x,m,h.rstepbuf,h.rstep+h.totsamp,S,i1[h.reqindex]),Y(h.lstepbuf,h.lstep+h.totsamp,h.loutbuf,h.lout+h.totsamp,S,G[h.reqindex]),Y(h.rstepbuf,h.rstep+h.totsamp,h.routbuf,h.rout+h.totsamp,S,G[h.reqindex]),r=h.lout+h.totsamp,e=h.loutbuf,m=h.rout+h.totsamp,x=h.routbuf;for(var F=S%8;F--!=0;)h.lsum+=h1(e[r++]),h.rsum+=h1(x[m++]);for(F=S/8;F--!=0;)h.lsum+=h1(e[r+0])+h1(e[r+1])+h1(e[r+2])+h1(e[r+3])+h1(e[r+4])+h1(e[r+5])+h1(e[r+6])+h1(e[r+7]),r+=8,h.rsum+=h1(x[m+0])+h1(x[m+1])+h1(x[m+2])+h1(x[m+3])+h1(x[m+4])+h1(x[m+5])+h1(x[m+6])+h1(x[m+7]),m+=8;if(b-=S,d+=S,h.totsamp+=S,h.totsamp==h.sampleWindow){var L=K1.STEPS_per_dB*10*Math.log10((h.lsum+h.rsum)/h.totsamp*.5+1e-37),y=L<=0?0:0|L;y>=h.A.length&&(y=h.A.length-1),h.A[y]++,h.lsum=h.rsum=0,_e.arraycopy(h.loutbuf,h.totsamp,h.loutbuf,0,MAX_ORDER),_e.arraycopy(h.routbuf,h.totsamp,h.routbuf,0,MAX_ORDER),_e.arraycopy(h.lstepbuf,h.totsamp,h.lstepbuf,0,MAX_ORDER),_e.arraycopy(h.rstepbuf,h.totsamp,h.rstepbuf,0,MAX_ORDER),h.totsamp=0}if(h.totsamp>h.sampleWindow)return GAIN_ANALYSIS_ERROR}return Z<MAX_ORDER?(_e.arraycopy(h.linprebuf,Z,h.linprebuf,0,MAX_ORDER-Z),_e.arraycopy(h.rinprebuf,Z,h.rinprebuf,0,MAX_ORDER-Z),_e.arraycopy(J,U,h.linprebuf,MAX_ORDER-Z,Z),_e.arraycopy(j,n1,h.rinprebuf,MAX_ORDER-Z,Z)):(_e.arraycopy(J,U+Z-MAX_ORDER,h.linprebuf,0,MAX_ORDER),_e.arraycopy(j,n1+Z-MAX_ORDER,h.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function p(h,J){var U,j=0;for(U=0;U<J;U++)j+=h[U];if(j==0)return GAIN_NOT_ENOUGH_SAMPLES;var n1=0|Math.ceil(j*(1-C));for(U=J;U-- >0&&!((n1-=h[U])<=0););return B-U/K1.STEPS_per_dB}this.GetTitleGain=function(h){for(var J=p(h.A,h.A.length),U=0;U<h.A.length;U++)h.B[U]+=h.A[U],h.A[U]=0;for(var U=0;U<MAX_ORDER;U++)h.linprebuf[U]=h.lstepbuf[U]=h.loutbuf[U]=h.rinprebuf[U]=h.rstepbuf[U]=h.routbuf[U]=0;return h.totsamp=0,h.lsum=h.rsum=0,J}}var I0=K1,V0=Q1,Xe=V0.new_float,t0=V0.new_int,ie=I0;function Bt(){this.linprebuf=Xe(ie.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Xe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.lstep=0,this.loutbuf=Xe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.lout=0,this.rinprebuf=Xe(ie.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Xe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.rstep=0,this.routbuf=Xe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=t0(0|ie.STEPS_per_dB*ie.MAX_dB),this.B=t0(0|ie.STEPS_per_dB*ie.MAX_dB)}var Tt=Bt;function kt(B){this.bits=B}var L0=kt,Da=Q1,s0=Da.new_float,Et=Da.new_int,r0=Da.assert,yt=L0,n0=te(),xt=na,Pt=_a;function It(B){var C=B;this.quantize=C,this.iteration_loop=function(D,$,i1,G){var W=D.internal_flags,Y=s0(xt.SFBMAX),K=s0(576),h1=Et(2),p=0,h,J=W.l3_side,U=new yt(p);this.quantize.rv.ResvFrameBegin(D,U),p=U.bits;for(var j=0;j<W.mode_gr;j++){h=this.quantize.qupvt.on_pe(D,$,h1,p,j,j),W.mode_ext==n0.MPG_MD_MS_LR&&(this.quantize.ms_convert(W.l3_side,j),this.quantize.qupvt.reduce_side(h1,i1[j],p,h));for(var n1=0;n1<W.channels_out;n1++){var Z,n,r=J.tt[j][n1];r.block_type!=n0.SHORT_TYPE?(Z=0,n=W.PSY.mask_adjust-Z):(Z=0,n=W.PSY.mask_adjust_short-Z),W.masking_lower=Math.pow(10,n*.1),this.quantize.init_outer_loop(W,r),this.quantize.init_xrpow(W,r,K)&&(this.quantize.qupvt.calc_xmin(D,G[j][n1],r,Y),this.quantize.outer_loop(D,r,Y,K,n1,h1[n1])),this.quantize.iteration_finish_one(W,j,n1),r0(r.part2_3_length<=Pt.MAX_BITS_PER_CHANNEL),r0(r.part2_3_length<=h1[n1])}}this.quantize.rv.ResvFrameEnd(W,p)}}var Vt=It;function H1(B,C,D,$){this.xlen=B,this.linmax=C,this.table=D,this.hlen=$}var c1={};c1.t1HB=[1,1,1,0];c1.t2HB=[1,2,1,3,1,1,3,2,0];c1.t3HB=[3,2,1,1,1,1,3,2,0];c1.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];c1.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];c1.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];c1.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];c1.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];c1.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];c1.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];c1.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];c1.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];c1.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];c1.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];c1.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];c1.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];c1.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];c1.t1l=[1,4,3,5];c1.t2l=[1,4,7,4,5,7,6,7,8];c1.t3l=[2,3,7,4,4,7,6,7,8];c1.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];c1.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];c1.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];c1.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];c1.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];c1.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];c1.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];c1.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];c1.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];c1.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];c1.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];c1.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];c1.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];c1.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];c1.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];c1.ht=[new H1(0,0,null,null),new H1(2,0,c1.t1HB,c1.t1l),new H1(3,0,c1.t2HB,c1.t2l),new H1(3,0,c1.t3HB,c1.t3l),new H1(0,0,null,null),new H1(4,0,c1.t5HB,c1.t5l),new H1(4,0,c1.t6HB,c1.t6l),new H1(6,0,c1.t7HB,c1.t7l),new H1(6,0,c1.t8HB,c1.t8l),new H1(6,0,c1.t9HB,c1.t9l),new H1(8,0,c1.t10HB,c1.t10l),new H1(8,0,c1.t11HB,c1.t11l),new H1(8,0,c1.t12HB,c1.t12l),new H1(16,0,c1.t13HB,c1.t13l),new H1(0,0,null,c1.t16_5l),new H1(16,0,c1.t15HB,c1.t15l),new H1(1,1,c1.t16HB,c1.t16l),new H1(2,3,c1.t16HB,c1.t16l),new H1(3,7,c1.t16HB,c1.t16l),new H1(4,15,c1.t16HB,c1.t16l),new H1(6,63,c1.t16HB,c1.t16l),new H1(8,255,c1.t16HB,c1.t16l),new H1(10,1023,c1.t16HB,c1.t16l),new H1(13,8191,c1.t16HB,c1.t16l),new H1(4,15,c1.t24HB,c1.t24l),new H1(5,31,c1.t24HB,c1.t24l),new H1(6,63,c1.t24HB,c1.t24l),new H1(7,127,c1.t24HB,c1.t24l),new H1(8,255,c1.t24HB,c1.t24l),new H1(9,511,c1.t24HB,c1.t24l),new H1(11,2047,c1.t24HB,c1.t24l),new H1(13,8191,c1.t24HB,c1.t24l),new H1(0,0,c1.t32HB,c1.t32l),new H1(0,0,c1.t33HB,c1.t33l)];c1.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];c1.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];c1.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];c1.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];c1.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];c1.scfsi_band=[0,6,11,16,21];var Na=c1,wa,_0;function D0(){if(_0)return wa;_0=1;var B=x0,C=Q1,D=C.VbrMode,$=C.Float,i1=C.Util,G=C.new_float,W=C.new_int,Y=C.assert,K=te(),h1=L0,p=_a;h.Q_MAX=257,h.Q_MAX2=116,h.LARGE_BITS=1e5,h.IXMAX_VAL=8206;function h(){var J=Xa(),U=null,j=null,n1=null;this.setModules=function(M,X,P){U=M,j=X,n1=P};function Z(M){return Y(0<=M+h.Q_MAX2&&M<h.Q_MAX),d[M+h.Q_MAX2]}this.IPOW20=function(M){return Y(0<=M&&M<h.Q_MAX),F[M]};var n=2220446049250313e-31,r=h.IXMAX_VAL,e=r+2,m=h.Q_MAX,x=h.Q_MAX2;h.LARGE_BITS;var b=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var S=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=S,this.sfBandIndex=[new B([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new B([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var d=G(m+x+1),F=G(m),L=G(e),y=G(e);this.adj43=y;function c(M,X){var P=n1.ATHformula(X,M);return P-=b,P=Math.pow(10,P/10+M.ATHlower),P}function w(M){for(var X=M.internal_flags.ATH.l,P=M.internal_flags.ATH.psfb21,E=M.internal_flags.ATH.s,z=M.internal_flags.ATH.psfb12,A=M.internal_flags,_=M.out_samplerate,s=0;s<K.SBMAX_l;s++){var a=A.scalefac_band.l[s],i=A.scalefac_band.l[s+1];X[s]=$.MAX_VALUE;for(var u=a;u<i;u++){var O=u*_/1152,a1=c(M,O);X[s]=Math.min(X[s],a1)}}for(var s=0;s<K.PSFB21;s++){var a=A.scalefac_band.psfb21[s],i=A.scalefac_band.psfb21[s+1];P[s]=$.MAX_VALUE;for(var u=a;u<i;u++){var O=u*_/1152,a1=c(M,O);P[s]=Math.min(P[s],a1)}}for(var s=0;s<K.SBMAX_s;s++){var a=A.scalefac_band.s[s],i=A.scalefac_band.s[s+1];E[s]=$.MAX_VALUE;for(var u=a;u<i;u++){var O=u*_/384,a1=c(M,O);E[s]=Math.min(E[s],a1)}E[s]*=A.scalefac_band.s[s+1]-A.scalefac_band.s[s]}for(var s=0;s<K.PSFB12;s++){var a=A.scalefac_band.psfb12[s],i=A.scalefac_band.psfb12[s+1];z[s]=$.MAX_VALUE;for(var u=a;u<i;u++){var O=u*_/384,a1=c(M,O);z[s]=Math.min(z[s],a1)}z[s]*=A.scalefac_band.s[13]-A.scalefac_band.s[12]}if(M.noATH){for(var s=0;s<K.SBMAX_l;s++)X[s]=1e-20;for(var s=0;s<K.PSFB21;s++)P[s]=1e-20;for(var s=0;s<K.SBMAX_s;s++)E[s]=1e-20;for(var s=0;s<K.PSFB12;s++)z[s]=1e-20}A.ATH.floor=10*Math.log10(c(M,-1))}this.iteration_init=function(M){var X=M.internal_flags,P=X.l3_side,E;if(X.iteration_init_init==0){for(X.iteration_init_init=1,P.main_data_begin=0,w(M),L[0]=0,E=1;E<e;E++)L[E]=Math.pow(E,4/3);for(E=0;E<e-1;E++)y[E]=E+1-Math.pow(.5*(L[E]+L[E+1]),.75);for(y[E]=.5,E=0;E<m;E++)F[E]=Math.pow(2,(E-210)*-.1875);for(E=0;E<=m+x;E++)d[E]=Math.pow(2,(E-210-x)*.25);U.huffman_init(X);{var z,A,_,s;for(E=M.exp_nspsytune>>2&63,E>=32&&(E-=64),z=Math.pow(10,E/4/10),E=M.exp_nspsytune>>8&63,E>=32&&(E-=64),A=Math.pow(10,E/4/10),E=M.exp_nspsytune>>14&63,E>=32&&(E-=64),_=Math.pow(10,E/4/10),E=M.exp_nspsytune>>20&63,E>=32&&(E-=64),s=_*Math.pow(10,E/4/10),E=0;E<K.SBMAX_l;E++){var a;E<=6?a=z:E<=13?a=A:E<=20?a=_:a=s,X.nsPsy.longfact[E]=a}for(E=0;E<K.SBMAX_s;E++){var a;E<=5?a=z:E<=10?a=A:E<=11?a=_:a=s,X.nsPsy.shortfact[E]=a}}}},this.on_pe=function(M,X,P,E,z,A){var _=M.internal_flags,s=0,a,i=W(2),u,O=new h1(s),a1=j.ResvMaxBits(M,E,O,A);s=O.bits;var T=s+a1;for(T>p.MAX_BITS_PER_GRANULE&&(T=p.MAX_BITS_PER_GRANULE),a=0,u=0;u<_.channels_out;++u)P[u]=Math.min(p.MAX_BITS_PER_CHANNEL,s/_.channels_out),i[u]=0|P[u]*X[z][u]/700-P[u],i[u]>E*3/4&&(i[u]=E*3/4),i[u]<0&&(i[u]=0),i[u]+P[u]>p.MAX_BITS_PER_CHANNEL&&(i[u]=Math.max(0,p.MAX_BITS_PER_CHANNEL-P[u])),a+=i[u];if(a>a1)for(u=0;u<_.channels_out;++u)i[u]=a1*i[u]/a;for(u=0;u<_.channels_out;++u)P[u]+=i[u],a1-=i[u];for(a=0,u=0;u<_.channels_out;++u)a+=P[u];if(a>p.MAX_BITS_PER_GRANULE){var H=0;for(u=0;u<_.channels_out;++u)P[u]*=p.MAX_BITS_PER_GRANULE,P[u]/=a,H+=P[u]}return T},this.reduce_side=function(M,X,P,E){Y(M[0]+M[1]<=p.MAX_BITS_PER_GRANULE);var z=.33*(.5-X)/.5;z<0&&(z=0),z>.5&&(z=.5);var A=0|z*.5*(M[0]+M[1]);A>p.MAX_BITS_PER_CHANNEL-M[0]&&(A=p.MAX_BITS_PER_CHANNEL-M[0]),A<0&&(A=0),M[1]>=125&&(M[1]-A>125?(M[0]<P&&(M[0]+=A),M[1]-=A):(M[0]+=M[1]-125,M[1]=125)),A=M[0]+M[1],A>E&&(M[0]=E*M[0]/A,M[1]=E*M[1]/A),Y(M[0]<=p.MAX_BITS_PER_CHANNEL),Y(M[1]<=p.MAX_BITS_PER_CHANNEL),Y(M[0]+M[1]<=p.MAX_BITS_PER_GRANULE)},this.athAdjust=function(M,X,P){var E=90.30873362,z=94.82444863,A=i1.FAST_LOG10_X(X,10),_=M*M,s=0;return A-=P,_>1e-20&&(s=1+i1.FAST_LOG10_X(_,10/E)),s<0&&(s=0),A*=s,A+=P+E-z,Math.pow(10,.1*A)},this.calc_xmin=function(M,X,P,E){var z=0,A=M.internal_flags,_,s=0,a=0,i=A.ATH,u=P.xr,O=M.VBR==D.vbr_mtrh?1:0,a1=A.masking_lower;for((M.VBR==D.vbr_mtrh||M.VBR==D.vbr_mt)&&(a1=1),_=0;_<P.psy_lmax;_++){var T,H,_1,u1,v1,w1;M.VBR==D.vbr_rh||M.VBR==D.vbr_mtrh?H=athAdjust(i.adjust,i.l[_],i.floor):H=i.adjust*i.l[_],v1=P.width[_],_1=H/v1,u1=n,w1=v1>>1,T=0;do{var g1,M1;g1=u[s]*u[s],T+=g1,u1+=g1<_1?g1:_1,s++,M1=u[s]*u[s],T+=M1,u1+=M1<_1?M1:_1,s++}while(--w1>0);if(T>H&&a++,_==K.SBPSY_l){var T1=H*A.nsPsy.longfact[_];u1<T1&&(u1=T1)}if(O!=0&&(H=u1),!M.ATHonly){var j1=X.en.l[_];if(j1>0){var T1;T1=T*X.thm.l[_]*a1/j1,O!=0&&(T1*=A.nsPsy.longfact[_]),H<T1&&(H=T1)}}O!=0?E[z++]=H:E[z++]=H*A.nsPsy.longfact[_]}var ue=575;if(P.block_type!=K.SHORT_TYPE)for(var t=576;t--!=0&&J.EQ(u[t],0);)ue=t;P.max_nonzero_coeff=ue;for(var o=P.sfb_smin;_<P.psymax;o++,_+=3){var v1,d1,R1;for(M.VBR==D.vbr_rh||M.VBR==D.vbr_mtrh?R1=athAdjust(i.adjust,i.s[o],i.floor):R1=i.adjust*i.s[o],v1=P.width[_],d1=0;d1<3;d1++){var T=0,H,_1,u1,w1=v1>>1;_1=R1/v1,u1=n;do{var g1,M1;g1=u[s]*u[s],T+=g1,u1+=g1<_1?g1:_1,s++,M1=u[s]*u[s],T+=M1,u1+=M1<_1?M1:_1,s++}while(--w1>0);if(T>R1&&a++,o==K.SBPSY_s){var T1=R1*A.nsPsy.shortfact[o];u1<T1&&(u1=T1)}if(O!=0?H=u1:H=R1,!M.ATHonly&&!M.ATHshort){var j1=X.en.s[o][d1];if(j1>0){var T1;T1=T*X.thm.s[o][d1]*a1/j1,O!=0&&(T1*=A.nsPsy.shortfact[o]),H<T1&&(H=T1)}}O!=0?E[z++]=H:E[z++]=H*A.nsPsy.shortfact[o]}M.useTemporal&&(E[z-3]>E[z-3+1]&&(E[z-3+1]+=(E[z-3]-E[z-3+1])*A.decay),E[z-3+1]>E[z-3+2]&&(E[z-3+2]+=(E[z-3+1]-E[z-3+2])*A.decay))}return a};function g(M){this.s=M}this.calc_noise_core=function(M,X,P,E){var z=0,A=X.s,_=M.l3_enc;if(A>M.count1)for(;P--!=0;){var s;s=M.xr[A],A++,z+=s*s,s=M.xr[A],A++,z+=s*s}else if(A>M.big_values){var a=G(2);for(a[0]=0,a[1]=E;P--!=0;){var s;s=Math.abs(M.xr[A])-a[_[A]],A++,z+=s*s,s=Math.abs(M.xr[A])-a[_[A]],A++,z+=s*s}}else for(;P--!=0;){var s;s=Math.abs(M.xr[A])-L[_[A]]*E,A++,z+=s*s,s=Math.abs(M.xr[A])-L[_[A]]*E,A++,z+=s*s}return X.s=A,z},this.calc_noise=function(M,X,P,E,z){var A=0,_=0,s,a,i=0,u=0,O=0,a1=-20,T=0,H=M.scalefac,_1=0;for(E.over_SSD=0,s=0;s<M.psymax;s++){var u1=M.global_gain-(H[_1++]+(M.preflag!=0?S[s]:0)<<M.scalefac_scale+1)-M.subblock_gain[M.window[s]]*8,v1=0;if(z!=null&&z.step[s]==u1)v1=z.noise[s],T+=M.width[s],P[A++]=v1/X[_++],v1=z.noise_log[s];else{var w1=Z(u1);if(a=M.width[s]>>1,T+M.width[s]>M.max_nonzero_coeff){var g1;g1=M.max_nonzero_coeff-T+1,g1>0?a=g1>>1:a=0}var M1=new g(T);v1=this.calc_noise_core(M,M1,a,w1),T=M1.s,z!=null&&(z.step[s]=u1,z.noise[s]=v1),v1=P[A++]=v1/X[_++],v1=i1.FAST_LOG10(Math.max(v1,1e-20)),z!=null&&(z.noise_log[s]=v1)}if(z!=null&&(z.global_gain=M.global_gain),O+=v1,v1>0){var T1;T1=Math.max(0|v1*10+.5,1),E.over_SSD+=T1*T1,i++,u+=v1}a1=Math.max(a1,v1)}return E.over_count=i,E.tot_noise=O,E.over_noise=u,E.max_noise=a1,i},this.set_pinfo=function(M,X,P,E,z){var A=M.internal_flags,_,s,a,i,u,O=X.scalefac_scale==0?.5:1,a1=X.scalefac,T=G(L3Side.SFBMAX),H=G(L3Side.SFBMAX),_1=new CalcNoiseResult;calc_xmin(M,P,X,T),calc_noise(X,T,H,_1,null);var u1=0;for(s=X.sfb_lmax,X.block_type!=K.SHORT_TYPE&&X.mixed_block_flag==0&&(s=22),_=0;_<s;_++){var v1=A.scalefac_band.l[_],w1=A.scalefac_band.l[_+1],g1=w1-v1;for(i=0;u1<w1;u1++)i+=X.xr[u1]*X.xr[u1];i/=g1,u=1e15,A.pinfo.en[E][z][_]=u*i,A.pinfo.xfsf[E][z][_]=u*T[_]*H[_]/g1,P.en.l[_]>0&&!M.ATHonly?i=i/P.en.l[_]:i=0,A.pinfo.thr[E][z][_]=u*Math.max(i*P.thm.l[_],A.ATH.l[_]),A.pinfo.LAMEsfb[E][z][_]=0,X.preflag!=0&&_>=11&&(A.pinfo.LAMEsfb[E][z][_]=-O*S[_]),_<K.SBPSY_l&&(Y(a1[_]>=0),A.pinfo.LAMEsfb[E][z][_]-=O*a1[_])}if(X.block_type==K.SHORT_TYPE)for(s=_,_=X.sfb_smin;_<K.SBMAX_s;_++)for(var v1=A.scalefac_band.s[_],w1=A.scalefac_band.s[_+1],g1=w1-v1,M1=0;M1<3;M1++){for(i=0,a=v1;a<w1;a++)i+=X.xr[u1]*X.xr[u1],u1++;i=Math.max(i/g1,1e-20),u=1e15,A.pinfo.en_s[E][z][3*_+M1]=u*i,A.pinfo.xfsf_s[E][z][3*_+M1]=u*T[s]*H[s]/g1,P.en.s[_][M1]>0?i=i/P.en.s[_][M1]:i=0,(M.ATHonly||M.ATHshort)&&(i=0),A.pinfo.thr_s[E][z][3*_+M1]=u*Math.max(i*P.thm.s[_][M1],A.ATH.s[_]),A.pinfo.LAMEsfb_s[E][z][3*_+M1]=-2*X.subblock_gain[M1],_<K.SBPSY_s&&(A.pinfo.LAMEsfb_s[E][z][3*_+M1]-=O*a1[s]),s++}A.pinfo.LAMEqss[E][z]=X.global_gain,A.pinfo.LAMEmainbits[E][z]=X.part2_3_length+X.part2_length,A.pinfo.LAMEsfbits[E][z]=X.part2_length,A.pinfo.over[E][z]=_1.over_count,A.pinfo.max_noise[E][z]=_1.max_noise*10,A.pinfo.over_noise[E][z]=_1.over_noise*10,A.pinfo.tot_noise[E][z]=_1.tot_noise*10,A.pinfo.over_SSD[E][z]=_1.over_SSD}}return wa=h,wa}var Ra,i0;function N0(){if(i0)return Ra;i0=1;var B=Q1,C=B.System,D=B.Arrays,$=B.new_int,i1=B.assert,G=te(),W=Na,Y=Va,K=D0();function h1(){var p=null;this.qupvt=null,this.setModules=function(A){this.qupvt=A,p=A};function h(A){this.bits=0|A}var J=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function U(A,_,s,a,i,u){var O=.5946/_;for(A=A>>1;A--!=0;)i[u++]=O>s[a++]?0:1,i[u++]=O>s[a++]?0:1}function j(A,_,s,a,i,u){A=A>>1;var O=A%2;for(A=A>>1;A--!=0;){var a1,T,H,_1,u1,v1,w1,g1;a1=s[a++]*_,T=s[a++]*_,u1=0|a1,H=s[a++]*_,v1=0|T,_1=s[a++]*_,w1=0|H,a1+=p.adj43[u1],g1=0|_1,T+=p.adj43[v1],i[u++]=0|a1,H+=p.adj43[w1],i[u++]=0|T,_1+=p.adj43[g1],i[u++]=0|H,i[u++]=0|_1}if(O!=0){var a1,T,u1,v1;a1=s[a++]*_,T=s[a++]*_,u1=0|a1,v1=0|T,a1+=p.adj43[u1],T+=p.adj43[v1],i[u++]=0|a1,i[u++]=0|T}}function n1(A,_,s,a,i){var u,O,a1=0,T,H=0,_1=0,u1=0,v1=_,w1=0,g1=v1,M1=0,T1=A,j1=0;for(T=i!=null&&a.global_gain==i.global_gain,a.block_type==G.SHORT_TYPE?O=38:O=21,u=0;u<=O;u++){var ue=-1;if((T||a.block_type==G.NORM_TYPE)&&(ue=a.global_gain-(a.scalefac[u]+(a.preflag!=0?p.pretab[u]:0)<<a.scalefac_scale+1)-a.subblock_gain[a.window[u]]*8),i1(a.width[u]>=0),T&&i.step[u]==ue)H!=0&&(j(H,s,T1,j1,g1,M1),H=0),_1!=0&&(U(_1,s,T1,j1,g1,M1),_1=0);else{var t=a.width[u];if(a1+a.width[u]>a.max_nonzero_coeff){var o;o=a.max_nonzero_coeff-a1+1,D.fill(_,a.max_nonzero_coeff,576,0),t=o,t<0&&(t=0),u=O+1}if(H==0&&_1==0&&(g1=v1,M1=w1,T1=A,j1=u1),i!=null&&i.sfb_count1>0&&u>=i.sfb_count1&&i.step[u]>0&&ue>=i.step[u]?(H!=0&&(j(H,s,T1,j1,g1,M1),H=0,g1=v1,M1=w1,T1=A,j1=u1),_1+=t):(_1!=0&&(U(_1,s,T1,j1,g1,M1),_1=0,g1=v1,M1=w1,T1=A,j1=u1),H+=t),t<=0){_1!=0&&(U(_1,s,T1,j1,g1,M1),_1=0),H!=0&&(j(H,s,T1,j1,g1,M1),H=0);break}}u<=O&&(w1+=a.width[u],u1+=a.width[u],a1+=a.width[u])}H!=0&&(j(H,s,T1,j1,g1,M1),H=0),_1!=0&&(U(_1,s,T1,j1,g1,M1),_1=0)}function Z(A,_,s){var a=0,i=0;do{var u=A[_++],O=A[_++];a<u&&(a=u),i<O&&(i=O)}while(_<s);return a<i&&(a=i),a}function n(A,_,s,a,i,u){var O=W.ht[a].xlen*65536+W.ht[i].xlen,a1=0,T;do{var H=A[_++],_1=A[_++];H!=0&&(H>14&&(H=15,a1+=O),H*=16),_1!=0&&(_1>14&&(_1=15,a1+=O),H+=_1),a1+=W.largetbl[H]}while(_<s);return T=a1&65535,a1>>=16,a1>T&&(a1=T,a=i),u.bits+=a1,a}function r(A,_,s,a){var i=0,u=W.ht[1].hlen;do{var O=A[_+0]*2+A[_+1];_+=2,i+=u[O]}while(_<s);return a.bits+=i,1}function e(A,_,s,a,i){var u=0,O,a1=W.ht[a].xlen,T;a==2?T=W.table23:T=W.table56;do{var H=A[_+0]*a1+A[_+1];_+=2,u+=T[H]}while(_<s);return O=u&65535,u>>=16,u>O&&(u=O,a++),i.bits+=u,a}function m(A,_,s,a,i){var u=0,O=0,a1=0,T=W.ht[a].xlen,H=W.ht[a].hlen,_1=W.ht[a+1].hlen,u1=W.ht[a+2].hlen;do{var v1=A[_+0]*T+A[_+1];_+=2,u+=H[v1],O+=_1[v1],a1+=u1[v1]}while(_<s);var w1=a;return u>O&&(u=O,w1++),u>a1&&(u=a1,w1=a+2),i.bits+=u,w1}var x=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function b(A,_,s,a){var i=Z(A,_,s);switch(i){case 0:return i;case 1:return r(A,_,s,a);case 2:case 3:return e(A,_,s,x[i-1],a);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return m(A,_,s,x[i-1],a);default:if(i>K.IXMAX_VAL)return a.bits=K.LARGE_BITS,-1;i-=15;var u;for(u=24;u<32&&!(W.ht[u].linmax>=i);u++);var O;for(O=u-8;O<24&&!(W.ht[O].linmax>=i);O++);return n(A,_,s,O,u,a)}}this.noquant_count_bits=function(A,_,s){var a=_.l3_enc,i=Math.min(576,_.max_nonzero_coeff+2>>1<<1);for(s!=null&&(s.sfb_count1=0);i>1&&!(a[i-1]|a[i-2]);i-=2);_.count1=i;for(var u=0,O=0;i>3;i-=4){var a1;if(((a[i-1]|a[i-2]|a[i-3]|a[i-4])&2147483647)>1)break;a1=((a[i-4]*2+a[i-3])*2+a[i-2])*2+a[i-1],u+=W.t32l[a1],O+=W.t33l[a1]}var T=u;if(_.count1table_select=0,u>O&&(T=O,_.count1table_select=1),_.count1bits=T,_.big_values=i,i==0)return T;if(_.block_type==G.SHORT_TYPE)u=3*A.scalefac_band.s[3],u>_.big_values&&(u=_.big_values),O=_.big_values;else if(_.block_type==G.NORM_TYPE){if(u=_.region0_count=A.bv_scf[i-2],O=_.region1_count=A.bv_scf[i-1],i1(u+O+2<G.SBPSY_l),O=A.scalefac_band.l[u+O+2],u=A.scalefac_band.l[u+1],O<i){var H=new h(T);_.table_select[2]=b(a,O,i,H),T=H.bits}}else _.region0_count=7,_.region1_count=G.SBMAX_l-1-7-1,u=A.scalefac_band.l[8],O=i,u>O&&(u=O);if(u=Math.min(u,i),O=Math.min(O,i),0<u){var H=new h(T);_.table_select[0]=b(a,0,u,H),T=H.bits}if(u<O){var H=new h(T);_.table_select[1]=b(a,u,O,H),T=H.bits}if(A.use_best_huffman==2&&(_.part2_3_length=T,best_huffman_divide(A,_),T=_.part2_3_length),s!=null&&_.block_type==G.NORM_TYPE){for(var _1=0;A.scalefac_band.l[_1]<_.big_values;)_1++;s.sfb_count1=_1}return T},this.count_bits=function(A,_,s,a){var i=s.l3_enc,u=K.IXMAX_VAL/p.IPOW20(s.global_gain);if(s.xrpow_max>u)return K.LARGE_BITS;if(n1(_,i,p.IPOW20(s.global_gain),s,a),A.substep_shaping&2)for(var O=0,a1=s.global_gain+s.scalefac_scale,T=.634521682242439/p.IPOW20(a1),H=0;H<s.sfbmax;H++){var _1=s.width[H];if(A.pseudohalf[H]==0)O+=_1;else{var u1;for(u1=O,O+=_1;u1<O;++u1)i[u1]=_[u1]>=T?i[u1]:0}}return this.noquant_count_bits(A,s,a)};function S(A,_,s,a,i,u,O){for(var a1=_.big_values,T=0;T<=22;T++)a[T]=K.LARGE_BITS;for(var T=0;T<16;T++){var H=A.scalefac_band.l[T+1];if(H>=a1)break;var _1=0,u1=new h(_1),v1=b(s,0,H,u1);_1=u1.bits;for(var w1=0;w1<8;w1++){var g1=A.scalefac_band.l[T+w1+2];if(g1>=a1)break;var M1=_1;u1=new h(M1);var T1=b(s,H,g1,u1);M1=u1.bits,a[T+w1]>M1&&(a[T+w1]=M1,i[T+w1]=T,u[T+w1]=v1,O[T+w1]=T1)}}}function d(A,_,s,a,i,u,O,a1){for(var T=_.big_values,H=2;H<G.SBMAX_l+1;H++){var _1=A.scalefac_band.l[H];if(_1>=T)break;var u1=i[H-2]+_.count1bits;if(s.part2_3_length<=u1)break;var v1=new h(u1),w1=b(a,_1,T,v1);u1=v1.bits,!(s.part2_3_length<=u1)&&(s.assign(_),s.part2_3_length=u1,s.region0_count=u[H-2],s.region1_count=H-2-u[H-2],s.table_select[0]=O[H-2],s.table_select[1]=a1[H-2],s.table_select[2]=w1)}}this.best_huffman_divide=function(A,_){var s=new Y,a=_.l3_enc,i=$(23),u=$(23),O=$(23),a1=$(23);if(!(_.block_type==G.SHORT_TYPE&&A.mode_gr==1)){s.assign(_),_.block_type==G.NORM_TYPE&&(S(A,_,a,i,u,O,a1),d(A,s,_,a,i,u,O,a1));var T=s.big_values;if(!(T==0||(a[T-2]|a[T-1])>1)&&(T=_.count1+2,!(T>576))){s.assign(_),s.count1=T;for(var H=0,_1=0;T>s.big_values;T-=4){var u1=((a[T-4]*2+a[T-3])*2+a[T-2])*2+a[T-1];H+=W.t32l[u1],_1+=W.t33l[u1]}if(s.big_values=T,s.count1table_select=0,H>_1&&(H=_1,s.count1table_select=1),s.count1bits=H,s.block_type==G.NORM_TYPE)d(A,s,_,a,i,u,O,a1);else{if(s.part2_3_length=H,H=A.scalefac_band.l[8],H>T&&(H=T),H>0){var v1=new h(s.part2_3_length);s.table_select[0]=b(a,0,H,v1),s.part2_3_length=v1.bits}if(T>H){var v1=new h(s.part2_3_length);s.table_select[1]=b(a,H,T,v1),s.part2_3_length=v1.bits}_.part2_3_length>s.part2_3_length&&_.assign(s)}}}};var F=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],L=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],y=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],c=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];h1.slen1_tab=y,h1.slen2_tab=c;function w(A,_){for(var s,a=_.tt[1][A],i=_.tt[0][A],u=0;u<W.scfsi_band.length-1;u++){for(s=W.scfsi_band[u];s<W.scfsi_band[u+1]&&!(i.scalefac[s]!=a.scalefac[s]&&a.scalefac[s]>=0);s++);if(s==W.scfsi_band[u+1]){for(s=W.scfsi_band[u];s<W.scfsi_band[u+1];s++)a.scalefac[s]=-1;_.scfsi[A][u]=1}}var O=0,a1=0;for(s=0;s<11;s++)a.scalefac[s]!=-1&&(a1++,O<a.scalefac[s]&&(O=a.scalefac[s]));for(var T=0,H=0;s<G.SBPSY_l;s++)a.scalefac[s]!=-1&&(H++,T<a.scalefac[s]&&(T=a.scalefac[s]));for(var u=0;u<16;u++)if(O<F[u]&&T<L[u]){var _1=y[u]*a1+c[u]*H;a.part2_length>_1&&(a.part2_length=_1,a.scalefac_compress=u)}}this.best_scalefac_store=function(A,_,s,a){var i=a.tt[_][s],u,O,a1,T,H=0;for(a1=0,u=0;u<i.sfbmax;u++){var _1=i.width[u];for(a1+=_1,T=-_1;T<0&&i.l3_enc[T+a1]==0;T++);T==0&&(i.scalefac[u]=H=-2)}if(i.scalefac_scale==0&&i.preflag==0){var u1=0;for(u=0;u<i.sfbmax;u++)i.scalefac[u]>0&&(u1|=i.scalefac[u]);if(!(u1&1)&&u1!=0){for(u=0;u<i.sfbmax;u++)i.scalefac[u]>0&&(i.scalefac[u]>>=1);i.scalefac_scale=H=1}}if(i.preflag==0&&i.block_type!=G.SHORT_TYPE&&A.mode_gr==2){for(u=11;u<G.SBPSY_l&&!(i.scalefac[u]<p.pretab[u]&&i.scalefac[u]!=-2);u++);if(u==G.SBPSY_l){for(u=11;u<G.SBPSY_l;u++)i.scalefac[u]>0&&(i.scalefac[u]-=p.pretab[u]);i.preflag=H=1}}for(O=0;O<4;O++)a.scfsi[s][O]=0;for(A.mode_gr==2&&_==1&&a.tt[0][s].block_type!=G.SHORT_TYPE&&a.tt[1][s].block_type!=G.SHORT_TYPE&&(w(s,a),H=0),u=0;u<i.sfbmax;u++)i.scalefac[u]==-2&&(i.scalefac[u]=0);H!=0&&(A.mode_gr==2?this.scale_bitcount(i):this.scale_bitcount_lsf(A,i))};function g(A,_){for(var s=0;s<_;++s)if(A[s]<0)return!1;return!0}var M=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],X=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],P=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(A){var _,s,a=0,i=0,u,O=A.scalefac;if(i1(g(O,A.sfbmax)),A.block_type==G.SHORT_TYPE)u=M,A.mixed_block_flag!=0&&(u=X);else if(u=P,A.preflag==0){for(s=11;s<G.SBPSY_l&&!(O[s]<p.pretab[s]);s++);if(s==G.SBPSY_l)for(A.preflag=1,s=11;s<G.SBPSY_l;s++)O[s]-=p.pretab[s]}for(s=0;s<A.sfbdivide;s++)a<O[s]&&(a=O[s]);for(;s<A.sfbmax;s++)i<O[s]&&(i=O[s]);for(A.part2_length=K.LARGE_BITS,_=0;_<16;_++)a<F[_]&&i<L[_]&&A.part2_length>u[_]&&(A.part2_length=u[_],A.scalefac_compress=_);return A.part2_length==K.LARGE_BITS};var E=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(A,_){var s,a,i,u,O,a1,T,H,_1=$(4),u1=_.scalefac;for(_.preflag!=0?s=2:s=0,T=0;T<4;T++)_1[T]=0;if(_.block_type==G.SHORT_TYPE){a=1;var v1=p.nr_of_sfb_block[s][a];for(H=0,i=0;i<4;i++)for(u=v1[i]/3,T=0;T<u;T++,H++)for(O=0;O<3;O++)u1[H*3+O]>_1[i]&&(_1[i]=u1[H*3+O])}else{a=0;var v1=p.nr_of_sfb_block[s][a];for(H=0,i=0;i<4;i++)for(u=v1[i],T=0;T<u;T++,H++)u1[H]>_1[i]&&(_1[i]=u1[H])}for(a1=!1,i=0;i<4;i++)_1[i]>E[s][i]&&(a1=!0);if(!a1){var w1,g1,M1,T1;for(_.sfb_partition_table=p.nr_of_sfb_block[s][a],i=0;i<4;i++)_.slen[i]=z[_1[i]];switch(w1=_.slen[0],g1=_.slen[1],M1=_.slen[2],T1=_.slen[3],s){case 0:_.scalefac_compress=(w1*5+g1<<4)+(M1<<2)+T1;break;case 1:_.scalefac_compress=400+(w1*5+g1<<2)+M1;break;case 2:_.scalefac_compress=500+w1*3+g1;break;default:C.err.printf(`intensity stereo not implemented yet
`);break}}if(!a1)for(i1(_.sfb_partition_table!=null),_.part2_length=0,i=0;i<4;i++)_.part2_length+=_.slen[i]*_.sfb_partition_table[i];return a1};var z=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(A){for(var _=2;_<=576;_+=2){for(var s=0,a;A.scalefac_band.l[++s]<_;);for(a=J[s][0];A.scalefac_band.l[a+1]>_;)a--;for(a<0&&(a=J[s][0]),A.bv_scf[_-2]=a,a=J[s][1];A.scalefac_band.l[a+A.bv_scf[_-2]+2]>_;)a--;a<0&&(a=J[s][1]),A.bv_scf[_-1]=a}}}return Ra=h1,Ra}var Aa,o0;function Xa(){if(o0)return Aa;o0=1;var B=Q1,C=B.System,D=B.Arrays,$=B.new_byte,i1=B.new_float_n,G=B.new_int,W=B.assert,Y=N0(),K=Na,h1=te(),p=_a;h.EQ=function(J,U){return Math.abs(J)>Math.abs(U)?Math.abs(J-U)<=Math.abs(J)*1e-6:Math.abs(J-U)<=Math.abs(U)*1e-6},h.NEQ=function(J,U){return!h.EQ(J,U)};function h(){var J=Oa(),U=this,j=32773,n1=null,Z=null,n=null,r=null;this.setModules=function(_,s,a,i){n1=_,Z=s,n=a,r=i};var e=null,m=0,x=0,b=0;this.getframebits=function(_){var s=_.internal_flags,a;s.bitrate_index!=0?a=K.bitrate_table[_.version][s.bitrate_index]:a=_.brate;var i=0|(_.version+1)*72e3*a/_.out_samplerate+s.padding;return 8*i};function S(_){C.arraycopy(_.header[_.w_ptr].buf,0,e,x,_.sideinfo_len),x+=_.sideinfo_len,m+=_.sideinfo_len*8,_.w_ptr=_.w_ptr+1&p.MAX_HEADER_BUF-1}function d(_,s,a){for(;a>0;){var i;b==0&&(b=8,x++,W(x<J.LAME_MAXMP3BUFFER),W(_.header[_.w_ptr].write_timing>=m),_.header[_.w_ptr].write_timing==m&&S(_),e[x]=0),i=Math.min(a,b),a-=i,b-=i,e[x]|=s>>a<<b,m+=i}}function F(_,s,a){for(;a>0;){var i;b==0&&(b=8,x++,W(x<J.LAME_MAXMP3BUFFER),e[x]=0),i=Math.min(a,b),a-=i,b-=i,e[x]|=s>>a<<b,m+=i}}function L(_,s){var a=_.internal_flags,i;if(s>=8&&(d(a,76,8),s-=8),s>=8&&(d(a,65,8),s-=8),s>=8&&(d(a,77,8),s-=8),s>=8&&(d(a,69,8),s-=8),s>=32){var u=n.getLameShortVersion();if(s>=32)for(i=0;i<u.length&&s>=8;++i)s-=8,d(a,u.charAt(i),8)}for(;s>=1;s-=1)d(a,a.ancillary_flag,1),a.ancillary_flag^=_.disable_reservoir?0:1}function y(_,s,a){for(var i=_.header[_.h_ptr].ptr;a>0;){var u=Math.min(a,8-(i&7));a-=u,_.header[_.h_ptr].buf[i>>3]|=s>>a<<8-(i&7)-u,i+=u}_.header[_.h_ptr].ptr=i}function c(_,s){_<<=8;for(var a=0;a<8;a++)_<<=1,s<<=1,(s^_)&65536&&(s^=j);return s}this.CRC_writeheader=function(_,s){var a=65535;a=c(s[2]&255,a),a=c(s[3]&255,a);for(var i=6;i<_.sideinfo_len;i++)a=c(s[i]&255,a);s[4]=byte(a>>8),s[5]=byte(a&255)};function w(_,s){var a=_.internal_flags,i,u,O;if(i=a.l3_side,a.header[a.h_ptr].ptr=0,D.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),_.out_samplerate<16e3?y(a,4094,12):y(a,4095,12),y(a,_.version,1),y(a,1,2),y(a,_.error_protection?0:1,1),y(a,a.bitrate_index,4),y(a,a.samplerate_index,2),y(a,a.padding,1),y(a,_.extension,1),y(a,_.mode.ordinal(),2),y(a,a.mode_ext,2),y(a,_.copyright,1),y(a,_.original,1),y(a,_.emphasis,2),_.error_protection&&y(a,0,16),_.version==1){for(W(i.main_data_begin>=0),y(a,i.main_data_begin,9),a.channels_out==2?y(a,i.private_bits,3):y(a,i.private_bits,5),O=0;O<a.channels_out;O++){var a1;for(a1=0;a1<4;a1++)y(a,i.scfsi[O][a1],1)}for(u=0;u<2;u++)for(O=0;O<a.channels_out;O++){var T=i.tt[u][O];y(a,T.part2_3_length+T.part2_length,12),y(a,T.big_values/2,9),y(a,T.global_gain,8),y(a,T.scalefac_compress,4),T.block_type!=h1.NORM_TYPE?(y(a,1,1),y(a,T.block_type,2),y(a,T.mixed_block_flag,1),T.table_select[0]==14&&(T.table_select[0]=16),y(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),y(a,T.table_select[1],5),y(a,T.subblock_gain[0],3),y(a,T.subblock_gain[1],3),y(a,T.subblock_gain[2],3)):(y(a,0,1),T.table_select[0]==14&&(T.table_select[0]=16),y(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),y(a,T.table_select[1],5),T.table_select[2]==14&&(T.table_select[2]=16),y(a,T.table_select[2],5),W(0<=T.region0_count&&T.region0_count<16),W(0<=T.region1_count&&T.region1_count<8),y(a,T.region0_count,4),y(a,T.region1_count,3)),y(a,T.preflag,1),y(a,T.scalefac_scale,1),y(a,T.count1table_select,1)}}else for(W(i.main_data_begin>=0),y(a,i.main_data_begin,8),y(a,i.private_bits,a.channels_out),u=0,O=0;O<a.channels_out;O++){var T=i.tt[u][O];y(a,T.part2_3_length+T.part2_length,12),y(a,T.big_values/2,9),y(a,T.global_gain,8),y(a,T.scalefac_compress,9),T.block_type!=h1.NORM_TYPE?(y(a,1,1),y(a,T.block_type,2),y(a,T.mixed_block_flag,1),T.table_select[0]==14&&(T.table_select[0]=16),y(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),y(a,T.table_select[1],5),y(a,T.subblock_gain[0],3),y(a,T.subblock_gain[1],3),y(a,T.subblock_gain[2],3)):(y(a,0,1),T.table_select[0]==14&&(T.table_select[0]=16),y(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),y(a,T.table_select[1],5),T.table_select[2]==14&&(T.table_select[2]=16),y(a,T.table_select[2],5),W(0<=T.region0_count&&T.region0_count<16),W(0<=T.region1_count&&T.region1_count<8),y(a,T.region0_count,4),y(a,T.region1_count,3)),y(a,T.scalefac_scale,1),y(a,T.count1table_select,1)}_.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var H=a.h_ptr;W(a.header[H].ptr==a.sideinfo_len*8),a.h_ptr=H+1&p.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[H].write_timing+s,a.h_ptr==a.w_ptr&&C.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function g(_,s){var a=K.ht[s.count1table_select+32],i,u=0,O=s.big_values,a1=s.big_values;for(W(s.count1table_select<2),i=(s.count1-s.big_values)/4;i>0;--i){var T=0,H=0,_1;_1=s.l3_enc[O+0],_1!=0&&(H+=8,s.xr[a1+0]<0&&T++),_1=s.l3_enc[O+1],_1!=0&&(H+=4,T*=2,s.xr[a1+1]<0&&T++),_1=s.l3_enc[O+2],_1!=0&&(H+=2,T*=2,s.xr[a1+2]<0&&T++),_1=s.l3_enc[O+3],_1!=0&&(H++,T*=2,s.xr[a1+3]<0&&T++),O+=4,a1+=4,d(_,T+a.table[H],a.hlen[H]),u+=a.hlen[H]}return u}function M(_,s,a,i,u){var O=K.ht[s],a1=0;if(s==0)return a1;for(var T=a;T<i;T+=2){var H=0,_1=0,u1=O.xlen,v1=O.xlen,w1=0,g1=u.l3_enc[T],M1=u.l3_enc[T+1];if(g1!=0&&(u.xr[T]<0&&w1++,H--),s>15){if(g1>14){var T1=g1-15;W(T1<=O.linmax),w1|=T1<<1,_1=u1,g1=15}if(M1>14){var j1=M1-15;W(j1<=O.linmax),w1<<=u1,w1|=j1,_1+=u1,M1=15}v1=16}M1!=0&&(w1<<=1,u.xr[T+1]<0&&w1++,H--),g1=g1*v1+M1,_1-=H,H+=O.hlen[g1],d(_,O.table[g1],H),d(_,w1,_1),a1+=H+_1}return a1}function X(_,s){var a=3*_.scalefac_band.s[3];a>s.big_values&&(a=s.big_values);var i=M(_,s.table_select[0],0,a,s);return i+=M(_,s.table_select[1],a,s.big_values,s),i}function P(_,s){var a,i,u,O;a=s.big_values;var a1=s.region0_count+1;return W(a1<_.scalefac_band.l.length),u=_.scalefac_band.l[a1],a1+=s.region1_count+1,W(a1<_.scalefac_band.l.length),O=_.scalefac_band.l[a1],u>a&&(u=a),O>a&&(O=a),i=M(_,s.table_select[0],0,u,s),i+=M(_,s.table_select[1],u,O,s),i+=M(_,s.table_select[2],O,a,s),i}function E(_){var s,a,i,u,O=0,a1=_.internal_flags,T=a1.l3_side;if(_.version==1)for(s=0;s<2;s++)for(a=0;a<a1.channels_out;a++){var H=T.tt[s][a],_1=Y.slen1_tab[H.scalefac_compress],u1=Y.slen2_tab[H.scalefac_compress];for(u=0,i=0;i<H.sfbdivide;i++)H.scalefac[i]!=-1&&(d(a1,H.scalefac[i],_1),u+=_1);for(;i<H.sfbmax;i++)H.scalefac[i]!=-1&&(d(a1,H.scalefac[i],u1),u+=u1);W(u==H.part2_length),H.block_type==h1.SHORT_TYPE?u+=X(a1,H):u+=P(a1,H),u+=g(a1,H),W(u==H.part2_3_length+H.part2_length),O+=u}else for(s=0,a=0;a<a1.channels_out;a++){var H=T.tt[s][a],v1,w1,g1=0;if(W(H.sfb_partition_table!=null),u=0,i=0,w1=0,H.block_type==h1.SHORT_TYPE){for(;w1<4;w1++){var M1=H.sfb_partition_table[w1]/3,T1=H.slen[w1];for(v1=0;v1<M1;v1++,i++)d(a1,Math.max(H.scalefac[i*3+0],0),T1),d(a1,Math.max(H.scalefac[i*3+1],0),T1),d(a1,Math.max(H.scalefac[i*3+2],0),T1),g1+=3*T1}u+=X(a1,H)}else{for(;w1<4;w1++){var M1=H.sfb_partition_table[w1],T1=H.slen[w1];for(v1=0;v1<M1;v1++,i++)d(a1,Math.max(H.scalefac[i],0),T1),g1+=T1}u+=P(a1,H)}u+=g(a1,H),W(u==H.part2_3_length),W(g1==H.part2_length),O+=g1+u}return O}function z(){this.total=0}function A(_,s){var a=_.internal_flags,i,u,O,a1,T;return T=a.w_ptr,a1=a.h_ptr-1,a1==-1&&(a1=p.MAX_HEADER_BUF-1),i=a.header[a1].write_timing-m,s.total=i,i>=0&&(u=1+a1-T,a1<T&&(u=1+a1-T+p.MAX_HEADER_BUF),i-=u*8*a.sideinfo_len),O=U.getframebits(_),i+=O,s.total+=O,s.total%8!=0?s.total=1+s.total/8:s.total=s.total/8,s.total+=x+1,i<0&&C.err.println(`strange error flushing buffer ... 
`),i}this.flush_bitstream=function(_){var s=_.internal_flags,a,i,u=s.h_ptr-1;if(u==-1&&(u=p.MAX_HEADER_BUF-1),a=s.l3_side,!((i=A(_,new z))<0)){if(L(_,i),W(s.header[u].write_timing+this.getframebits(_)==m),s.ResvSize=0,a.main_data_begin=0,s.findReplayGain){var O=n1.GetTitleGain(s.rgdata);W(NEQ(O,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),s.RadioGain=Math.floor(O*10+.5)|0}s.findPeakSample&&(s.noclipGainChange=Math.ceil(Math.log10(s.PeakSample/32767)*20*10)|0,s.noclipGainChange>0&&(EQ(_.scale,1)||EQ(_.scale,0))?s.noclipScale=Math.floor(32767/s.PeakSample*100)/100:s.noclipScale=-1)}},this.add_dummy_byte=function(_,s,a){for(var i=_.internal_flags,u;a-- >0;)for(F(i,s,8),u=0;u<p.MAX_HEADER_BUF;++u)i.header[u].write_timing+=8},this.format_bitstream=function(_){var s=_.internal_flags,a;a=s.l3_side;var i=this.getframebits(_);L(_,a.resvDrain_pre),w(_,i);var u=8*s.sideinfo_len;if(u+=E(_),L(_,a.resvDrain_post),u+=a.resvDrain_post,a.main_data_begin+=(i-u)/8,A(_,new z)!=s.ResvSize&&C.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=s.ResvSize&&(C.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,s.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*s.sideinfo_len,u-a.resvDrain_post-8*s.sideinfo_len,u,u%8,i),C.err.println("This is a fatal error.  It has several possible causes:"),C.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),C.err.println(" 9%%  Your system is overclocked"),C.err.println(" 1%%  bug in LAME encoding library"),s.ResvSize=a.main_data_begin*8),m>1e9){var O;for(O=0;O<p.MAX_HEADER_BUF;++O)s.header[O].write_timing-=m;m=0}return 0},this.copy_buffer=function(_,s,a,i,u){var O=x+1;if(O<=0)return 0;if(i!=0&&O>i)return-1;if(C.arraycopy(e,0,s,a,O),x=-1,b=0,u!=0){var a1=G(1);if(a1[0]=_.nMusicCRC,r.updateMusicCRC(a1,s,a,O),_.nMusicCRC=a1[0],O>0&&(_.VBR_seek_table.nBytesWritten+=O),_.decode_on_the_fly){for(var T=i1([2,1152]),H=O,_1=-1,u1;_1!=0;)if(_1=Z.hip_decode1_unclipped(_.hip,s,a,H,T[0],T[1]),H=0,_1==-1&&(_1=0),_1>0){if(_.findPeakSample){for(u1=0;u1<_1;u1++)T[0][u1]>_.PeakSample?_.PeakSample=T[0][u1]:-T[0][u1]>_.PeakSample&&(_.PeakSample=-T[0][u1]);if(_.channels_out>1)for(u1=0;u1<_1;u1++)T[1][u1]>_.PeakSample?_.PeakSample=T[1][u1]:-T[1][u1]>_.PeakSample&&(_.PeakSample=-T[1][u1])}if(_.findReplayGain&&n1.AnalyzeSamples(_.rgdata,T[0],0,T[1],0,_1,_.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return O},this.init_bit_stream_w=function(_){e=$(J.LAME_MAXMP3BUFFER),_.h_ptr=_.w_ptr=0,_.header[_.h_ptr].write_timing=0,x=-1,b=0,m=0}}return Aa=h,Aa}var Ba,l0;function Oa(){if(l0)return Ba;l0=1;var B=Q1,C=B.System,D=B.VbrMode,$=B.ShortBlock,i1=B.new_float,G=B.new_int_n,W=B.new_short_n,Y=B.assert,K=J0,h1=et,p=_a,h=At,J=Tt,U=Vt,j=Xa(),n1=Na,Z=te();function n(){var r=Ke,e=this,m=128*1024;n.V9=410,n.V8=420,n.V7=430,n.V6=440,n.V5=450,n.V4=460,n.V3=470,n.V2=480,n.V1=490,n.V0=500,n.R3MIX=1e3,n.STANDARD=1001,n.EXTREME=1002,n.INSANE=1003,n.STANDARD_FAST=1004,n.EXTREME_FAST=1005,n.MEDIUM=1006,n.MEDIUM_FAST=1007;var x=16384+m;n.LAME_MAXMP3BUFFER=x;var b,S,d,F,L,y=new K,c,w,g;this.enc=new Z,this.setModules=function(t,o,d1,R1,V1,E1,k1,B1,L1){b=t,S=o,d=d1,F=R1,L=V1,c=E1,w=B1,g=L1,this.enc.setModules(S,y,F,c)};function M(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=i1(Z.SBMAX_l),this.bo_s_weight=i1(Z.SBMAX_s)}function X(){this.lowerlimit=0}function P(t,o){this.lowpass=o}var E=4294479419;function z(t){var o;return t.class_id=E,o=t.internal_flags=new p,t.mode=r.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,o.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=D.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,o.VBR_min_bitrate=1,o.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,o.resample_ratio=1,o.OldValue[0]=180,o.OldValue[1]=180,o.CurrentStep[0]=4,o.CurrentStep[1]=4,o.masking_lower=1,o.nsPsy.attackthre=-1,o.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,o.mf_samples_to_encode=Z.ENCDELAY+Z.POSTDELAY,t.encoder_padding=0,o.mf_size=Z.ENCDELAY-Z.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,o.decode_on_the_fly=!1,o.findReplayGain=!1,o.findPeakSample=!1,o.RadioGain=0,o.AudiophileGain=0,o.noclipGainChange=0,o.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0}this.lame_init=function(){var t=new h1;return z(t),t.lame_allocated_gfp=1,t};function A(t){return t>1?0:t<=0?1:Math.cos(Math.PI/2*t)}this.nearestBitrateFullIndex=function(t){var o=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],d1=0,R1=0,V1=0,E1=0;E1=o[16],V1=16,R1=o[16],d1=16;for(var k1=0;k1<16;k1++)if(Math.max(t,o[k1+1])!=t){E1=o[k1+1],V1=k1+1,R1=o[k1],d1=k1;break}return E1-t>t-R1?d1:V1};function _(t,o){var d1=44100;return o>=48e3?d1=48e3:o>=44100?d1=44100:o>=32e3?d1=32e3:o>=24e3?d1=24e3:o>=22050?d1=22050:o>=16e3?d1=16e3:o>=12e3?d1=12e3:o>=11025?d1=11025:o>=8e3&&(d1=8e3),t==-1?d1:(t<=15960&&(d1=44100),t<=15250&&(d1=32e3),t<=11220&&(d1=24e3),t<=9970&&(d1=22050),t<=7230&&(d1=16e3),t<=5420&&(d1=12e3),t<=4510&&(d1=11025),t<=3970&&(d1=8e3),o<d1?o>44100?48e3:o>32e3?44100:o>24e3?32e3:o>22050?24e3:o>16e3?22050:o>12e3?16e3:o>11025?12e3:o>8e3?11025:8e3:d1)}function s(t,o){switch(t){case 44100:return o.version=1,0;case 48e3:return o.version=1,1;case 32e3:return o.version=1,2;case 22050:return o.version=0,0;case 24e3:return o.version=0,1;case 16e3:return o.version=0,2;case 11025:return o.version=0,0;case 12e3:return o.version=0,1;case 8e3:return o.version=0,2;default:return o.version=0,-1}}function a(t,o,d1){d1<16e3&&(o=2);for(var R1=n1.bitrate_table[o][1],V1=2;V1<=14;V1++)n1.bitrate_table[o][V1]>0&&Math.abs(n1.bitrate_table[o][V1]-t)<Math.abs(R1-t)&&(R1=n1.bitrate_table[o][V1]);return R1}function i(t,o,d1){d1<16e3&&(o=2);for(var R1=0;R1<=14;R1++)if(n1.bitrate_table[o][R1]>0&&n1.bitrate_table[o][R1]==t)return R1;return-1}function u(t,o){var d1=[new P(8,2e3),new P(16,3700),new P(24,3900),new P(32,5500),new P(40,7e3),new P(48,7500),new P(56,1e4),new P(64,11e3),new P(80,13500),new P(96,15100),new P(112,15600),new P(128,17e3),new P(160,17500),new P(192,18600),new P(224,19400),new P(256,19700),new P(320,20500)],R1=e.nearestBitrateFullIndex(o);t.lowerlimit=d1[R1].lowpass}function O(t){var o=t.internal_flags,d1=32,R1=-1;if(o.lowpass1>0){for(var V1=999,E1=0;E1<=31;E1++){var k1=E1/31;k1>=o.lowpass2&&(d1=Math.min(d1,E1)),o.lowpass1<k1&&k1<o.lowpass2&&(V1=Math.min(V1,E1))}V1==999?o.lowpass1=(d1-.75)/31:o.lowpass1=(V1-.75)/31,o.lowpass2=d1/31}if(o.highpass2>0&&o.highpass2<.9*(.75/31)&&(o.highpass1=0,o.highpass2=0,C.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),o.highpass2>0){for(var B1=-1,E1=0;E1<=31;E1++){var k1=E1/31;k1<=o.highpass1&&(R1=Math.max(R1,E1)),o.highpass1<k1&&k1<o.highpass2&&(B1=Math.max(B1,E1))}o.highpass1=R1/31,B1==-1?o.highpass2=(R1+.75)/31:o.highpass2=(B1+.75)/31}for(var E1=0;E1<32;E1++){var L1,P1,k1=E1/31;o.highpass2>o.highpass1?L1=A((o.highpass2-k1)/(o.highpass2-o.highpass1+1e-20)):L1=1,o.lowpass2>o.lowpass1?P1=A((k1-o.lowpass1)/(o.lowpass2-o.lowpass1+1e-20)):P1=1,o.amp_filter[E1]=L1*P1}}function a1(t){var o=t.internal_flags;switch(t.quality){default:case 9:o.psymodel=0,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 8:t.quality=7;case 7:o.psymodel=1,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 6:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 5:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 4:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 3:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 2:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 1:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 0:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break}}function T(t){var o=t.internal_flags;t.frameNum=0,t.write_id3tag_automatic&&w.id3tag_write_v2(t),o.bitrate_stereoMode_Hist=G([16,5]),o.bitrate_blockType_Hist=G([16,6]),o.PeakSample=0,t.bWriteVbrTag&&c.InitVbrTag(t)}this.lame_init_params=function(t){var o=t.internal_flags;if(o.Class_ID=0,o.ATH==null&&(o.ATH=new h),o.PSY==null&&(o.PSY=new M),o.rgdata==null&&(o.rgdata=new J),o.channels_in=t.num_channels,o.channels_in==1&&(t.mode=r.MONO),o.channels_out=t.mode==r.MONO?1:2,o.mode_ext=Z.MPG_MD_MS_LR,t.mode==r.MONO&&(t.force_ms=!1),t.VBR==D.vbr_off&&t.VBR_mean_bitrate_kbps!=128&&t.brate==0&&(t.brate=t.VBR_mean_bitrate_kbps),t.VBR==D.vbr_off||t.VBR==D.vbr_mtrh||t.VBR==D.vbr_mt||(t.free_format=!1),t.VBR==D.vbr_off&&t.brate==0&&j.EQ(t.compression_ratio,0)&&(t.compression_ratio=11.025),t.VBR==D.vbr_off&&t.compression_ratio>0&&(t.out_samplerate==0&&(t.out_samplerate=map2MP3Frequency(int(.97*t.in_samplerate))),t.brate=0|t.out_samplerate*16*o.channels_out/(1e3*t.compression_ratio),o.samplerate_index=s(t.out_samplerate,t),t.free_format||(t.brate=a(t.brate,t.version,t.out_samplerate))),t.out_samplerate!=0&&(t.out_samplerate<16e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,64)):t.out_samplerate<32e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,160)):(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,32),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320))),t.lowpassfreq==0){var d1=16e3;switch(t.VBR){case D.vbr_off:{var R1=new X;u(R1,t.brate),d1=R1.lowerlimit;break}case D.vbr_abr:{var R1=new X;u(R1,t.VBR_mean_bitrate_kbps),d1=R1.lowerlimit;break}case D.vbr_rh:{var V1=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var E1=V1[t.VBR_q],k1=V1[t.VBR_q+1],B1=t.VBR_q_frac;d1=linear_int(E1,k1,B1)}else d1=19500;break}default:{var V1=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var E1=V1[t.VBR_q],k1=V1[t.VBR_q+1],B1=t.VBR_q_frac;d1=linear_int(E1,k1,B1)}else d1=19500}}t.mode==r.MONO&&(t.VBR==D.vbr_off||t.VBR==D.vbr_abr)&&(d1*=1.5),t.lowpassfreq=d1|0}if(t.out_samplerate==0&&(2*t.lowpassfreq>t.in_samplerate&&(t.lowpassfreq=t.in_samplerate/2),t.out_samplerate=_(t.lowpassfreq|0,t.in_samplerate)),t.lowpassfreq=Math.min(20500,t.lowpassfreq),t.lowpassfreq=Math.min(t.out_samplerate/2,t.lowpassfreq),t.VBR==D.vbr_off&&(t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.brate)),t.VBR==D.vbr_abr&&(t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.VBR_mean_bitrate_kbps)),t.bWriteVbrTag||(t.findReplayGain=!1,t.decode_on_the_fly=!1,o.findPeakSample=!1),o.findReplayGain=t.findReplayGain,o.decode_on_the_fly=t.decode_on_the_fly,o.decode_on_the_fly&&(o.findPeakSample=!0),o.findReplayGain&&b.InitGainAnalysis(o.rgdata,t.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return t.internal_flags=null,-6;switch(o.decode_on_the_fly&&!t.decode_only&&(o.hip!=null&&g.hip_decode_exit(o.hip),o.hip=g.hip_decode_init()),o.mode_gr=t.out_samplerate<=24e3?1:2,t.framesize=576*o.mode_gr,t.encoder_delay=Z.ENCDELAY,o.resample_ratio=t.in_samplerate/t.out_samplerate,t.VBR){case D.vbr_mt:case D.vbr_rh:case D.vbr_mtrh:{var L1=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];t.compression_ratio=L1[t.VBR_q]}break;case D.vbr_abr:t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.VBR_mean_bitrate_kbps);break;default:t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.brate);break}if(t.mode==r.NOT_SET&&(t.mode=r.JOINT_STEREO),t.highpassfreq>0?(o.highpass1=2*t.highpassfreq,t.highpasswidth>=0?o.highpass2=2*(t.highpassfreq+t.highpasswidth):o.highpass2=2*t.highpassfreq,o.highpass1/=t.out_samplerate,o.highpass2/=t.out_samplerate):(o.highpass1=0,o.highpass2=0),t.lowpassfreq>0?(o.lowpass2=2*t.lowpassfreq,t.lowpasswidth>=0?(o.lowpass1=2*(t.lowpassfreq-t.lowpasswidth),o.lowpass1<0&&(o.lowpass1=0)):o.lowpass1=2*t.lowpassfreq,o.lowpass1/=t.out_samplerate,o.lowpass2/=t.out_samplerate):(o.lowpass1=0,o.lowpass2=0),O(t),o.samplerate_index=s(t.out_samplerate,t),o.samplerate_index<0)return t.internal_flags=null,-1;if(t.VBR==D.vbr_off){if(t.free_format)o.bitrate_index=0;else if(t.brate=a(t.brate,t.version,t.out_samplerate),o.bitrate_index=i(t.brate,t.version,t.out_samplerate),o.bitrate_index<=0)return t.internal_flags=null,-1}else o.bitrate_index=1;t.analysis&&(t.bWriteVbrTag=!1),o.pinfo!=null&&(t.bWriteVbrTag=!1),S.init_bit_stream_w(o);for(var P1=o.samplerate_index+3*t.version+6*(t.out_samplerate<16e3?1:0),b1=0;b1<Z.SBMAX_l+1;b1++)o.scalefac_band.l[b1]=F.sfBandIndex[P1].l[b1];for(var b1=0;b1<Z.PSFB21+1;b1++){var C1=(o.scalefac_band.l[22]-o.scalefac_band.l[21])/Z.PSFB21,z1=o.scalefac_band.l[21]+b1*C1;o.scalefac_band.psfb21[b1]=z1}o.scalefac_band.psfb21[Z.PSFB21]=576;for(var b1=0;b1<Z.SBMAX_s+1;b1++)o.scalefac_band.s[b1]=F.sfBandIndex[P1].s[b1];for(var b1=0;b1<Z.PSFB12+1;b1++){var C1=(o.scalefac_band.s[13]-o.scalefac_band.s[12])/Z.PSFB12,z1=o.scalefac_band.s[12]+b1*C1;o.scalefac_band.psfb12[b1]=z1}o.scalefac_band.psfb12[Z.PSFB12]=192,t.version==1?o.sideinfo_len=o.channels_out==1?21:36:o.sideinfo_len=o.channels_out==1?13:21,t.error_protection&&(o.sideinfo_len+=2),T(t),o.Class_ID=E;{var l;for(l=0;l<19;l++)o.nsPsy.pefirbuf[l]=700*o.mode_gr*o.channels_out;t.ATHtype==-1&&(t.ATHtype=4)}switch(Y(t.VBR_q<=9),Y(t.VBR_q>=0),t.VBR){case D.vbr_mt:t.VBR=D.vbr_mtrh;case D.vbr_mtrh:{t.useTemporal==null&&(t.useTemporal=!1),d.apply_preset(t,500-t.VBR_q*10,0),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),t.quality<5&&(t.quality=0),t.quality>5&&(t.quality=5),o.PSY.mask_adjust=t.maskingadjust,o.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=t.out_samplerate>44e3,o.iteration_loop=new VBRNewIterationLoop(L);break}case D.vbr_rh:{d.apply_preset(t,500-t.VBR_q*10,0),o.PSY.mask_adjust=t.maskingadjust,o.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=t.out_samplerate>44e3,t.quality>6&&(t.quality=6),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),o.iteration_loop=new VBROldIterationLoop(L);break}default:{var f;o.sfb21_extra=!1,t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),f=t.VBR,f==D.vbr_off&&(t.VBR_mean_bitrate_kbps=t.brate),d.apply_preset(t,t.VBR_mean_bitrate_kbps,0),t.VBR=f,o.PSY.mask_adjust=t.maskingadjust,o.PSY.mask_adjust_short=t.maskingadjust_short,f==D.vbr_off?o.iteration_loop=new U(L):o.iteration_loop=new ABRIterationLoop(L);break}}if(Y(t.scale>=0),t.VBR!=D.vbr_off){if(o.VBR_min_bitrate=1,o.VBR_max_bitrate=14,t.out_samplerate<16e3&&(o.VBR_max_bitrate=8),t.VBR_min_bitrate_kbps!=0&&(t.VBR_min_bitrate_kbps=a(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),o.VBR_min_bitrate=i(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),o.VBR_min_bitrate<0)||t.VBR_max_bitrate_kbps!=0&&(t.VBR_max_bitrate_kbps=a(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),o.VBR_max_bitrate=i(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),o.VBR_max_bitrate<0))return-1;t.VBR_min_bitrate_kbps=n1.bitrate_table[t.version][o.VBR_min_bitrate],t.VBR_max_bitrate_kbps=n1.bitrate_table[t.version][o.VBR_max_bitrate],t.VBR_mean_bitrate_kbps=Math.min(n1.bitrate_table[t.version][o.VBR_max_bitrate],t.VBR_mean_bitrate_kbps),t.VBR_mean_bitrate_kbps=Math.max(n1.bitrate_table[t.version][o.VBR_min_bitrate],t.VBR_mean_bitrate_kbps)}return t.tune&&(o.PSY.mask_adjust+=t.tune_value_a,o.PSY.mask_adjust_short+=t.tune_value_a),a1(t),Y(t.scale>=0),t.athaa_type<0?o.ATH.useAdjust=3:o.ATH.useAdjust=t.athaa_type,o.ATH.aaSensitivityP=Math.pow(10,t.athaa_sensitivity/-10),t.short_blocks==null&&(t.short_blocks=$.short_block_allowed),t.short_blocks==$.short_block_allowed&&(t.mode==r.JOINT_STEREO||t.mode==r.STEREO)&&(t.short_blocks=$.short_block_coupled),t.quant_comp<0&&(t.quant_comp=1),t.quant_comp_short<0&&(t.quant_comp_short=0),t.msfix<0&&(t.msfix=0),t.exp_nspsytune=t.exp_nspsytune|1,t.internal_flags.nsPsy.attackthre<0&&(t.internal_flags.nsPsy.attackthre=K.NSATTACKTHRE),t.internal_flags.nsPsy.attackthre_s<0&&(t.internal_flags.nsPsy.attackthre_s=K.NSATTACKTHRE_S),Y(t.scale>=0),t.scale<0&&(t.scale=1),t.ATHtype<0&&(t.ATHtype=4),t.ATHcurve<0&&(t.ATHcurve=4),t.athaa_loudapprox<0&&(t.athaa_loudapprox=2),t.interChRatio<0&&(t.interChRatio=0),t.useTemporal==null&&(t.useTemporal=!0),o.slot_lag=o.frac_SpF=0,t.VBR==D.vbr_off&&(o.slot_lag=o.frac_SpF=(t.version+1)*72e3*t.brate%t.out_samplerate|0),F.iteration_init(t),y.psymodel_init(t),Y(t.scale>=0),0};function H(t,o){(t.in_buffer_0==null||t.in_buffer_nsamples<o)&&(t.in_buffer_0=i1(o),t.in_buffer_1=i1(o),t.in_buffer_nsamples=o)}this.lame_encode_flush=function(t,o,d1,R1){var V1=t.internal_flags,E1=W([2,1152]),k1=0,B1,L1,P1,b1,C1=V1.mf_samples_to_encode-Z.POSTDELAY,z1=_1(t);if(V1.mf_samples_to_encode<1)return 0;for(B1=0,t.in_samplerate!=t.out_samplerate&&(C1+=16*t.out_samplerate/t.in_samplerate),P1=t.framesize-C1%t.framesize,P1<576&&(P1+=t.framesize),t.encoder_padding=P1,b1=(C1+P1)/t.framesize;b1>0&&k1>=0;){var l=z1-V1.mf_size,f=t.frameNum;l*=t.in_samplerate,l/=t.out_samplerate,l>1152&&(l=1152),l<1&&(l=1),L1=R1-B1,R1==0&&(L1=0),k1=this.lame_encode_buffer(t,E1[0],E1[1],l,o,d1,L1),d1+=k1,B1+=k1,b1-=f!=t.frameNum?1:0}if(V1.mf_samples_to_encode=0,k1<0||(L1=R1-B1,R1==0&&(L1=0),S.flush_bitstream(t),k1=S.copy_buffer(V1,o,d1,L1,1),k1<0))return k1;if(d1+=k1,B1+=k1,L1=R1-B1,R1==0&&(L1=0),t.write_id3tag_automatic){if(w.id3tag_write_v1(t),k1=S.copy_buffer(V1,o,d1,L1,0),k1<0)return k1;B1+=k1}return B1},this.lame_encode_buffer=function(t,o,d1,R1,V1,E1,k1){var B1=t.internal_flags,L1=[null,null];if(B1.Class_ID!=E)return-3;if(R1==0)return 0;H(B1,R1),L1[0]=B1.in_buffer_0,L1[1]=B1.in_buffer_1;for(var P1=0;P1<R1;P1++)L1[0][P1]=o[P1],B1.channels_in>1&&(L1[1][P1]=d1[P1]);return u1(t,L1[0],L1[1],R1,V1,E1,k1)};function _1(t){var o=Z.BLKSIZE+t.framesize-Z.FFTOFFSET;return o=Math.max(o,512+t.framesize-32),o}function u1(t,o,d1,R1,V1,E1,k1){var B1=t.internal_flags,L1=0,P1,b1,C1,z1,l,f=[null,null],R=[null,null];if(B1.Class_ID!=E)return-3;if(R1==0)return 0;if(l=S.copy_buffer(B1,V1,E1,k1,0),l<0)return l;if(E1+=l,L1+=l,R[0]=o,R[1]=d1,j.NEQ(t.scale,0)&&j.NEQ(t.scale,1))for(b1=0;b1<R1;++b1)R[0][b1]*=t.scale,B1.channels_out==2&&(R[1][b1]*=t.scale);if(j.NEQ(t.scale_left,0)&&j.NEQ(t.scale_left,1))for(b1=0;b1<R1;++b1)R[0][b1]*=t.scale_left;if(j.NEQ(t.scale_right,0)&&j.NEQ(t.scale_right,1))for(b1=0;b1<R1;++b1)R[1][b1]*=t.scale_right;if(t.num_channels==2&&B1.channels_out==1)for(b1=0;b1<R1;++b1)R[0][b1]=.5*(R[0][b1]+R[1][b1]),R[1][b1]=0;z1=_1(t),f[0]=B1.mfbuf[0],f[1]=B1.mfbuf[1];for(var k=0;R1>0;){var V=[null,null],v=0,N=0;V[0]=R[0],V[1]=R[1];var q=new w1;if(ue(t,f,V,k,R1,q),v=q.n_in,N=q.n_out,B1.findReplayGain&&!B1.decode_on_the_fly&&b.AnalyzeSamples(B1.rgdata,f[0],B1.mf_size,f[1],B1.mf_size,N,B1.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(R1-=v,k+=v,B1.channels_out==2,B1.mf_size+=N,Y(B1.mf_size<=p.MFSIZE),B1.mf_samples_to_encode<1&&(B1.mf_samples_to_encode=Z.ENCDELAY+Z.POSTDELAY),B1.mf_samples_to_encode+=N,B1.mf_size>=z1){var I=k1-L1;if(k1==0&&(I=0),P1=v1(t,f[0],f[1],V1,E1,I),P1<0)return P1;for(E1+=P1,L1+=P1,B1.mf_size-=t.framesize,B1.mf_samples_to_encode-=t.framesize,C1=0;C1<B1.channels_out;C1++)for(b1=0;b1<B1.mf_size;b1++)f[C1][b1]=f[C1][b1+t.framesize]}}return L1}function v1(t,o,d1,R1,V1,E1){var k1=e.enc.lame_encode_mp3_frame(t,o,d1,R1,V1,E1);return t.frameNum++,k1}function w1(){this.n_in=0,this.n_out=0}function g1(){this.num_used=0}function M1(t,o){return o!=0?M1(o,t%o):t}function T1(t,o,d1){var R1=Math.PI*o;t/=d1,t<0&&(t=0),t>1&&(t=1);var V1=t-.5,E1=.42-.5*Math.cos(2*t*Math.PI)+.08*Math.cos(4*t*Math.PI);return Math.abs(V1)<1e-9?R1/Math.PI:E1*Math.sin(d1*R1*V1)/(Math.PI*d1*V1)}function j1(t,o,d1,R1,V1,E1,k1,B1,L1){var P1=t.internal_flags,b1,C1=0,z1,l=t.out_samplerate/M1(t.out_samplerate,t.in_samplerate);l>p.BPC&&(l=p.BPC);var f=Math.abs(P1.resample_ratio-Math.floor(.5+P1.resample_ratio))<1e-4?1:0,R=1/P1.resample_ratio;R>1&&(R=1);var k=31;k%2==0&&--k,k+=f;var V=k+1;if(P1.fill_buffer_resample_init==0){for(P1.inbuf_old[0]=i1(V),P1.inbuf_old[1]=i1(V),b1=0;b1<=2*l;++b1)P1.blackfilt[b1]=i1(V);for(P1.itime[0]=0,P1.itime[1]=0,C1=0;C1<=2*l;C1++){var v=0,N=(C1-l)/(2*l);for(b1=0;b1<=k;b1++)v+=P1.blackfilt[C1][b1]=T1(b1-N,R,k);for(b1=0;b1<=k;b1++)P1.blackfilt[C1][b1]/=v}P1.fill_buffer_resample_init=1}var q=P1.inbuf_old[L1];for(z1=0;z1<R1;z1++){var I,s1;if(I=z1*P1.resample_ratio,C1=0|Math.floor(I-P1.itime[L1]),k+C1-k/2>=k1)break;var N=I-P1.itime[L1]-(C1+.5*(k%2));s1=0|Math.floor(N*2*l+l+.5);var Q=0;for(b1=0;b1<=k;++b1){var t1=0|b1+C1-k/2,p1;p1=t1<0?q[V+t1]:V1[E1+t1],Q+=p1*P1.blackfilt[s1][b1]}o[d1+z1]=Q}if(B1.num_used=Math.min(k1,k+C1-k/2),P1.itime[L1]+=B1.num_used-z1*P1.resample_ratio,B1.num_used>=V)for(b1=0;b1<V;b1++)q[b1]=V1[E1+B1.num_used+b1-V];else{var x1=V-B1.num_used;for(b1=0;b1<x1;++b1)q[b1]=q[b1+B1.num_used];for(C1=0;b1<V;++b1,++C1)q[b1]=V1[E1+C1];Y(C1==B1.num_used)}return z1}function ue(t,o,d1,R1,V1,E1){var k1=t.internal_flags;if(k1.resample_ratio<.9999||k1.resample_ratio>1.0001)for(var B1=0;B1<k1.channels_out;B1++){var L1=new g1;E1.n_out=j1(t,o[B1],k1.mf_size,t.framesize,d1[B1],R1,V1,L1,B1),E1.n_in=L1.num_used}else{E1.n_out=Math.min(t.framesize,V1),E1.n_in=E1.n_out;for(var P1=0;P1<E1.n_out;++P1)o[0][k1.mf_size+P1]=d1[0][R1+P1],k1.channels_out==2&&(o[1][k1.mf_size+P1]=d1[1][R1+P1])}}}return Ba=n,Ba}var Lt=Q1,Me=Lt.VbrMode;function Dt(){var B=Oa();function C(p,h,J,U,j,n1,Z,n,r,e,m,x,b,S,d){this.vbr_q=p,this.quant_comp=h,this.quant_comp_s=J,this.expY=U,this.st_lrm=j,this.st_s=n1,this.masking_adj=Z,this.masking_adj_short=n,this.ath_lower=r,this.ath_curve=e,this.ath_sensitivity=m,this.interch=x,this.safejoint=b,this.sfb21mod=S,this.msfix=d}function D(p,h,J,U,j,n1,Z,n,r,e,m,x,b,S){this.quant_comp=h,this.quant_comp_s=J,this.safejoint=U,this.nsmsfix=j,this.st_lrm=n1,this.st_s=Z,this.nsbass=n,this.scale=r,this.masking_adj=e,this.ath_lower=m,this.ath_curve=x,this.interch=b,this.sfscale=S}var $;this.setModules=function(p){$=p};var i1=[new C(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new C(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new C(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new C(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new C(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new C(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new C(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new C(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new C(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new C(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new C(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],G=[new C(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new C(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new C(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new C(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new C(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new C(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new C(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new C(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new C(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new C(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new C(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function W(p,h,J){var U=p.VBR==Me.vbr_rh?i1:G,j=p.VBR_q_frac,n1=U[h],Z=U[h+1],n=n1;n1.st_lrm=n1.st_lrm+j*(Z.st_lrm-n1.st_lrm),n1.st_s=n1.st_s+j*(Z.st_s-n1.st_s),n1.masking_adj=n1.masking_adj+j*(Z.masking_adj-n1.masking_adj),n1.masking_adj_short=n1.masking_adj_short+j*(Z.masking_adj_short-n1.masking_adj_short),n1.ath_lower=n1.ath_lower+j*(Z.ath_lower-n1.ath_lower),n1.ath_curve=n1.ath_curve+j*(Z.ath_curve-n1.ath_curve),n1.ath_sensitivity=n1.ath_sensitivity+j*(Z.ath_sensitivity-n1.ath_sensitivity),n1.interch=n1.interch+j*(Z.interch-n1.interch),n1.msfix=n1.msfix+j*(Z.msfix-n1.msfix),h1(p,n.vbr_q),J!=0?p.quant_comp=n.quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=n.quant_comp),J!=0?p.quant_comp_short=n.quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=n.quant_comp_s),n.expY!=0&&(p.experimentalY=n.expY!=0),J!=0?p.internal_flags.nsPsy.attackthre=n.st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=n.st_lrm),J!=0?p.internal_flags.nsPsy.attackthre_s=n.st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=n.st_s),J!=0?p.maskingadjust=n.masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=n.masking_adj),J!=0?p.maskingadjust_short=n.masking_adj_short:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=n.masking_adj_short),J!=0?p.ATHlower=-n.ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-n.ath_lower/10),J!=0?p.ATHcurve=n.ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=n.ath_curve),J!=0?p.athaa_sensitivity=n.ath_sensitivity:Math.abs(p.athaa_sensitivity- -1)>0||(p.athaa_sensitivity=n.ath_sensitivity),n.interch>0&&(J!=0?p.interChRatio=n.interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=n.interch)),n.safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|n.safejoint),n.sfb21mod>0&&(p.exp_nspsytune=p.exp_nspsytune|n.sfb21mod<<20),J!=0?p.msfix=n.msfix:Math.abs(p.msfix- -1)>0||(p.msfix=n.msfix),J==0&&(p.VBR_q=h,p.VBR_q_frac=j)}var Y=[new D(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new D(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new D(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new D(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new D(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new D(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new D(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new D(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new D(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new D(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new D(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new D(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new D(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new D(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new D(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new D(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new D(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function K(p,h,J){var U=h,j=$.nearestBitrateFullIndex(h);if(p.VBR=Me.vbr_abr,p.VBR_mean_bitrate_kbps=U,p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,320),p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.brate=p.VBR_mean_bitrate_kbps,p.VBR_mean_bitrate_kbps>320&&(p.disable_reservoir=!0),Y[j].safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|2),Y[j].sfscale>0&&(p.internal_flags.noise_shaping=2),Math.abs(Y[j].nsbass)>0){var n1=int(Y[j].nsbass*4);n1<0&&(n1+=64),p.exp_nspsytune=p.exp_nspsytune|n1<<2}return J!=0?p.quant_comp=Y[j].quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=Y[j].quant_comp),J!=0?p.quant_comp_short=Y[j].quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=Y[j].quant_comp_s),J!=0?p.msfix=Y[j].nsmsfix:Math.abs(p.msfix- -1)>0||(p.msfix=Y[j].nsmsfix),J!=0?p.internal_flags.nsPsy.attackthre=Y[j].st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=Y[j].st_lrm),J!=0?p.internal_flags.nsPsy.attackthre_s=Y[j].st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=Y[j].st_s),J!=0?p.scale=Y[j].scale:Math.abs(p.scale- -1)>0||(p.scale=Y[j].scale),J!=0?p.maskingadjust=Y[j].masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=Y[j].masking_adj),Y[j].masking_adj>0?J!=0?p.maskingadjust_short=Y[j].masking_adj*.9:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=Y[j].masking_adj*.9):J!=0?p.maskingadjust_short=Y[j].masking_adj*1.1:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=Y[j].masking_adj*1.1),J!=0?p.ATHlower=-Y[j].ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-Y[j].ath_lower/10),J!=0?p.ATHcurve=Y[j].ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=Y[j].ath_curve),J!=0?p.interChRatio=Y[j].interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=Y[j].interch),h}this.apply_preset=function(p,h,J){switch(h){case B.R3MIX:{h=B.V3,p.VBR=Me.vbr_mtrh;break}case B.MEDIUM:{h=B.V4,p.VBR=Me.vbr_rh;break}case B.MEDIUM_FAST:{h=B.V4,p.VBR=Me.vbr_mtrh;break}case B.STANDARD:{h=B.V2,p.VBR=Me.vbr_rh;break}case B.STANDARD_FAST:{h=B.V2,p.VBR=Me.vbr_mtrh;break}case B.EXTREME:{h=B.V0,p.VBR=Me.vbr_rh;break}case B.EXTREME_FAST:{h=B.V0,p.VBR=Me.vbr_mtrh;break}case B.INSANE:return h=320,p.preset=h,K(p,h,J),p.VBR=Me.vbr_off,h}switch(p.preset=h,h){case B.V9:return W(p,9,J),h;case B.V8:return W(p,8,J),h;case B.V7:return W(p,7,J),h;case B.V6:return W(p,6,J),h;case B.V5:return W(p,5,J),h;case B.V4:return W(p,4,J),h;case B.V3:return W(p,3,J),h;case B.V2:return W(p,2,J),h;case B.V1:return W(p,1,J),h;case B.V0:return W(p,0,J),h}return 8<=h&&h<=320?K(p,h,J):(p.preset=0,h)};function h1(p,h){var J=0;return 0>h&&(J=-1,h=0),9<h&&(J=-1,h=9),p.VBR_q=h,p.VBR_q_frac=0,J}}var Nt=Dt;function Xt(){this.setModules=function(B,C){}}var Ot=Xt;function Ht(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Yt=Ht,X0=Q1,f0=X0.new_float,Ct=X0.new_int;function jt(){this.global_gain=0,this.sfb_count1=0,this.step=Ct(39),this.noise=f0(39),this.noise_log=f0(39)}var qt=jt,Ye=Q1,Te=Ye.System,c0=Ye.VbrMode,Ta=Ye.Util,Oe=Ye.Arrays,Ge=Ye.new_float,Qe=Ye.assert,Ft=Ot,ka=Yt,Zt=qt,Y1=te(),u0=Va,h0=na;function Gt(){var B;this.rv=null;var C;this.qupvt=null;var D,$=new Ft,i1;this.setModules=function(n,r,e,m){B=n,C=r,this.rv=r,D=e,this.qupvt=e,i1=m,$.setModules(D,i1)},this.ms_convert=function(n,r){for(var e=0;e<576;++e){var m=n.tt[r][0].xr[e],x=n.tt[r][1].xr[e];n.tt[r][0].xr[e]=(m+x)*(Ta.SQRT2*.5),n.tt[r][1].xr[e]=(m-x)*(Ta.SQRT2*.5)}};function G(n,r,e,m){m=0;for(var x=0;x<=e;++x){var b=Math.abs(n.xr[x]);m+=b,r[x]=Math.sqrt(b*Math.sqrt(b)),r[x]>n.xrpow_max&&(n.xrpow_max=r[x])}return m}this.init_xrpow=function(n,r,e){var m=0,x=0|r.max_nonzero_coeff;if(r.xrpow_max=0,Oe.fill(e,x,576,0),m=G(r,e,x,m),m>1e-20){var b=0;n.substep_shaping&2&&(b=1);for(var S=0;S<r.psymax;S++)n.pseudohalf[S]=b;return!0}return Oe.fill(r.l3_enc,0,576,0),!1};function W(n,r){var e=n.ATH,m=r.xr;if(r.block_type!=Y1.SHORT_TYPE)for(var x=!1,b=Y1.PSFB21-1;b>=0&&!x;b--){var S=n.scalefac_band.psfb21[b],d=n.scalefac_band.psfb21[b+1],F=D.athAdjust(e.adjust,e.psfb21[b],e.floor);n.nsPsy.longfact[21]>1e-12&&(F*=n.nsPsy.longfact[21]);for(var L=d-1;L>=S;L--)if(Math.abs(m[L])<F)m[L]=0;else{x=!0;break}}else for(var y=0;y<3;y++)for(var x=!1,b=Y1.PSFB12-1;b>=0&&!x;b--){var S=n.scalefac_band.s[12]*3+(n.scalefac_band.s[13]-n.scalefac_band.s[12])*y+(n.scalefac_band.psfb12[b]-n.scalefac_band.psfb12[0]),d=S+(n.scalefac_band.psfb12[b+1]-n.scalefac_band.psfb12[b]),c=D.athAdjust(e.adjust,e.psfb12[b],e.floor);n.nsPsy.shortfact[12]>1e-12&&(c*=n.nsPsy.shortfact[12]);for(var L=d-1;L>=S;L--)if(Math.abs(m[L])<c)m[L]=0;else{x=!0;break}}}this.init_outer_loop=function(n,r){r.part2_3_length=0,r.big_values=0,r.count1=0,r.global_gain=210,r.scalefac_compress=0,r.table_select[0]=0,r.table_select[1]=0,r.table_select[2]=0,r.subblock_gain[0]=0,r.subblock_gain[1]=0,r.subblock_gain[2]=0,r.subblock_gain[3]=0,r.region0_count=0,r.region1_count=0,r.preflag=0,r.scalefac_scale=0,r.count1table_select=0,r.part2_length=0,r.sfb_lmax=Y1.SBPSY_l,r.sfb_smin=Y1.SBPSY_s,r.psy_lmax=n.sfb21_extra?Y1.SBMAX_l:Y1.SBPSY_l,r.psymax=r.psy_lmax,r.sfbmax=r.sfb_lmax,r.sfbdivide=11;for(var e=0;e<Y1.SBMAX_l;e++)r.width[e]=n.scalefac_band.l[e+1]-n.scalefac_band.l[e],r.window[e]=3;if(r.block_type==Y1.SHORT_TYPE){var m=Ge(576);r.sfb_smin=0,r.sfb_lmax=0,r.mixed_block_flag!=0&&(r.sfb_smin=3,r.sfb_lmax=n.mode_gr*2+4),r.psymax=r.sfb_lmax+3*((n.sfb21_extra?Y1.SBMAX_s:Y1.SBPSY_s)-r.sfb_smin),r.sfbmax=r.sfb_lmax+3*(Y1.SBPSY_s-r.sfb_smin),r.sfbdivide=r.sfbmax-18,r.psy_lmax=r.sfb_lmax;var x=n.scalefac_band.l[r.sfb_lmax];Te.arraycopy(r.xr,0,m,0,576);for(var e=r.sfb_smin;e<Y1.SBMAX_s;e++)for(var b=n.scalefac_band.s[e],S=n.scalefac_band.s[e+1],d=0;d<3;d++)for(var F=b;F<S;F++)r.xr[x++]=m[3*F+d];for(var L=r.sfb_lmax,e=r.sfb_smin;e<Y1.SBMAX_s;e++)r.width[L]=r.width[L+1]=r.width[L+2]=n.scalefac_band.s[e+1]-n.scalefac_band.s[e],r.window[L]=0,r.window[L+1]=1,r.window[L+2]=2,L+=3}r.count1bits=0,r.sfb_partition_table=D.nr_of_sfb_block[0][0],r.slen[0]=0,r.slen[1]=0,r.slen[2]=0,r.slen[3]=0,r.max_nonzero_coeff=575,Oe.fill(r.scalefac,0),W(n,r)};function Y(n){this.ordinal=n}Y.BINSEARCH_NONE=new Y(0),Y.BINSEARCH_UP=new Y(1),Y.BINSEARCH_DOWN=new Y(2);function K(n,r,e,m,x){var b,S=n.CurrentStep[m],d=!1,F=n.OldValue[m],L=Y.BINSEARCH_NONE;for(r.global_gain=F,e-=r.part2_length;;){var y;if(b=i1.count_bits(n,x,r,null),S==1||b==e)break;b>e?(L==Y.BINSEARCH_DOWN&&(d=!0),d&&(S/=2),L=Y.BINSEARCH_UP,y=S):(L==Y.BINSEARCH_UP&&(d=!0),d&&(S/=2),L=Y.BINSEARCH_DOWN,y=-S),r.global_gain+=y,r.global_gain<0&&(r.global_gain=0,d=!0),r.global_gain>255&&(r.global_gain=255,d=!0)}for(Qe(r.global_gain>=0),Qe(r.global_gain<256);b>e&&r.global_gain<255;)r.global_gain++,b=i1.count_bits(n,x,r,null);return n.CurrentStep[m]=F-r.global_gain>=4?4:2,n.OldValue[m]=r.global_gain,r.part2_3_length=b,b}this.trancate_smallspectrums=function(n,r,e,m){var x=Ge(h0.SFBMAX);if(!(!(n.substep_shaping&4)&&r.block_type==Y1.SHORT_TYPE||n.substep_shaping&128)){D.calc_noise(r,e,x,new ka,null);for(var S=0;S<576;S++){var b=0;r.l3_enc[S]!=0&&(b=Math.abs(r.xr[S])),m[S]=b}var S=0,d=8;r.block_type==Y1.SHORT_TYPE&&(d=6);do{var F,L,y,c,w=r.width[d];if(S+=w,!(x[d]>=1)&&(Oe.sort(m,S-w,w),!BitStream.EQ(m[S-1],0))){F=(1-x[d])*e[d],L=0,c=0;do{var g;for(y=1;c+y<w&&!BitStream.NEQ(m[c+S-w],m[c+S+y-w]);y++);if(g=m[c+S-w]*m[c+S-w]*y,F<g){c!=0&&(L=m[c+S-w-1]);break}F-=g,c+=y}while(c<w);if(!BitStream.EQ(L,0))do Math.abs(r.xr[S-w])<=L&&(r.l3_enc[S-w]=0);while(--w>0)}}while(++d<r.psymax);r.part2_3_length=i1.noquant_count_bits(n,r,null)}};function h1(n){for(var r=0;r<n.sfbmax;r++)if(n.scalefac[r]+n.subblock_gain[n.window[r]]==0)return!1;return!0}function p(n){return Ta.FAST_LOG10(.368+.632*n*n*n)}function h(n,r){for(var e=1e-37,m=0;m<r.psymax;m++)e+=p(n[m]);return Math.max(1e-20,e)}function J(n,r,e,m,x){var b;switch(n){default:case 9:{r.over_count>0?(b=e.over_SSD<=r.over_SSD,e.over_SSD==r.over_SSD&&(b=e.bits<r.bits)):b=e.max_noise<0&&e.max_noise*10+e.bits<=r.max_noise*10+r.bits;break}case 0:b=e.over_count<r.over_count||e.over_count==r.over_count&&e.over_noise<r.over_noise||e.over_count==r.over_count&&BitStream.EQ(e.over_noise,r.over_noise)&&e.tot_noise<r.tot_noise;break;case 8:e.max_noise=h(x,m);case 1:b=e.max_noise<r.max_noise;break;case 2:b=e.tot_noise<r.tot_noise;break;case 3:b=e.tot_noise<r.tot_noise&&e.max_noise<r.max_noise;break;case 4:b=e.max_noise<=0&&r.max_noise>.2||e.max_noise<=0&&r.max_noise<0&&r.max_noise>e.max_noise-.2&&e.tot_noise<r.tot_noise||e.max_noise<=0&&r.max_noise>0&&r.max_noise>e.max_noise-.2&&e.tot_noise<r.tot_noise+r.over_noise||e.max_noise>0&&r.max_noise>-.05&&r.max_noise>e.max_noise-.1&&e.tot_noise+e.over_noise<r.tot_noise+r.over_noise||e.max_noise>0&&r.max_noise>-.1&&r.max_noise>e.max_noise-.15&&e.tot_noise+e.over_noise+e.over_noise<r.tot_noise+r.over_noise+r.over_noise;break;case 5:b=e.over_noise<r.over_noise||BitStream.EQ(e.over_noise,r.over_noise)&&e.tot_noise<r.tot_noise;break;case 6:b=e.over_noise<r.over_noise||BitStream.EQ(e.over_noise,r.over_noise)&&(e.max_noise<r.max_noise||BitStream.EQ(e.max_noise,r.max_noise)&&e.tot_noise<=r.tot_noise);break;case 7:b=e.over_count<r.over_count||e.over_noise<r.over_noise;break}return r.over_count==0&&(b=b&&e.bits<r.bits),b}function U(n,r,e,m,x){var b=n.internal_flags,S;r.scalefac_scale==0?S=1.2968395546510096:S=1.6817928305074292;for(var d=0,F=0;F<r.sfbmax;F++)d<e[F]&&(d=e[F]);var L=b.noise_shaping_amp;switch(L==3&&(x?L=2:L=1),L){case 2:break;case 1:d>1?d=Math.pow(d,.5):d*=.95;break;case 0:default:d>1?d=1:d*=.95;break}for(var y=0,F=0;F<r.sfbmax;F++){var c=r.width[F],w;if(y+=c,!(e[F]<d)){if(b.substep_shaping&2&&(b.pseudohalf[F]=b.pseudohalf[F]==0?1:0,b.pseudohalf[F]==0&&b.noise_shaping_amp==2))return;for(r.scalefac[F]++,w=-c;w<0;w++)m[y+w]*=S,m[y+w]>r.xrpow_max&&(r.xrpow_max=m[y+w]);if(b.noise_shaping_amp==2)return}}}function j(n,r){for(var e=1.2968395546510096,m=0,x=0;x<n.sfbmax;x++){var b=n.width[x],S=n.scalefac[x];if(n.preflag!=0&&(S+=D.pretab[x]),m+=b,S&1){S++;for(var d=-b;d<0;d++)r[m+d]*=e,r[m+d]>n.xrpow_max&&(n.xrpow_max=r[m+d])}n.scalefac[x]=S>>1}n.preflag=0,n.scalefac_scale=1}function n1(n,r,e){var m,x=r.scalefac;for(m=0;m<r.sfb_lmax;m++)if(x[m]>=16)return!0;for(var b=0;b<3;b++){var S=0,d=0;for(m=r.sfb_lmax+b;m<r.sfbdivide;m+=3)S<x[m]&&(S=x[m]);for(;m<r.sfbmax;m+=3)d<x[m]&&(d=x[m]);if(!(S<16&&d<8)){if(r.subblock_gain[b]>=7)return!0;r.subblock_gain[b]++;var F=n.scalefac_band.l[r.sfb_lmax];for(m=r.sfb_lmax+b;m<r.sfbmax;m+=3){var L,y=r.width[m],c=x[m];if(c=c-(4>>r.scalefac_scale),c>=0){x[m]=c,F+=y*3;continue}x[m]=0;{var w=210+(c<<r.scalefac_scale+1);L=D.IPOW20(w)}F+=y*(b+1);for(var g=-y;g<0;g++)e[F+g]*=L,e[F+g]>r.xrpow_max&&(r.xrpow_max=e[F+g]);F+=y*(3-b-1)}{var L=D.IPOW20(202);F+=r.width[m]*(b+1);for(var g=-r.width[m];g<0;g++)e[F+g]*=L,e[F+g]>r.xrpow_max&&(r.xrpow_max=e[F+g])}}}return!1}function Z(n,r,e,m,x){var b=n.internal_flags;U(n,r,e,m,x);var S=h1(r);return S?!1:(b.mode_gr==2?S=i1.scale_bitcount(r):S=i1.scale_bitcount_lsf(b,r),S?(b.noise_shaping>1&&(Oe.fill(b.pseudohalf,0),r.scalefac_scale==0?(j(r,m),S=!1):r.block_type==Y1.SHORT_TYPE&&b.subblock_gain>0&&(S=n1(b,r,m)||h1(r))),S||(b.mode_gr==2?S=i1.scale_bitcount(r):S=i1.scale_bitcount_lsf(b,r)),!S):!0)}this.outer_loop=function(n,r,e,m,x,b){var S=n.internal_flags,d=new u0,F=Ge(576),L=Ge(h0.SFBMAX),y=new ka,c,w=new Zt,g=9999999,M=!1,X=!1,P=0;if(K(S,r,b,x,m),S.noise_shaping==0)return 100;D.calc_noise(r,e,L,y,w),y.bits=r.part2_3_length,d.assign(r);var E=0;for(Te.arraycopy(m,0,F,0,576);!M;){do{var z=new ka,A,_=255;if(S.substep_shaping&2?A=20:A=3,S.sfb21_extra&&(L[d.sfbmax]>1||d.block_type==Y1.SHORT_TYPE&&(L[d.sfbmax+1]>1||L[d.sfbmax+2]>1))||!Z(n,d,L,m,X))break;d.scalefac_scale!=0&&(_=254);var s=b-d.part2_length;if(s<=0)break;for(;(d.part2_3_length=i1.count_bits(S,m,d,w))>s&&d.global_gain<=_;)d.global_gain++;if(d.global_gain>_)break;if(y.over_count==0){for(;(d.part2_3_length=i1.count_bits(S,m,d,w))>g&&d.global_gain<=_;)d.global_gain++;if(d.global_gain>_)break}if(D.calc_noise(d,e,L,z,w),z.bits=d.part2_3_length,r.block_type!=Y1.SHORT_TYPE?c=n.quant_comp:c=n.quant_comp_short,c=J(c,y,z,d,L)?1:0,c!=0)g=r.part2_3_length,y=z,r.assign(d),E=0,Te.arraycopy(m,0,F,0,576);else if(S.full_outer_loop==0&&(++E>A&&y.over_count==0||S.noise_shaping_amp==3&&X&&E>30||S.noise_shaping_amp==3&&X&&d.global_gain-P>15))break}while(d.global_gain+d.scalefac_scale<255);S.noise_shaping_amp==3?X?M=!0:(d.assign(r),Te.arraycopy(F,0,m,0,576),E=0,P=d.global_gain,X=!0):M=!0}return Qe(r.global_gain+r.scalefac_scale<=255),n.VBR==c0.vbr_rh||n.VBR==c0.vbr_mtrh?Te.arraycopy(F,0,m,0,576):S.substep_shaping&1&&trancate_smallspectrums(S,r,e,m),y.over_count},this.iteration_finish_one=function(n,r,e){var m=n.l3_side,x=m.tt[r][e];i1.best_scalefac_store(n,r,e,m),n.use_best_huffman==1&&i1.best_huffman_divide(n,x),C.ResvAdjust(n,x)},this.VBR_encode_granule=function(n,r,e,m,x,b,S){var d=n.internal_flags,F=new u0,L=Ge(576),y=S,c=S+1,w=(S+b)/2,g,M,X=0,P=d.sfb21_extra;Qe(y<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Oe.fill(F.l3_enc,0);do w>y-42?d.sfb21_extra=!1:d.sfb21_extra=P,M=outer_loop(n,r,e,m,x,w),M<=0?(X=1,c=r.part2_3_length,F.assign(r),Te.arraycopy(m,0,L,0,576),S=c-32,g=S-b,w=(S+b)/2):(b=w+32,g=S-b,w=(S+b)/2,X!=0&&(X=2,r.assign(F),Te.arraycopy(L,0,m,0,576)));while(g>12);d.sfb21_extra=P,X==2&&Te.arraycopy(F.l3_enc,0,r.l3_enc,0,576),Qe(r.part2_3_length<=y)},this.get_framebits=function(n,r){var e=n.internal_flags;e.bitrate_index=e.VBR_min_bitrate;var m=B.getframebits(n);e.bitrate_index=1,m=B.getframebits(n);for(var x=1;x<=e.VBR_max_bitrate;x++){e.bitrate_index=x;var b=new MeanBits(m);r[x]=C.ResvFrameBegin(n,b),m=b.bits}},this.VBR_old_prepare=function(n,r,e,m,x,b,S,d,F){var L=n.internal_flags,y,c=0,w=1,g=0;L.bitrate_index=L.VBR_max_bitrate;var M=C.ResvFrameBegin(n,new MeanBits(0))/L.mode_gr;get_framebits(n,b);for(var X=0;X<L.mode_gr;X++){var P=D.on_pe(n,r,d[X],M,X,0);L.mode_ext==Y1.MPG_MD_MS_LR&&(ms_convert(L.l3_side,X),D.reduce_side(d[X],e[X],M,P));for(var E=0;E<L.channels_out;++E){var z=L.l3_side.tt[X][E];z.block_type!=Y1.SHORT_TYPE?(c=1.28/(1+Math.exp(3.5-r[X][E]/300))-.05,y=L.PSY.mask_adjust-c):(c=2.56/(1+Math.exp(3.5-r[X][E]/300))-.14,y=L.PSY.mask_adjust_short-c),L.masking_lower=Math.pow(10,y*.1),init_outer_loop(L,z),F[X][E]=D.calc_xmin(n,m[X][E],z,x[X][E]),F[X][E]!=0&&(w=0),S[X][E]=126,g+=d[X][E]}}for(var X=0;X<L.mode_gr;X++)for(var E=0;E<L.channels_out;E++)g>b[L.VBR_max_bitrate]&&(d[X][E]*=b[L.VBR_max_bitrate],d[X][E]/=g),S[X][E]>d[X][E]&&(S[X][E]=d[X][E]);return w},this.bitpressure_strategy=function(n,r,e,m){for(var x=0;x<n.mode_gr;x++)for(var b=0;b<n.channels_out;b++){for(var S=n.l3_side.tt[x][b],d=r[x][b],F=0,L=0;L<S.psy_lmax;L++)d[F++]*=1+.029*L*L/Y1.SBMAX_l/Y1.SBMAX_l;if(S.block_type==Y1.SHORT_TYPE)for(var L=S.sfb_smin;L<Y1.SBMAX_s;L++)d[F++]*=1+.029*L*L/Y1.SBMAX_s/Y1.SBMAX_s,d[F++]*=1+.029*L*L/Y1.SBMAX_s/Y1.SBMAX_s,d[F++]*=1+.029*L*L/Y1.SBMAX_s/Y1.SBMAX_s;m[x][b]=0|Math.max(e[x][b],.9*m[x][b])}},this.VBR_new_prepare=function(n,r,e,m,x,b){var S=n.internal_flags,d=1,F=0,L=0,y;if(n.free_format){S.bitrate_index=0;var c=new MeanBits(F);y=C.ResvFrameBegin(n,c),F=c.bits,x[0]=y}else{S.bitrate_index=S.VBR_max_bitrate;var c=new MeanBits(F);C.ResvFrameBegin(n,c),F=c.bits,get_framebits(n,x),y=x[S.VBR_max_bitrate]}for(var w=0;w<S.mode_gr;w++){D.on_pe(n,r,b[w],F,w,0),S.mode_ext==Y1.MPG_MD_MS_LR&&ms_convert(S.l3_side,w);for(var g=0;g<S.channels_out;++g){var M=S.l3_side.tt[w][g];S.masking_lower=Math.pow(10,S.PSY.mask_adjust*.1),init_outer_loop(S,M),D.calc_xmin(n,e[w][g],M,m[w][g])!=0&&(d=0),L+=b[w][g]}}for(var w=0;w<S.mode_gr;w++)for(var g=0;g<S.channels_out;g++)L>y&&(b[w][g]*=y,b[w][g]/=L);return d},this.calc_target_bits=function(n,r,e,m,x,b){var S=n.internal_flags,d=S.l3_side,F,L,y,c,w=0;S.bitrate_index=S.VBR_max_bitrate;var g=new MeanBits(w);for(b[0]=C.ResvFrameBegin(n,g),w=g.bits,S.bitrate_index=1,w=B.getframebits(n)-S.sideinfo_len*8,x[0]=w/(S.mode_gr*S.channels_out),w=n.VBR_mean_bitrate_kbps*n.framesize*1e3,S.substep_shaping&1&&(w*=1.09),w/=n.out_samplerate,w-=S.sideinfo_len*8,w/=S.mode_gr*S.channels_out,F=.93+.07*(11-n.compression_ratio)/(11-5.5),F<.9&&(F=.9),F>1&&(F=1),L=0;L<S.mode_gr;L++){var M=0;for(y=0;y<S.channels_out;y++){if(m[L][y]=int(F*w),r[L][y]>700){var X=int((r[L][y]-700)/1.4),P=d.tt[L][y];m[L][y]=int(F*w),P.block_type==Y1.SHORT_TYPE&&X<w/2&&(X=w/2),X>w*3/2?X=w*3/2:X<0&&(X=0),m[L][y]+=X}m[L][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(m[L][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),M+=m[L][y]}if(M>LameInternalFlags.MAX_BITS_PER_GRANULE)for(y=0;y<S.channels_out;++y)m[L][y]*=LameInternalFlags.MAX_BITS_PER_GRANULE,m[L][y]/=M}if(S.mode_ext==Y1.MPG_MD_MS_LR)for(L=0;L<S.mode_gr;L++)D.reduce_side(m[L],e[L],w*S.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(c=0,L=0;L<S.mode_gr;L++)for(y=0;y<S.channels_out;y++)m[L][y]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(m[L][y]=LameInternalFlags.MAX_BITS_PER_CHANNEL),c+=m[L][y];if(c>b[0])for(L=0;L<S.mode_gr;L++)for(y=0;y<S.channels_out;y++)m[L][y]*=b[0],m[L][y]/=c}}var Qt=Gt,zt=Q1,p0=zt.assert;function Wt(){var B;this.setModules=function(C){B=C},this.ResvFrameBegin=function(C,D){var $=C.internal_flags,i1,G=$.l3_side,W=B.getframebits(C);D.bits=(W-$.sideinfo_len*8)/$.mode_gr;var Y=8*256*$.mode_gr-8;C.brate>320?i1=8*int(C.brate*1e3/(C.out_samplerate/1152)/8+.5):(i1=8*1440,C.strict_ISO&&(i1=8*int(32e4/(C.out_samplerate/1152)/8+.5))),$.ResvMax=i1-W,$.ResvMax>Y&&($.ResvMax=Y),($.ResvMax<0||C.disable_reservoir)&&($.ResvMax=0);var K=D.bits*$.mode_gr+Math.min($.ResvSize,$.ResvMax);return K>i1&&(K=i1),p0($.ResvMax%8==0),p0($.ResvMax>=0),G.resvDrain_pre=0,$.pinfo!=null&&($.pinfo.mean_bits=D.bits/2,$.pinfo.resvsize=$.ResvSize),K},this.ResvMaxBits=function(C,D,$,i1){var G=C.internal_flags,W,Y=G.ResvSize,K=G.ResvMax;i1!=0&&(Y+=D),G.substep_shaping&1&&(K*=.9),$.bits=D,Y*10>K*9?(W=Y-K*9/10,$.bits+=W,G.substep_shaping|=128):(W=0,G.substep_shaping&=127,!C.disable_reservoir&&!(G.substep_shaping&1)&&($.bits-=.1*D));var h1=Y<G.ResvMax*6/10?Y:G.ResvMax*6/10;return h1-=W,h1<0&&(h1=0),h1},this.ResvAdjust=function(C,D){C.ResvSize-=D.part2_3_length+D.part2_length},this.ResvFrameEnd=function(C,D){var $,i1=C.l3_side;C.ResvSize+=D*C.mode_gr;var G=0;i1.resvDrain_post=0,i1.resvDrain_pre=0,($=C.ResvSize%8)!=0&&(G+=$),$=C.ResvSize-G-C.ResvMax,$>0&&(G+=$);{var W=Math.min(i1.main_data_begin*8,G)/8;i1.resvDrain_pre+=8*W,G-=8*W,C.ResvSize-=8*W,i1.main_data_begin-=W}i1.resvDrain_post+=G,C.ResvSize-=G}}var Kt=Wt;function Jt(){var B="http://www.mp3dev.org/",C=3,D=98,$=4,i1=0,G=93;this.getLameVersion=function(){return C+"."+D+"."+$},this.getLameShortVersion=function(){return C+"."+D+"."+$},this.getLameVeryShortVersion=function(){return"LAME"+C+"."+D+"r"},this.getPsyVersion=function(){return i1+"."+G},this.getLameUrl=function(){return B},this.getLameOsBitness=function(){return"32bits"}}var Ut=Jt,Ce=Q1,$t=Ce.System,Ea=Ce.VbrMode,b0=Ce.ShortBlock,e2=Ce.Arrays,sa=Ce.new_byte,a2=Ce.assert;ze.NUMTOCENTRIES=100;ze.MAXFRAMESIZE=2880;function ze(){var B,C,D;this.setModules=function(w,g,M){B=w,C=g,D=M};var $=1,i1=2,G=4,W=8,Y=ze.NUMTOCENTRIES,K=ze.MAXFRAMESIZE,h1=Y+4+4+4+4+4,p=h1+9+1+1+8+1+1+3+1+1+2+4+2+2,h=128,J=64,U=32,j=null,n1="Xing",Z="Info",n=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function r(w,g){if(w.nVbrNumFrames++,w.sum+=g,w.seen++,!(w.seen<w.want)&&(w.pos<w.size&&(w.bag[w.pos]=w.sum,w.pos++,w.seen=0),w.pos==w.size)){for(var M=1;M<w.size;M+=2)w.bag[M/2]=w.bag[M];w.want*=2,w.pos/=2}}function e(w,g){if(!(w.pos<=0))for(var M=1;M<Y;++M){var X=M/Y,P,E,z=0|Math.floor(X*w.pos);z>w.pos-1&&(z=w.pos-1),P=w.bag[z],E=w.sum;var A=0|256*P/E;A>255&&(A=255),g[M]=255&A}}this.addVbrFrame=function(w){var g=w.internal_flags,M=Tables.bitrate_table[w.version][g.bitrate_index];a2(g.VBR_seek_table.bag!=null),r(g.VBR_seek_table,M)};function m(w,g){var M=w[g+0]&255;return M<<=8,M|=w[g+1]&255,M<<=8,M|=w[g+2]&255,M<<=8,M|=w[g+3]&255,M}function x(w,g,M){w[g+0]=255&(M>>24&255),w[g+1]=255&(M>>16&255),w[g+2]=255&(M>>8&255),w[g+3]=255&(M&255)}function b(w,g,M){w[g+0]=255&(M>>8&255),w[g+1]=255&(M&255)}function S(w,g){return new String(w,g,n1.length(),j).equals(n1)||new String(w,g,Z.length(),j).equals(Z)}function d(w,g,M){return 255&(w<<g|M&~(-1<<g))}function F(w,g){var M=w.internal_flags;g[0]=d(g[0],8,255),g[1]=d(g[1],3,7),g[1]=d(g[1],1,w.out_samplerate<16e3?0:1),g[1]=d(g[1],1,w.version),g[1]=d(g[1],2,1),g[1]=d(g[1],1,w.error_protection?0:1),g[2]=d(g[2],4,M.bitrate_index),g[2]=d(g[2],2,M.samplerate_index),g[2]=d(g[2],1,0),g[2]=d(g[2],1,w.extension),g[3]=d(g[3],2,w.mode.ordinal()),g[3]=d(g[3],2,M.mode_ext),g[3]=d(g[3],1,w.copyright),g[3]=d(g[3],1,w.original),g[3]=d(g[3],2,w.emphasis),g[0]=255;var X=255&(g[1]&241),P;w.version==1?P=h:w.out_samplerate<16e3?P=U:P=J,w.VBR==Ea.vbr_off&&(P=w.brate);var E;w.free_format?E=0:E=255&16*B.BitrateIndex(P,w.version,w.out_samplerate),w.version==1?(g[1]=255&(X|10),X=255&(g[2]&13),g[2]=255&(E|X)):(g[1]=255&(X|2),X=255&(g[2]&13),g[2]=255&(E|X))}this.getVbrTag=function(w){var g=new VBRTagData,M=0;g.flags=0;var X=w[M+1]>>3&1,P=w[M+2]>>2&3,E=w[M+3]>>6&3,z=w[M+2]>>4&15;if(z=Tables.bitrate_table[X][z],w[M+1]>>4==14?g.samprate=Tables.samplerate_table[2][P]:g.samprate=Tables.samplerate_table[X][P],X!=0?E!=3?M+=36:M+=21:E!=3?M+=21:M+=13,!S(w,M))return null;M+=4,g.hId=X;var A=g.flags=m(w,M);if(M+=4,A&$&&(g.frames=m(w,M),M+=4),A&i1&&(g.bytes=m(w,M),M+=4),A&G){if(g.toc!=null)for(var _=0;_<Y;_++)g.toc[_]=w[M+_];M+=Y}g.vbrScale=-1,A&W&&(g.vbrScale=m(w,M),M+=4),g.headersize=(X+1)*72e3*z/g.samprate,M+=21;var s=w[M+0]<<4;s+=w[M+1]>>4;var a=(w[M+1]&15)<<8;return a+=w[M+2]&255,(s<0||s>3e3)&&(s=-1),(a<0||a>3e3)&&(a=-1),g.encDelay=s,g.encPadding=a,g},this.InitVbrTag=function(w){var g=w.internal_flags,M;w.version==1?M=h:w.out_samplerate<16e3?M=U:M=J,w.VBR==Ea.vbr_off&&(M=w.brate);var X=(w.version+1)*72e3*M/w.out_samplerate,P=g.sideinfo_len+p;if(g.VBR_seek_table.TotalFrameSize=X,X<P||X>K){w.bWriteVbrTag=!1;return}g.VBR_seek_table.nVbrNumFrames=0,g.VBR_seek_table.nBytesWritten=0,g.VBR_seek_table.sum=0,g.VBR_seek_table.seen=0,g.VBR_seek_table.want=1,g.VBR_seek_table.pos=0,g.VBR_seek_table.bag==null&&(g.VBR_seek_table.bag=new int[400],g.VBR_seek_table.size=400);var E=sa(K);F(w,E);for(var z=g.VBR_seek_table.TotalFrameSize,A=0;A<z;++A)C.add_dummy_byte(w,E[A]&255,1)};function L(w,g){var M=g^w;return g=g>>8^n[M&255],g}this.updateMusicCRC=function(w,g,M,X){for(var P=0;P<X;++P)w[0]=L(g[M+P],w[0])};function y(w,g,M,X,P){var E=w.internal_flags,z=0,A=w.encoder_delay,_=w.encoder_padding,s=100-10*w.VBR_q-w.quality,a=D.getLameVeryShortVersion(),i,u=0,O,a1=[1,5,3,2,4,0,3],T=0|(w.lowpassfreq/100+.5>255?255:w.lowpassfreq/100+.5),H=0,_1=0,u1=0,v1=w.internal_flags.noise_shaping,w1=0,g1=0,M1=0,T1=0,j1=0,ue=(w.exp_nspsytune&1)!=0,t=(w.exp_nspsytune&2)!=0,o=!1,d1=!1,R1=w.internal_flags.nogap_total,V1=w.internal_flags.nogap_current,E1=w.ATHtype,k1=0,B1;switch(w.VBR){case vbr_abr:B1=w.VBR_mean_bitrate_kbps;break;case vbr_off:B1=w.brate;break;default:B1=w.VBR_min_bitrate_kbps}switch(w.VBR.ordinal()<a1.length?i=a1[w.VBR.ordinal()]:i=0,O=16*u+i,E.findReplayGain&&(E.RadioGain>510&&(E.RadioGain=510),E.RadioGain<-510&&(E.RadioGain=-510),_1=8192,_1|=3072,E.RadioGain>=0?_1|=E.RadioGain:(_1|=512,_1|=-E.RadioGain)),E.findPeakSample&&(H=Math.abs(0|E.PeakSample/32767*Math.pow(2,23)+.5)),R1!=-1&&(V1>0&&(d1=!0),V1<R1-1&&(o=!0)),k1=E1+((ue?1:0)<<4)+((t?1:0)<<5)+((o?1:0)<<6)+((d1?1:0)<<7),s<0&&(s=0),w.mode){case MONO:w1=0;break;case STEREO:w1=1;break;case DUAL_CHANNEL:w1=2;break;case JOINT_STEREO:w.force_ms?w1=4:w1=3;break;case NOT_SET:default:w1=7;break}w.in_samplerate<=32e3?M1=0:w.in_samplerate==48e3?M1=2:w.in_samplerate>48e3?M1=3:M1=1,(w.short_blocks==b0.short_block_forced||w.short_blocks==b0.short_block_dispensed||w.lowpassfreq==-1&&w.highpassfreq==-1||w.scale_left<w.scale_right||w.scale_left>w.scale_right||w.disable_reservoir&&w.brate<320||w.noATH||w.ATHonly||E1==0||w.in_samplerate<=32e3)&&(g1=1),T1=v1+(w1<<2)+(g1<<5)+(M1<<6),j1=E.nMusicCRC,x(M,X+z,s),z+=4;for(var L1=0;L1<9;L1++)M[X+z+L1]=255&a.charAt(L1);z+=9,M[X+z]=255&O,z++,M[X+z]=255&T,z++,x(M,X+z,H),z+=4,b(M,X+z,_1),z+=2,b(M,X+z,u1),z+=2,M[X+z]=255&k1,z++,B1>=255?M[X+z]=255:M[X+z]=255&B1,z++,M[X+z]=255&A>>4,M[X+z+1]=255&(A<<4)+(_>>8),M[X+z+2]=255&_,z+=3,M[X+z]=255&T1,z++,M[X+z++]=0,b(M,X+z,w.preset),z+=2,x(M,X+z,g),z+=4,b(M,X+z,j1),z+=2;for(var P1=0;P1<z;P1++)P=L(M[X+P1],P);return b(M,X+z,P),z+=2,z}function c(w){w.seek(0);var g=sa(10);w.readFully(g);var M;return new String(g,"ISO-8859-1").startsWith("ID3")?M=0:M=((g[6]&127)<<21|(g[7]&127)<<14|(g[8]&127)<<7|g[9]&127)+g.length,M}this.getLameTagFrame=function(w,g){var M=w.internal_flags;if(!w.bWriteVbrTag||M.Class_ID!=Lame.LAME_ID||M.VBR_seek_table.pos<=0)return 0;if(g.length<M.VBR_seek_table.TotalFrameSize)return M.VBR_seek_table.TotalFrameSize;e2.fill(g,0,M.VBR_seek_table.TotalFrameSize,0),F(w,g);var X=sa(Y);if(w.free_format)for(var P=1;P<Y;++P)X[P]=255&255*P/100;else e(M.VBR_seek_table,X);var E=M.sideinfo_len;w.error_protection&&(E-=2),w.VBR==Ea.vbr_off?(g[E++]=255&Z.charAt(0),g[E++]=255&Z.charAt(1),g[E++]=255&Z.charAt(2),g[E++]=255&Z.charAt(3)):(g[E++]=255&n1.charAt(0),g[E++]=255&n1.charAt(1),g[E++]=255&n1.charAt(2),g[E++]=255&n1.charAt(3)),x(g,E,$+i1+G+W),E+=4,x(g,E,M.VBR_seek_table.nVbrNumFrames),E+=4;var z=M.VBR_seek_table.nBytesWritten+M.VBR_seek_table.TotalFrameSize;x(g,E,0|z),E+=4,$t.arraycopy(X,0,g,E,X.length),E+=X.length,w.error_protection&&C.CRC_writeheader(M,g);for(var A=0,P=0;P<E;P++)A=L(g[P],A);return E+=y(w,z,g,E,A),M.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(w,g){var M=w.internal_flags;if(M.VBR_seek_table.pos<=0||(g.seek(g.length()),g.length()==0))return-1;var X=c(g);g.seek(X);var P=sa(K),E=getLameTagFrame(w,P);return E>P.length?-1:(E<1||g.write(P,0,E),0)}}var t2=ze,O0=Q1,m0=O0.new_byte,s2=O0.assert,r2=Oa(),n2=Nt,_2=I0,i2=D0(),o2=Qt,l2=N0(),f2=Kt,c2=Ke,u2=Xa();te();var h2=Ut,p2=t2;function b2(){this.setModules=function(B,C){}}function m2(){this.setModules=function(B,C,D){}}function d2(){}function v2(){this.setModules=function(B,C){}}function g2(B,C,D){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),B=1,C=44100,D=128);var $=new r2,i1=new b2,G=new _2,W=new u2,Y=new n2,K=new i2,h1=new o2,p=new p2,h=new h2,J=new v2,U=new f2,j=new l2,n1=new m2,Z=new d2;$.setModules(G,W,Y,K,h1,p,h,J,Z),W.setModules(G,Z,h,p),J.setModules(W,h),Y.setModules($),h1.setModules(W,U,K,j),K.setModules(j,U,$.enc.psy),U.setModules(W),j.setModules(K),p.setModules($,W,h),i1.setModules(n1,Z),n1.setModules(h,J,Y);var n=$.lame_init();n.num_channels=B,n.in_samplerate=C,n.brate=D,n.mode=c2.STEREO,n.quality=3,n.bWriteVbrTag=!1,n.disable_reservoir=!0,n.write_id3tag_automatic=!1,$.lame_init_params(n);var r=1152,e=0|1.25*r+7200,m=m0(e);this.encodeBuffer=function(x,b){B==1&&(b=x),s2(x.length==b.length),x.length>r&&(r=x.length,e=0|1.25*r+7200,m=m0(e));var S=$.lame_encode_buffer(n,x,b,x.length,m,0,e);return new Int8Array(m.subarray(0,S))},this.flush=function(){var x=$.lame_encode_flush(n,m,0,e);return new Int8Array(m.subarray(0,x))}}function Se(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function ia(B){return B.charCodeAt(0)<<24|B.charCodeAt(1)<<16|B.charCodeAt(2)<<8|B.charCodeAt(3)}Se.RIFF=ia("RIFF");Se.WAVE=ia("WAVE");Se.fmt_=ia("fmt ");Se.data=ia("data");Se.readHeader=function(B){var C=new Se,D=B.getUint32(0,!1);if(Se.RIFF==D&&(B.getUint32(4,!0),Se.WAVE==B.getUint32(8,!1)&&Se.fmt_==B.getUint32(12,!1))){var $=B.getUint32(16,!0),i1=20;switch($){case 16:case 18:C.channels=B.getUint16(i1+2,!0),C.sampleRate=B.getUint32(i1+4,!0);break;default:throw"extended fmt chunk not implemented"}i1+=$;for(var G=Se.data,W=0;G!=D&&(D=B.getUint32(i1,!1),W=B.getUint32(i1+4,!0),G!=D);)i1+=W+8;return C.dataLen=W,C.dataOffset=i1+8,C}};var M2=g2;let ya=!1;const xa=document.getElementById("start-record"),Pa=document.getElementById("stop-record"),S2=document.getElementById("status"),Ia=document.getElementById("audio"),we=B=>{S2.textContent=B},w2=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return we("このブラウザはマイク入力に対応していません。"),null;try{we("マイクへのアクセスを要求しています…");const B=await navigator.mediaDevices.getUserMedia({audio:!0});return we("マイクの使用が許可されました。"),B}catch(B){return we("マイクの使用が拒否されました、またはエラーが発生しました。"),console.error("getUserMedia error:",B),null}};xa.addEventListener("click",async()=>{const B=await w2();if(B){ya=!0,xa.setAttribute("disabled","true"),Pa.removeAttribute("disabled");try{if(!window.AudioWorklet){we("このブラウザはAudioWorkletに対応していません。");return}we("録音を開始します（AudioWorklet + MP3）…");const C=new AudioContext,D=`
      class RecorderProcessor extends AudioWorkletProcessor {
        process (inputs) {
          const input = inputs[0];
          if (!input) return true;
          // input はチャネルごとの Float32Array の配列
          // postMessage でチャネル配列を転送する（構造化クローン）
          const channels = input.map(ch => ch.slice(0));
          this.port.postMessage(channels);
          return true;
        }
      }
      registerProcessor('recorder-processor', RecorderProcessor);
    `,$=new Blob([D],{type:"application/javascript"}),i1=URL.createObjectURL($);await C.audioWorklet.addModule(i1),URL.revokeObjectURL(i1);const G=C.createMediaStreamSource(B),W=new AudioWorkletNode(C,"recorder-processor",{numberOfInputs:1,numberOfOutputs:0,channelCount:G.channelCount||1});G.connect(W);const Y=G.channelCount||1,K=C.sampleRate,h1=128,p=new M2(Y,K,h1),h=[],J=U=>{const j=U.length,n1=new Int16Array(j);for(let Z=0;Z<j;Z++){let n=Math.max(-1,Math.min(1,U[Z]));n1[Z]=n<0?n*32768:n*32767}return n1};W.port.onmessage=U=>{const j=U.data;if(!(!j||j.length===0))if(j.length===1){const n1=J(j[0]),Z=p.encodeBuffer(n1);Z.length>0&&h.push(Z)}else{const n1=J(j[0]),Z=J(j[1]||j[0]),n=p.encodeBuffer(n1,Z);n.length>0&&h.push(n)}},we("録音中（MP3 にエンコード中）…"),Pa.addEventListener("click",async()=>{if(!ya)return;try{G.disconnect(),W.port.close(),W.disconnect?.()}catch{}const U=p.flush();U&&U.length>0&&h.push(U);const j=new Blob(h,{type:"audio/mpeg"}),n1=URL.createObjectURL(j);window.lastRecordingBlob=j,window.lastRecordingUrl=n1,Ia.controls=!0,Ia.src=n1,Ia.style.display="block",we("録音を MP3 に変換して保存しました。audio 要素を追加しました。"),ya=!1,xa.removeAttribute("disabled"),Pa.setAttribute("disabled","true");try{await C.close()}catch{}},{once:!0})}catch(C){console.error("MP3 エンコードの初期化に失敗しました:",C),we("MP3 エンコードの初期化に失敗しました。ブラウザで lamejs が利用できることを確認してください。")}}});
